<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>XEP-0407: Mediated Information eXchange (MIX): Miscellaneous Capabilities</title><style type="text/css">
/* don't mind this hack */
nav#toc h2:before {
display: none;
content: "XEP-0407";
}
        </style><link rel="stylesheet" type="text/css" href="xmpp.css"><link href="prettify.css" type="text/css" rel="stylesheet"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico"><script type="text/javascript" src="prettify.js"></script><meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=2.0"><meta name="DC.Title" content="Mediated Information eXchange (MIX): Miscellaneous Capabilities"><meta name="DC.Creator" content="Kevin Smith"><meta name="DC.Creator" content="Steve Kille"><meta name="DC.Description" content="This document defines an extension to Mediated Information eXchange (MIX) specified in XEP-0369.  It specifies a number of independent optional capabilities that MAY be used with MIX."><meta name="DC.Publisher" content="XMPP Standards Foundation"><meta name="DC.Contributor" content="XMPP Extensions Editor"><meta name="DC.Date" content="2020-11-03"><meta name="DC.Type" content="XMPP Extension Protocol"><meta name="DC.Format" content="XHTML"><meta name="DC.Identifier" content="XEP-0407"><meta name="DC.Language" content="en"><meta name="DC.Rights" content="This XMPP Extension Protocol is copyright © 1999 – 2020 by the XMPP Standards Foundation (XSF)."></head><body onload="prettyPrint()"><h1>XEP-0407: Mediated Information eXchange (MIX): Miscellaneous Capabilities</h1><div class="docmeta-wrap"><dl id="docmeta" class="compact"><dt>Abstract</dt><dd>This document defines an extension to Mediated Information eXchange (MIX) specified in XEP-0369.  It specifies a number of independent optional capabilities that MAY be used with MIX.</dd><dt>Authors</dt><dd><ul class="authors"><li>Kevin Smith</li><li>Steve Kille</li></ul></dd><dt>Copyright</dt><dd>© 1999 – 2020 XMPP Standards Foundation. <a href="#appendix-legal">SEE LEGAL NOTICES</a>.</dd><dt>Status</dt><dd><p>Deferred</p><div id="status-notice" class="deferred standards track">WARNING: This document has been automatically Deferred after 12 months of inactivity in its previous Experimental state. Implementation of the protocol described herein is not recommended for production systems. However, exploratory implementations are encouraged to resume the standards process.</div></dd><dt>Type</dt><dd>Standards Track</dd><dt>Version</dt><dd>0.1.2 (2020-11-03)</dd></dl><div class="timeline-wrap"><div class="timeline-head">Document Lifecycle</div><ol class="timeline"><li>Experimental</li><li class="current inserted">Deferred</li><li>Proposed</li><li>Draft</li><li>Final</li></ol></div></div><nav id="toc"><a href="#top"><h2>Table of Contents</h2></a><ol class="toc"><li><a href="#intro">Introduction</a></li><li><a href="#avatar">Avatar Publishing</a></li><li><a href="#usecase-user-register">Registering a Nick</a></li><li><a href="#usecase-retract">Retracting a Message</a></li><li><a href="#usecase-user-tell">Telling another User about a Channel</a></li><li><a href="#usecase-user-invite">Inviting another User to join a Channel that the user does not have Permission to Join</a></li><li><a href="#usecase-admin-converting-chat">Converting a 1:1 Conversation to a Channel</a></li><li><a href="#i18n">Internationalization Considerations</a></li><li><a href="#security">Security Considerations</a></li><li><a href="#iana">IANA Considerations</a></li><li><a href="#registrar">XMPP Registrar Considerations</a></li><li><a href="#schema">XML Schema</a></li><li><a href="#ack">Acknowledgements</a></li></ol><h6><a href="#appendices">Appendices</a></h6><ol class="toc-appendices"><li><a href="#appendix-docinfo">Document Information</a></li><li><a href="#appendix-authorinfo">Author Information</a></li><li><a href="#appendix-legal">Legal Notices</a></li><li><a href="#appendix-xmpp">Relation to XMPP</a></li><li><a href="#appendix-discuss">Discussion Venue</a></li><li><a href="#appendix-conformance">Requirements Conformance</a></li><li><a href="#appendix-notes">Notes</a></li><li><a href="#appendix-revs">Revision History</a></li></ol></nav><h2 id="intro">1.
       Introduction<a class="anchor-link" href="#intro"><abbr title="Link to this point in the document">¶</abbr></a></h2>
  <p class="" style="">The Mediated Information eXchange (MIX) protocol framework and core capabilities are specified in <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0369.html">Mediated Information eXchange (MIX) (XEP-0369)</a></span>  [<a href="#nt-idm46076349003280">1</a>] (MIX-CORE).    This specification defines six extensions to this core:


   </p>

  <ol start="" class="" style="">
    <li class="" style="">Avatar Publishing.</li>
    <li class="" style="">Nick Registration.</li>
    <li class="" style="">Retracting a Message.  </li>
    <li class="" style="">Telling another user about a channel.</li>
    <li class="" style="">Invitation by reference.</li>
    <li class="" style="">Converting 1:1 conversation to a channel.</li>
  </ol>

  <p class="" style="">These extensions are independent.  An implementation of this specification should identify clearly which extensions are implemented.</p>

<h2 id="avatar">2.
       Avatar Publishing<a class="anchor-link" href="#avatar"><abbr title="Link to this point in the document">¶</abbr></a></h2>
  <p class="" style="">
    <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0369.html">Mediated Information eXchange (MIX) (XEP-0369)</a></span>  [<a href="#nt-idm46076349003280">1</a>] defines a framework of nodes associated with each channel, where new nodes can be added to provide new services.
    Two nodes defined in this specification MAY bey used to  support  Avatars.  These nodes and their use is defined in <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0084.html">User Avatar (XEP-0084)</a></span>  [<a href="#nt-idm46076348986816">2</a>].  These nodes MAY be created as part of a MIX channel, where it is desired to publish an avatar associated with the channel.
  </p>
  <figure class="table"><figcaption id="table-1"><strong>Table 1:</strong> MIX Nodes for Avatar Support<a class="anchor-link" href="#table-1"><abbr title="Link to this point in the document">¶</abbr></a></figcaption><table>
    <tr class="body"><th colspan="" rowspan="">Name</th><th colspan="" rowspan="">Node</th><th colspan="" rowspan="">Description</th></tr>
    <tr class="body"><td align="" colspan="" rowspan="">Avatar Data</td><td align="" colspan="" rowspan="">'urn:xmpp:avatar:data'</td><td align="" colspan="" rowspan="">For publishing an Avatar</td></tr>
    <tr class="body"><td align="" colspan="" rowspan="">Avatar Metadata</td><td align="" colspan="" rowspan="">'urn:xmpp:avatar:metadata'</td><td align="" colspan="" rowspan="">For publishing Avatar metadata</td></tr>
  </table></figure>

<h2 id="usecase-user-register">3.
       Registering a Nick<a class="anchor-link" href="#usecase-user-register"><abbr title="Link to this point in the document">¶</abbr></a></h2>
      <p class="" style="">A nick MAY be associated with a  user's bare JID.  A user can register a nick with the MIX service.  Nick registration can be used ensure that a user is able to use the same nick in all channels in the service and to prevent other users from using a registered nick.   This can help achieve a consistent experience across a set of channels and prevent user confusion.  Support for nick registration by a MIX service is OPTIONAL.  Where nick registration is supported, nick registration MAY be OPTIONAL or MANDATORY.
        Where a user has registered a Nick with the MIX service, it MAY be used by each channel according to policy for the channel.  A channel MAY enforce use of a registered nick.  A channel MUST NOT use a registered nick for any other participant.
      </p>
      <p class="" style="">
        In order to determine if a Nick is allowed to be registered, the user MAY use disco to determine capabilities of the MIX service.
      </p>
      <figure class="code-example" id="example-1"><figcaption><strong>Example 1.</strong> User Determines features of the MIX service<a class="anchor-link" href="#example-1"><abbr title="Link to this point in the document">¶</abbr></a></figcaption><pre class="prettyprint">
&lt;iq type='get'
    from='hag66@shakespeare.example/UUID-a1j/7533'
    to='mix.shakespeare.example'
    id='7nve413p'&gt;
  &lt;query xmlns='http://jabber.org/protocol/disco#info'/&gt;
&lt;/iq&gt;

&lt;iq type='result'
    to='hag66@shakespeare.example/UUID-a1j/7533'
    from='mix.shakespeare.example'
    id='7nve413p'&gt;
    &lt;query xmlns='http://jabber.org/protocol/disco#info'/&gt;
        &lt;feature var='urn:xmpp:mix:misc:0#nick-register'/&gt;
    &lt;/query&gt;
&lt;/iq&gt;
</pre></figure>
      <p class="" style="">
        The response will be a list of features of the MIX channel.  If Nick Registration is supported, then the result set will include &lt;feature var="urn:xmpp:mix:misc:0#nick-register"/&gt;.
      </p>
      <p class="" style="">
        To register a nick with the MIX service the user sends
        a register command to the service. This is encoded as a &lt;register/&gt; child element of an &lt;iq/&gt; element. The &lt;register/&gt; element is  qualified by the urn:xmpp:mix:misc:0' namespace.  The nick is encoded in a &lt;nick/&gt; child element of the &lt;register/&gt; element. </p>
      <figure class="code-example" id="example-2"><figcaption><strong>Example 2.</strong> User Registers with Service<a class="anchor-link" href="#example-2"><abbr title="Link to this point in the document">¶</abbr></a></figcaption><pre class="prettyprint">
&lt;iq type='set'
    from='hag66@shakespeare.example/UUID-a1j/7533'
    to='mix.shakespeare.example'
    id='7nve413p'&gt;
  &lt;register xmlns='urn:xmpp:mix:misc:0'&gt;
    &lt;nick&gt;thirdwitch&lt;/nick&gt;
  &lt;/register&gt;
&lt;/iq&gt;
</pre></figure>
      <p class="" style="">On success, the service informs the user of its nick. MIX  SHOULD apply the "nickname" profile of the PRECIS OpaqueString class, as defined in <span class="ref" style=""><a href="http://tools.ietf.org/html/rfc7700">RFC 7700</a></span>  [<a href="#nt-idm46076348962176">3</a>] to the requested nick.  This means that  nick that is issued might be different from the nick that was requested.</p>
      <p class="" style="">
        When an Nick is assigned, the MIX server MUST update the Participants Node in the channel to reflect this change.   Any users subscribed to this node will be notified of the change of Nick.
      </p>

      <p class="" style="">The following example shows an example of reporting successful Nick assignment.</p>
      <figure class="code-example" id="example-3"><figcaption><strong>Example 3.</strong> Service Returns User of Nick<a class="anchor-link" href="#example-3"><abbr title="Link to this point in the document">¶</abbr></a></figcaption><pre class="prettyprint">
&lt;iq type='result'
    to='mix.shakespeare.example'
    from='hag66@shakespeare.example/UUID-a1j/7533'
    id='7nve413p'&gt;
  &lt;register xmlns='urn:xmpp:mix:misc:0'&gt;
    &lt;nick&gt;thirdwitch&lt;/nick&gt;
  &lt;/register&gt;
&lt;/iq&gt;
</pre></figure>
      <p class="" style="">If the requested nick is already taken and the MIX service does not assign an alternate nick, the MIX service MUST return a &lt;conflict/&gt; error:</p>
      <figure class="code-example" id="example-4"><figcaption><strong>Example 4.</strong> Nick is Taken<a class="anchor-link" href="#example-4"><abbr title="Link to this point in the document">¶</abbr></a></figcaption><pre class="prettyprint">
&lt;iq type='error'
    to='mix.shakespeare.example'
    from='hag66@shakespeare.example/UUID-a1j/7533'
    id='7nve413p'&gt;
  &lt;error type='cancel'&gt;
    &lt;conflict xmlns='urn:ietf:params:xml:ns:xmpp-stanzas'/&gt;
  &lt;/error&gt;
&lt;/iq&gt;
</pre></figure>
      <p class="" style="">If the register request does not contain a &lt;nick/&gt; element, then the MIX service MUST assign one.  It is RECOMMENDED that the assigned nick is a UUID following <span class="ref" style=""><a href="http://tools.ietf.org/html/rfc4122">RFC 4122</a></span>  [<a href="#nt-idm46076348950480">4</a>].
</p>


    <h2 id="usecase-retract">4.
       Retracting a Message<a class="anchor-link" href="#usecase-retract"><abbr title="Link to this point in the document">¶</abbr></a></h2>
      <p class="" style="">
        A MIX channel MAY support message retraction, where the sender of a messages or an authorized administrator deletes a message.  A MIX channel MAY limit the time frame in which a message is allowed to be retracted, for example to prevent retraction of very old messages.   When a messages is retracted the original message MAY be replaced by a tombstone.  Message retraction is done by sending a special message that identifies the original message.   This mechanism allows the retraction to be distributed on the same path as the original message so that all participating servers and clients MAY honour the retraction.  The protocol to request retraction does this by adding to a message  a &lt;retract&gt; element qualified by the 'urn:xmpp:mix:misc:0' namespace.  A retract messages MUST NOT have a body.   The &lt;retract&gt; element MUST include an 'id' attribute that holds the MAM-ID of the original  message.  The message sender will need to look up the MAM-ID.   The MAM-ID is the convenient message identification for message recipients.  A message and its retraction shown in the following example.
      </p>
      <figure class="code-example" id="example-5"><figcaption><strong>Example 5.</strong> User Retracts a Message<a class="anchor-link" href="#example-5"><abbr title="Link to this point in the document">¶</abbr></a></figcaption><pre class="prettyprint">

&lt;message from='hag66@shakespeare.example/UUID-a1j/7533'
         to='coven@mix.shakespeare.example'
         id='abcde'&gt;
  &lt;body&gt; A Message I did not mean to send &lt;/body&gt;
&lt;/message&gt;

&lt;message from='hag66@shakespeare.example/UUID-a1j/7533'
         to='coven@mix.shakespeare.example'
         id='92vax143g'&gt;
  &lt;retract id='77E07BB0-55CF-4BD4-890E-3F7C0E686BBD' xmlns='urn:xmpp:mix:misc:0'/&gt;
&lt;/message&gt;
</pre></figure>
      <p class="" style="">
        The MIX channel will allow a user to retract a message sent by the user if the 'Allow User Message Retraction' option is configured.    The MIX channel will allow an administrative user to retract any message if the user is in the group specified by the 'Administrator Message Retraction Rights' option.
      </p>
      <p class="" style="">
        If the retraction message is accepted, it MUST be distributed to channel participants.  This will allow retraction to happen in the MAM archive of each channel participant and to reflect the retraction in client GUI.   A client receiving a retraction message SHOULD ensure that the retracted message is no longer displayed to the end user.
      </p>
      <p class="" style="">
        Two approaches to message retraction can be used.  In the first approach, the retracted message is simply removed.   This is appropriate where retraction is provided as a user service and the user has rights to remove messages sent from the record.
      </p>
      <p class="" style="">
        The second approach is to leave a tombstone, which if taken MUST be done in the following manner.  It is recommended to use a tombstone, as simply deleting the message may cause confusion with MAM queries.   Use of a tombstone is appropriate where it is desired to leave a record of the message that was redacted.
        With this approach, the original message &lt;body&gt; is removed and replaced with a tombstone using the &lt;retracted&gt; element qualified by the 'urn:xmpp:mix:misc:0' namespace that shows the JID of user performing the retraction and the time of the retraction.
      </p>
      <figure class="code-example" id="example-6"><figcaption><strong>Example 6.</strong> Retracted message tombstone in a MAM result<a class="anchor-link" href="#example-6"><abbr title="Link to this point in the document">¶</abbr></a></figcaption><pre class="prettyprint">
&lt;message id='aeb213' to='juliet@capulet.example/UUID-e3r/9264'&gt;
  &lt;result xmlns='urn:xmpp:mam:2' queryid='f27' id='28482-98726-73623'&gt;
    &lt;forwarded xmlns='urn:xmpp:forward:0'&gt;
      &lt;delay xmlns='urn:xmpp:delay' stamp='2010-07-10T23:08:25Z'/&gt;
      &lt;message xmlns='jabber:client' from="hag66@shakespeare.example"
                 to="macbeth@shakespeare.example"&gt;
        &lt;retracted xmlns='urn:xmpp:mix:misc:0' by='hag66@shakespeare.example'
                 time='2010-07-10T23:08:25Z'/&gt;
      &lt;/message&gt;
    &lt;/forwarded&gt;
  &lt;/result&gt;
&lt;/message&gt;
</pre></figure>
    <h2 id="usecase-user-tell">5.
       Telling another User about a Channel<a class="anchor-link" href="#usecase-user-tell"><abbr title="Link to this point in the document">¶</abbr></a></h2>
      <p class="" style="">
        A convenient way to reference another channel is to use <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0372.html">References (XEP-0372)</a></span>  [<a href="#nt-idm46076348933760">5</a>] which enables the JID of a channel to be shared.  This might be used simply to inform the message recipient about the channel or as mechanism to invite the user to join the channel.   This is useful as an invitation mechanism to a channel that any user can join or where the invitee knows that the user is allowed to join (e.g., because the channel is for all users in an organization).
      </p>
    <h2 id="usecase-user-invite">6.
       Inviting another User to join a Channel that the user does not have Permission to Join<a class="anchor-link" href="#usecase-user-invite"><abbr title="Link to this point in the document">¶</abbr></a></h2>
      <p class="" style=""> Invitation by reference, as described in the previous section, is a convenient approach to invite a user to join a channel that the user has permission to join.   This section describes the approach used when the inviter has permission to grant rights for the invitee to become a channel participant.   This might be because the inviter is an administrator of the channel or the channel  or if the inviter is a channel participant and the channel allows invitation by participants (this channel capability is controlled by the channel configuration variable 'Participation Addition by Invitation from Participant').   Invitation by reference is used to avoid cluttering the allowed node with JIDs of users who are invited to join, but do not accept the invitation.
        When a channel participant (the inviter) invites  another user (the invitee) to join a channel, the following sequence of steps is followed:

      </p>
      <ol start="" class="" style="">
        <li class="" style="">The inviter checks using capability discovery that the invitee supports MIX.</li>
        <li class="" style="">The channel inviter sends to the channel requesting an invite for the invitee.</li>
        <li class="" style="">The channel sends an invitation to the inviter.</li>
        <li class="" style="">The inviter sends the invitation to the invitee.</li>
        <li class="" style="">The invitee MAY use the invitation to join the channel.</li>
        <li class="" style="">The invitee MAY send a response to the inviter, indicating if the invitation was accepted or declined.</li>
      </ol>
      <p class="" style="">
        The first step is for the inviter to request an invitation from the channel.   The invitation contains inviter, invitee and a token.  The channel will evaluate if the inviter has rights to issue the invitation.   This will be because the inviter is a channel administrator or if the inviter is a channel participant and the channel allows invitation by participants.  If the inviter has rights to make the invitation, the channel will return a token.  The token is a string that the channel can subsequently use to validate an invitation.   The format of the token is not specified in this standard.   The encoded token MAY reflect a validity time.  The invitation request is encoded as an &lt;invite/&gt; child element of an &lt;iq/&gt; element. The &lt;invite/&gt; element is qualified by the 'urn:xmpp:mix:misc:0' namespace.  &lt;invite/&gt; contains an &lt;invitation/&gt; child element, which contains &lt;inviter/&gt;, &lt;invitee/&gt;, &lt;channel/&gt; and &lt;token/&gt; child elements.
      </p>
      <figure class="code-example" id="example-7"><figcaption><strong>Example 7.</strong> Inviter Requests and Receives Invitation<a class="anchor-link" href="#example-7"><abbr title="Link to this point in the document">¶</abbr></a></figcaption><pre class="prettyprint">
&lt;iq from='hag66@shakespeare.example/UUID-h5z/0253'
    id='kl2fax27'
    to='coven@mix.shakespeare.example'
    type='get'&gt;
  &lt;invite xmlns='urn:xmpp:mix:misc:0'&gt;
      &lt;invitee&gt;cat@shakespeare.example&lt;/invitee&gt;
  &lt;/invite&gt;
&lt;/iq&gt;


&lt;iq from='coven@mix.shakespeare.example'
    id='kl2fax27'
    to='hag66@shakespeare.example/UUID-h5z/0253'
    type='result'&gt;
  &lt;invite xmlns='urn:xmpp:mix:misc:0'&gt;
     &lt;invitation&gt;
        &lt;inviter&gt;hag66@shakespeare.example&lt;/inviter&gt;
        &lt;invitee&gt;cat@shakespeare.example&lt;/invitee&gt;
        &lt;channel&gt;coven@mix.shakespeare.example&lt;/channel&gt;
        &lt;token&gt;ABCDEF&lt;/token&gt;
      &lt;/invitation&gt;
  &lt;invite/&gt;
&lt;/iq&gt;
</pre></figure>
      <p class="" style="">
        The inviter can now send the invitee a message containing the invitation within the &lt;message/&gt; element, as shown in the following example.
      </p>
      <figure class="code-example" id="example-8"><figcaption><strong>Example 8.</strong> Inviter sends Invitation to Invitee<a class="anchor-link" href="#example-8"><abbr title="Link to this point in the document">¶</abbr></a></figcaption><pre class="prettyprint">
&lt;message from='hag66@shakespeare.example/UUID-h5z/0253'
    id='f5pp2toz'
    to='cat@shakespeare.example'&gt;
    &lt;body&gt;Would you like to join the coven?&lt;/body&gt;
    &lt;invitation xmlns='urn:xmpp:mix:misc:0'&gt;
        &lt;inviter&gt;hag66@shakespeare.example&lt;/inviter&gt;
        &lt;invitee&gt;cat@shakespeare.example&lt;/invitee&gt;
        &lt;channel&gt;coven@mix.shakespeare.example&lt;/channel&gt;
        &lt;token&gt;ABCDEF&lt;/token&gt;
   &lt;/invitation&gt;
&lt;/message&gt;
</pre></figure>
  <p class="" style="">The invitation can now be used by the invitee to join a channel. The &lt;invitation/&gt; child element is simply added to the standard channel &lt;join/&gt; element, so that the channel can validate the invitation using the token. If the allowed node is present and the invitee is not matched against any item, the channel MUST add the invitee to the allowed node as part of the join.</p>
      <figure class="code-example" id="example-9"><figcaption><strong>Example 9.</strong> User Joins a Channel with an Invitation<a class="anchor-link" href="#example-9"><abbr title="Link to this point in the document">¶</abbr></a></figcaption><pre class="prettyprint">
&lt;iq type='set'
    from='cat@shakespeare.example'
    to='coven@mix.shakespeare.example'
    id='E6E10350-76CF-40C6-B91B-1EA08C332FC7'&gt;
  &lt;join xmlns='urn:xmpp:mix:misc:0'&gt;
    &lt;subscribe node='urn:xmpp:mix:nodes:messages'/&gt;
    &lt;invitation&gt;
        &lt;inviter&gt;hag66@shakespeare.example&lt;/inviter&gt;
        &lt;invitee&gt;cat@shakespeare.example&lt;/invitee&gt;
        &lt;channel&gt;coven@mix.shakespeare.example&lt;/channel&gt;
        &lt;token&gt;ABCDEF&lt;/token&gt;
   &lt;/invitation&gt;
  &lt;/join&gt;
&lt;/iq&gt;
</pre></figure>
      <p class="" style="">The invitee MAY send an acknowledgement back to the inviter, noting the status of the invitation.
        This is encoded as an &lt;invitation-ack/&gt; child element of &lt;message/&gt; element.  The &lt;invitation-ack/&gt; element is qualified by the 'urn:xmpp:mix:misc:0' namespace.   The &lt;invitation-ack/&gt; has an &lt;invitation/&gt; child element that encodes the invitation being acknowledged and a &lt;value/&gt; child element to encode the acknowledgement value.
        &lt;value/&gt; has the following values:</p>
      <ul class="" style="">
        <li class="" style="">'Joined': The invitee has joined the channel.</li>
        <li class="" style="">'Declined': The invitee is not taking up the invitation.</li>
        <li class="" style="">'Acknowledged': The invitation is acknowledged, without information on action taken or planned.</li>
      </ul>
      <figure class="code-example" id="example-10"><figcaption><strong>Example 10.</strong> Invitee sends Acknowledgement to Inviter<a class="anchor-link" href="#example-10"><abbr title="Link to this point in the document">¶</abbr></a></figcaption><pre class="prettyprint">
&lt;message from='cat@shakespeare.example/UUID-l1w/8813'
    id='b6p9llze'
    to='hag66@shakespeare.example/UUID-h5z/0253'&gt;
    &lt;body&gt;No Thanks - too busy chasing mice....&lt;body&gt;
    &lt;invitation-ack xmlns='urn:xmpp:mix:misc:0'&gt;
        &lt;value&gt;Declined&lt;/value&gt;
        &lt;invitation&gt;
           &lt;inviter&gt;hag66@shakespeare.example&lt;/inviter&gt;
           &lt;invitee&gt;cat@shakespeare.example&lt;/invitee&gt;
           &lt;channel&gt;coven@mix.shakespeare.example&lt;/channel&gt;
           &lt;token&gt;ABCDEF&lt;/token&gt;
         &lt;/invitation&gt;
     &lt;/invitation-ack&gt;
&lt;/iq&gt;
</pre></figure>
    <h2 id="usecase-admin-converting-chat">7.
       Converting a 1:1 Conversation to a Channel<a class="anchor-link" href="#usecase-admin-converting-chat"><abbr title="Link to this point in the document">¶</abbr></a></h2>
     <p class="" style="">
       A common use case for an ad hoc channel is where two users are engaged in a 1:1 chat and wish to broaden the discussion. Prior to bringing more users into a channel, using standard invitation process, there is a need to create and populate a channel.  The first step is for one of the two users to create an ad hoc channel, as described in the previous section.   The other user will then be invited, and can switch to the new channel.
     </p>
     <p class="" style="">
       It can also be useful to share some or all of the messages from the 1:1 discussion into the new channel.  The mechanism to do this is to forward messages to be shared to the channel using <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0297.html">Stanza Forwarding (XEP-0297)</a></span>  [<a href="#nt-idm46076348900336">6</a>].  A body SHOULD NOT be used in the outer message.
       Sharing history is optional.   If history is shared, it MUST be done by the user creating the channel before the other user is invited.   Any other use of forwarded messages MUST be treated as a channel participant forwarding a message to the channel and MUST NOT be treated as history sharing.
     </p>
     <figure class="code-example" id="example-11"><figcaption><strong>Example 11.</strong> Forwarding a message to create History<a class="anchor-link" href="#example-11"><abbr title="Link to this point in the document">¶</abbr></a></figcaption><pre class="prettyprint">
&lt;message from='hag66@shakespeare.example/UUID-a1j/7533'
         to='A1B2C345@mix.shakespeare.example'
         id='92vax143g'
         type='groupchat'&gt;
         &lt;forwarded xmlns='urn:xmpp:forward:0'&gt;
          &lt;delay xmlns='urn:xmpp:delay' stamp='2010-07-10T23:08:25Z'/&gt;
          &lt;message from='hag67@shakespeare.example/pda'
                   id='0202197'
                   to='hag66@shakespeare.example/UUID-a1j/7533'
                   type='chat'
                   xmlns='jabber:client'&gt;
              &lt;body&gt;Harpier cries: 'tis time, 'tis time.&lt;/body&gt;
          &lt;/message&gt;
        &lt;/forwarded&gt;
&lt;/message&gt;
</pre></figure>
     <p class="" style="">
       There are a number of security considerations with sharing 1:1 history in a channel.   There may be sensitive information in the 1:1 history, and the user sharing this history should ensure that none of this is sensitive, prior to sharing in this way.   The user creating the channel has potential to inject history messages which were not part of the history.   It is recommended that the second user joining the channel to validate that the messages match the history and to take appropriate action if they do not.
     </p>
   <h2 id="i18n">8.
       Internationalization Considerations<a class="anchor-link" href="#i18n"><abbr title="Link to this point in the document">¶</abbr></a></h2>
  <p class="" style="">See considerations in <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0369.html">Mediated Information eXchange (MIX) (XEP-0369)</a></span>  [<a href="#nt-idm46076349003280">1</a>].
  </p>

<h2 id="security">9.
       Security Considerations<a class="anchor-link" href="#security"><abbr title="Link to this point in the document">¶</abbr></a></h2>
  <p class="" style="">See considerations in <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0369.html">Mediated Information eXchange (MIX) (XEP-0369)</a></span>  [<a href="#nt-idm46076349003280">1</a>].</p>

  <p class="" style="">
    When converting a 1:1 conversation to a channel there is potential to expose sensitive information and to present invalid information.
  </p>

<h2 id="iana">10.
       IANA Considerations<a class="anchor-link" href="#iana"><abbr title="Link to this point in the document">¶</abbr></a></h2>
  <p class="" style="">None.</p>
<h2 id="registrar">11.
       XMPP Registrar Considerations<a class="anchor-link" href="#registrar"><abbr title="Link to this point in the document">¶</abbr></a></h2>
  <p class="" style="">The urn:xmpp:mix namespace needs to be registered.</p>
<h2 id="schema">12.
       XML Schema<a class="anchor-link" href="#schema"><abbr title="Link to this point in the document">¶</abbr></a></h2>
  <p class="" style="">To be supplied when MIX progresses to proposed standard.</p>
<h2 id="ack">13.
       Acknowledgements<a class="anchor-link" href="#ack"><abbr title="Link to this point in the document">¶</abbr></a></h2>
  <p class="" style="">See <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0369.html">Mediated Information eXchange (MIX) (XEP-0369)</a></span>  [<a href="#nt-idm46076349003280">1</a>] for a list of contributors to the MIX Family of specifications.</p>
<hr><a name="appendices"></a><h2>Appendices</h2><h3 id="appendix-docinfo">Appendix A: Document Information<a class="anchor-link" href="#appendix-docinfo"><abbr title="Link to this point in the document">¶</abbr></a></h3><dl class="compact"><dt>Series</dt><dd><a href="http://xmpp.org/extensions/">XEP</a></dd><dt>Number</dt><dd>0407</dd><dt>Publisher</dt><dd><a href="/xsf/">XMPP Standards Foundation</a></dd><dt>Status</dt><dd><a href="http://xmpp.org/extensions/xep-0001.html#states-Deferred">Deferred</a></dd><dt>Type</dt><dd><a href="http://xmpp.org/extensions/xep-0001.html#types-Standards%20Track">Standards Track</a></dd><dt>Version</dt><dd>0.1.2</dd><dt>Last Updated</dt><dd>2020-11-03</dd><dt>Approving Body</dt><dd><a href="http://xmpp.org/council/">XMPP Council</a></dd><dt>Dependencies</dt><dd>XMPP Core, XMPP IM, XEP-0004, XEP-0030, XEP-0054, XEP-0060, XEP-0084, XEP-0128, XEP-0198, XEP-0292, XEP-0297, XEP-0313, XEP-0369, XEP-0372</dd><dt>Supersedes</dt><dd>None</dd><dt>Superseded By</dt><dd>None</dd><dt>Short Name</dt><dd>MIX-MISC</dd><dt>Source Control</dt><dd><a class="standardsButton" href="https://github.com/xsf/xeps/blob/master/xep-0407.xml">HTML</a></dd></dl><p>
          This document in other formats:
          <a class="standardsButton" href="http://xmpp.org/extensions/xep-0407.xml">XML</a> 
          <a class="standardsButton" href="http://xmpp.org/extensions/xep-0407.pdf">PDF</a></p><h3 id="appendix-authorinfo">Appendix B: Author Information<a class="anchor-link" href="#appendix-authorinfo"><abbr title="Link to this point in the document">¶</abbr></a></h3><h5>Kevin Smith</h5><dl class="compact"><dt>Email</dt><dd><a href="mailto:kevin.smith@isode.com">kevin.smith@isode.com</a></dd><dt>JabberID</dt><dd><a href="xmpp:kevin.smith@isode.com">kevin.smith@isode.com</a></dd></dl><h5>Steve Kille</h5><dl class="compact"><dt>Email</dt><dd><a href="mailto:steve.kille@isode.com">steve.kille@isode.com</a></dd><dt>JabberID</dt><dd><a href="xmpp:steve.kille@isode.com">steve.kille@isode.com</a></dd></dl><h3 id="appendix-legal">Appendix C: Legal Notices<a class="anchor-link" href="#appendix-legal"><abbr title="Link to this point in the document">¶</abbr></a></h3><div class="indent"><h4>Copyright</h4><p>This XMPP Extension Protocol is copyright © 1999 – 2020 by the <a href="https://xmpp.org/">XMPP Standards Foundation</a> (XSF).</p><h4>Permissions</h4><p>Permission is hereby granted, free of charge, to any person obtaining a copy of this specification (the "Specification"), to make use of the Specification without restriction, including without limitation the rights to implement the Specification in a software program, deploy the Specification in a network service, and copy, modify, merge, publish, translate, distribute, sublicense, or sell copies of the Specification, and to permit persons to whom the Specification is furnished to do so, subject to the condition that the foregoing copyright notice and this permission notice shall be included in all copies or substantial portions of the Specification. Unless separate permission is granted, modified works that are redistributed shall not contain misleading information regarding the authors, title, number, or publisher of the Specification, and shall not claim endorsement of the modified works by the authors, any organization or project to which the authors belong, or the XMPP Standards Foundation.</p><h4>Disclaimer of Warranty</h4><p class="box info">## NOTE WELL: This Specification is provided on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or implied, including, without limitation, any warranties or conditions of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A PARTICULAR PURPOSE. ##</p><h4>Limitation of Liability</h4><p>In no event and under no legal theory, whether in tort (including negligence), contract, or otherwise, unless required by applicable law (such as deliberate and grossly negligent acts) or agreed to in writing, shall the XMPP Standards Foundation or any author of this Specification be liable for damages, including any direct, indirect, special, incidental, or consequential damages of any character arising from, out of, or in connection with the Specification or the implementation, deployment, or other use of the Specification (including but not limited to damages for loss of goodwill, work stoppage, computer failure or malfunction, or any and all other commercial damages or losses), even if the XMPP Standards Foundation or such author has been advised of the possibility of such damages.</p><h4>IPR Conformance</h4><p>This XMPP Extension Protocol has been contributed in full conformance with the XSF's Intellectual Property Rights Policy (a copy of which can be found at &lt;<a href="https://xmpp.org/about/xsf/ipr-policy">https://xmpp.org/about/xsf/ipr-policy</a>&gt; or obtained by writing to XMPP Standards Foundation, P.O. Box 787, Parker, CO 80134 USA).</p><h4>Visual Presentation</h4><p>The HTML representation (you are looking at) is maintained by the XSF. It is based on the <a href="http://yaml.de">YAML CSS Framework</a>, which is licensed under the terms of the <a href="https://creativecommons.org/licenses/by/2.0/">CC-BY-SA 2.0</a> license.</p></div><h3 id="appendix-xmpp">Appendix D: Relation to XMPP<a class="anchor-link" href="#appendix-xmpp"><abbr title="Link to this point in the document">¶</abbr></a></h3><p class="indent">The Extensible Messaging and Presence Protocol (XMPP) is defined in the XMPP Core (RFC 6120) and XMPP IM (RFC 6121) specifications contributed by the XMPP Standards Foundation to the Internet Standards Process, which is managed by the Internet Engineering Task Force in accordance with RFC 2026. Any protocol defined in this document has been developed outside the Internet Standards Process and is to be understood as an extension to XMPP rather than as an evolution, development, or modification of XMPP itself.</p><h3 id="appendix-discuss">Appendix E: Discussion Venue<a class="anchor-link" href="#appendix-discuss"><abbr title="Link to this point in the document">¶</abbr></a></h3><p class="indent">The primary venue for discussion of XMPP Extension Protocols is the &lt;<a href="http://mail.jabber.org/mailman/listinfo/standards">standards@xmpp.org</a>&gt; discussion list.</p><p class="indent">Discussion on other xmpp.org discussion lists might also be appropriate; see &lt;<a href="http://xmpp.org/about/discuss.shtml">http://xmpp.org/about/discuss.shtml</a>&gt; for a complete list.</p><p class="indent">Errata can be sent to &lt;<a href="mailto:editor@xmpp.org">editor@xmpp.org</a>&gt;.</p><h3 id="appendix-conformance">Appendix F: Requirements Conformance<a class="anchor-link" href="#appendix-conformance"><abbr title="Link to this point in the document">¶</abbr></a></h3><p class="indent">The following requirements keywords as used in this document are to be interpreted as described in <a href="http://www.ietf.org/rfc/rfc2119.txt">RFC 2119</a>: "MUST", "SHALL", "REQUIRED"; "MUST NOT", "SHALL NOT"; "SHOULD", "RECOMMENDED"; "SHOULD NOT", "NOT RECOMMENDED"; "MAY", "OPTIONAL".</p><h3 id="appendix-notes">Appendix G: Notes<a class="anchor-link" href="#appendix-notes"><abbr title="Link to this point in the document">¶</abbr></a></h3><div class="indent"><p><a name="nt-idm46076349003280">1</a>. XEP-0369: Mediated Information eXchange (MIX) &lt;<a href="https://xmpp.org/extensions/xep-0369.html">https://xmpp.org/extensions/xep-0369.html</a>&gt;.</p><p><a name="nt-idm46076348986816">2</a>. XEP-0084: User Avatar &lt;<a href="https://xmpp.org/extensions/xep-0084.html">https://xmpp.org/extensions/xep-0084.html</a>&gt;.</p><p><a name="nt-idm46076348962176">3</a>. RFC 7700: Preparation, Enforcement, and Comparison of Internationalized Strings Representing Nicknames&lt;<a href="http://tools.ietf.org/html/rfc7700">http://tools.ietf.org/html/rfc7700</a>&gt;.</p><p><a name="nt-idm46076348950480">4</a>. RFC 4122: A Universally Unique IDentifier (UUID) URN Namespace &lt;<a href="http://tools.ietf.org/html/rfc4122">http://tools.ietf.org/html/rfc4122</a>&gt;.</p><p><a name="nt-idm46076348933760">5</a>. XEP-0372: References &lt;<a href="https://xmpp.org/extensions/xep-0372.html">https://xmpp.org/extensions/xep-0372.html</a>&gt;.</p><p><a name="nt-idm46076348900336">6</a>. XEP-0297: Stanza Forwarding &lt;<a href="https://xmpp.org/extensions/xep-0297.html">https://xmpp.org/extensions/xep-0297.html</a>&gt;.</p></div><h3 id="appendix-revs">Appendix H: Revision History<a class="anchor-link" href="#appendix-revs"><abbr title="Link to this point in the document">¶</abbr></a></h3><p>Note: Older versions of this specification might be available at <a href="http://xmpp.org/extensions/attic/">http://xmpp.org/extensions/attic/</a></p><ol class="revision-history"><li id="revision-history-v0.1.2"><div class="revision-head">Version 0.1.2 (2020-11-03)<a class="anchor-link" href="#revision-history-v0.1.2"><abbr title="Link to this point in the document">¶</abbr></a></div><p class="" style="">Fix various typos</p><div class="revision-author">gh/@melvo</div></li><li id="revision-history-v0.1.1"><div class="revision-head">Version 0.1.1 (2018-11-03)<a class="anchor-link" href="#revision-history-v0.1.1"><abbr title="Link to this point in the document">¶</abbr></a></div>Fix a bunch of typos, batch-style.<div class="revision-author">pep</div></li><li id="revision-history-v0.1.0"><div class="revision-head">Version 0.1.0 (2018-05-14)<a class="anchor-link" href="#revision-history-v0.1.0"><abbr title="Link to this point in the document">¶</abbr></a></div><p class="" style="">
      Split out from MIX 0.10.0;
    </p><div class="revision-author">sek</div></li></ol><p>END</p></body></html>
