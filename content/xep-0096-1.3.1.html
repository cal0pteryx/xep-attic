<!DOCTYPE html>
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>XEP-0096: SI File Transfer</title><style type="text/css">
/* don't mind this hack */
nav#toc h2:before {
display: none;
content: "XEP-0096";
}
        </style><link rel="stylesheet" type="text/css" href="xmpp.css"><link href="prettify.css" type="text/css" rel="stylesheet"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico"><script type="text/javascript" src="prettify.js"></script><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=2.0"><meta name="DC.Title" content="SI File Transfer"><meta name="DC.Creator" content="Thomas Muldowney"><meta name="DC.Creator" content="Matthew Miller"><meta name="DC.Creator" content="Ryan Eatmon"><meta name="DC.Creator" content="Peter Saint-Andre"><meta name="DC.Description" content="This specification defines a profile of the XMPP stream initiation extension for transferring files between two entities. The protocol provides a modular framework that enables the exchange of information about the file to be transferred as well as the negotiation of parameters such as the transport to be used."><meta name="DC.Publisher" content="XMPP Standards Foundation"><meta name="DC.Contributor" content="XMPP Extensions Editor"><meta name="DC.Date" content="2022-03-22"><meta name="DC.Type" content="XMPP Extension Protocol"><meta name="DC.Format" content="XHTML"><meta name="DC.Identifier" content="XEP-0096"><meta name="DC.Language" content="en"><meta name="DC.Rights" content="This XMPP Extension Protocol is copyright © 1999 – 2020 by the XMPP Standards Foundation (XSF)."></head><body onload="prettyPrint()"><h1>XEP-0096: SI File Transfer</h1><div class="docmeta-wrap"><dl id="docmeta" class="compact"><dt>Abstract</dt><dd>This specification defines a profile of the XMPP stream initiation extension for transferring files between two entities. The protocol provides a modular framework that enables the exchange of information about the file to be transferred as well as the negotiation of parameters such as the transport to be used.</dd><dt>Authors</dt><dd><ul class="authors"><li>Thomas Muldowney</li><li>Matthew Miller</li><li>Ryan Eatmon</li><li>Peter Saint-Andre</li></ul></dd><dt>Copyright</dt><dd>© 1999 – 2021 XMPP Standards Foundation. <a href="#appendix-legal">SEE LEGAL NOTICES</a>.</dd><dt>Status</dt><dd><p>Deprecated</p><div id="status-notice" class="deprecated standards track">WARNING: This document has been <strong>Deprecated</strong> by the XMPP Standards Foundation. Implementation of the protocol described herein is not recommended. Developers desiring similar functionality are advised to implement the protocol that supersedes this one (<a href="xep-0234.html">XEP-0234</a>).</div></dd><dt>Superseded By</dt><dd><a href="xep-0234.html">XEP-0234</a></dd><dt>Type</dt><dd>Standards Track</dd><dt>Version</dt><dd>1.3.1 (2022-03-22)</dd></dl><div class="timeline-wrap"><div class="timeline-head">Document Lifecycle</div><ol class="timeline"><li>Experimental</li><li>Proposed</li><li>Stable</li><li>Final</li><li class="current">Deprecated</li><li>Obsolete</li></ol></div></div><nav id="toc"><a href="#top"><h2>Table of Contents</h2></a><ol class="toc"><li><a href="#intro">Introduction</a></li><li><a href="#reqs">Requirements</a></li><li><a href="#protocol">Protocol</a><ol><li><a href="#protocol-tech">Mandatory-to-Implement Technologies</a></li></ol></li><li><a href="#examples">Examples</a></li><li><a href="#iana">IANA Considerations</a></li><li><a href="#registrar">XMPP Registrar Considerations</a><ol><li><a href="#registrar-siprofiles">Stream Initiation Profiles</a></li><li><a href="#registrar-querytypes">URI Query Types</a><ol><li><a href="#registrar-querytypes-sendfile">sendfile</a></li><li><a href="#registrar-querytypes-recvfile">recvfile</a></li></ol></li></ol></li><li><a href="#schema">XML Schema</a></li></ol><h6><a href="#appendices">Appendices</a></h6><ol class="toc-appendices"><li><a href="#appendix-docinfo">Document Information</a></li><li><a href="#appendix-authorinfo">Author Information</a></li><li><a href="#appendix-legal">Legal Notices</a></li><li><a href="#appendix-xmpp">Relation to XMPP</a></li><li><a href="#appendix-discuss">Discussion Venue</a></li><li><a href="#appendix-conformance">Requirements Conformance</a></li><li><a href="#appendix-notes">Notes</a></li><li><a href="#appendix-revs">Revision History</a></li><li><a href="#appendix-biblatex">Bib(La)Tex Entry</a></li></ol></nav><h2 id="intro">1.
       Introduction<a class="anchor-link" href="#intro"><abbr title="Link to this point in the document">¶</abbr></a></h2>
  <p class="" style="">The traditional mechanism for transferring files in the Jabber community is the <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0066.html">Out-of-Band Data (XEP-0066)</a></span>  [<a href="#nt-idm111">1</a>] protocol. That protocol has several drawbacks:</p>
  <ol start="" class="" style="">
    <li class="" style="">It is not reliable.</li>
    <li class="" style="">It does not work when one of the parties is behind a firewall.</li>
    <li class="" style="">It provides limited metadata about files to be exchanged.</li>
  </ol>
  <p class="" style="">The current document defines a profile of <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0095.html">Stream Initiation (XEP-0095)</a></span>  [<a href="#nt-idm120">2</a>] that solves the problems with out-of-band data, thus providing a robust, reliable mechanism for file transfers over the Jabber network. Implementors are referred to XEP-0095 regarding the underlying concepts of stream initiation.</p>
<h2 id="reqs">2.
       Requirements<a class="anchor-link" href="#reqs"><abbr title="Link to this point in the document">¶</abbr></a></h2>
  <ul class="" style="">
    <li class="" style="">Enable seamless file transfer, including fall-back mechanisms as appropriate.</li>
    <li class="" style="">Ensure that the profile will work even when one or both parties are behind a firewall.</li>
    <li class="" style=""><p class="" style="">Define a full-featured set of metadata for file transfers, including the following:</p>
      <ul class="" style="">
        <li class="" style="">description</li>
        <li class="" style="">size</li>
        <li class="" style="">name</li>
        <li class="" style="">date</li>
        <li class="" style="">hash</li>
      </ul>
    </li>
    <li class="" style="">Optionally support ranged transfers.</li>
  </ul>
<h2 id="protocol">3.
       Protocol<a class="anchor-link" href="#protocol"><abbr title="Link to this point in the document">¶</abbr></a></h2>
  <p class="" style="">
    The file transfer profile is in the
    "http://jabber.org/protocol/si/profile/file-transfer" namespace.
    The profile is fairly simple: it consists of the root element
    with the possibility of one child describing the optional ranged transfers.
  </p>
  <p class="" style="">
    The root element is &lt;file&gt; and has four attributes.  The attributes
    are used only during the offer stage of stream initiation:</p>
    <ul class="" style="">
      <li class="" style=""><em>size</em> - The size, in bytes, of the data to be sent.</li>
      <li class="" style=""><em>name</em> - The name of the file that the Sender wishes to send.</li>
      <li class="" style=""><em>date</em> - The last modification time of the file.  This is
        specified using the DateTime profile as described in <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0082.html">XMPP Date and Time Profiles (XEP-0082)</a></span>  [<a href="#nt-idm147">3</a>].</li>
      <li class="" style=""><em>hash</em> - The MD5 sum of the file contents.</li>
    </ul>
    <p class="" style="">The <em>size</em> and <em>name</em> attributes MUST be present in the
    profile. The other attributes MAY be present.
  </p>
  <p class="" style="">
    There are two possible child elements of the root: &lt;desc&gt; and
    &lt;range&gt;. Both are OPTIONAL.
  </p>
  <p class="" style="">
    &lt;desc&gt; is used to provide a sender-generated description of the file so
    the receiver can better understand what is being sent.  It MUST NOT be sent in
    the result.
  </p>
  <p class="" style="">
    When &lt;range&gt; is sent in the offer, it should have no
    attributes.  This signifies that the
    sender can do ranged transfers.  When a Stream Initiation result is sent
    with the &lt;range&gt; element, it uses these attributes:</p>
    <ul class="" style="">
      <li class="" style="">
        <em>offset</em> - Specifies the position, in bytes, to start
        transferring the file data from.  This defaults to zero (0) if not
        specified.
      </li>
      <li class="" style="">
        <em>length</em> - Specifies the number of bytes to retrieve starting
        at offset.  This defaults to the length of the file from offset to the
        end.
      </li>
    </ul>
    <p class="" style="">Both attributes are OPTIONAL on the &lt;range&gt; element.  Sending no
    attributes is synonymous with  not sending the &lt;range&gt;
    element.  When no &lt;range&gt; element is sent in the
    Stream Initiation result, the Sender MUST send the complete file starting at
    offset 0.  More generally, data is sent over the stream byte for byte starting
    at the offset position for the length specified.
  </p>
  <div class="indent"><h3 id="protocol-tech">3.1 Mandatory-to-Implement Technologies<a class="anchor-link" href="#protocol-tech"><abbr title="Link to this point in the document">¶</abbr></a></h3>
    <p class="" style="">In order to enable seamless file transfer and appropriate fall-back mechanisms, implementations of this profile MUST support both <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0065.html">SOCKS5 Bytestreams (XEP-0065)</a></span>  [<a href="#nt-idm167">4</a>] and <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0047.html">In-Band Bytestreams (XEP-0047)</a></span>  [<a href="#nt-idm171">5</a>], to be preferred in that order. The associated namespaces are to be included as option values for the "stream-method" variable as shown in the examples below.</p>
    <p class="" style="">Additionally, implementations MAY support other mechanisms.</p>
  </div>
<h2 id="examples">4.
       Examples<a class="anchor-link" href="#examples"><abbr title="Link to this point in the document">¶</abbr></a></h2>
  <figure class="code-example" id="example-1"><figcaption><strong>Example 1.</strong> Simple Profile Usage in Stream Initiation Offer<a class="anchor-link" href="#example-1"><abbr title="Link to this point in the document">¶</abbr></a></figcaption><pre class="prettyprint">
    
&lt;iq type='set' id='offer1' to='receiver@jabber.org/resource'&gt;
  &lt;si xmlns='http://jabber.org/protocol/si'
      id='a0'
      mime-type='text/plain'
      profile='http://jabber.org/protocol/si/profile/file-transfer'&gt;
    &lt;file xmlns='http://jabber.org/protocol/si/profile/file-transfer'
          name='test.txt'
          size='1022'/&gt;
    &lt;feature xmlns='http://jabber.org/protocol/feature-neg'&gt;
      &lt;x xmlns='jabber:x:data' type='form'&gt;
        &lt;field var='stream-method' type='list-single'&gt;
          &lt;option&gt;&lt;value&gt;http://jabber.org/protocol/bytestreams&lt;/value&gt;&lt;/option&gt;
          &lt;option&gt;&lt;value&gt;http://jabber.org/protocol/ibb&lt;/value&gt;&lt;/option&gt;
        &lt;/field&gt;
      &lt;/x&gt;
    &lt;/feature&gt;
  &lt;/si&gt;
&lt;/iq&gt;

  </pre></figure>
  <figure class="code-example" id="example-2"><figcaption><strong>Example 2.</strong> Simple Profile Usage in Stream Initiation Result<a class="anchor-link" href="#example-2"><abbr title="Link to this point in the document">¶</abbr></a></figcaption><pre class="prettyprint">
    
&lt;iq type='result' to='sender@jabber.org/resource' id='offer1'&gt;
  &lt;si xmlns='http://jabber.org/protocol/si'&gt;
    &lt;feature xmlns='http://jabber.org/protocol/feature-neg'&gt;
      &lt;x xmlns='jabber:x:data' type='submit'&gt;
        &lt;field var='stream-method'&gt;
          &lt;value&gt;http://jabber.org/protocol/bytestreams&lt;/value&gt;
        &lt;/field&gt;
      &lt;/x&gt;
    &lt;/feature&gt;
  &lt;/si&gt;
&lt;/iq&gt;

  </pre></figure>
  <figure class="code-example" id="example-3"><figcaption><strong>Example 3.</strong> Complete Profile Usage in Stream Initiation Offer<a class="anchor-link" href="#example-3"><abbr title="Link to this point in the document">¶</abbr></a></figcaption><pre class="prettyprint">
    
&lt;iq type='set' id='offer1' to='receiver@jabber.org/resource'&gt;
  &lt;si xmlns='http://jabber.org/protocol/si'
      id='a0'
      mime-type='text/plain'
      profile='http://jabber.org/protocol/si/profile/file-transfer'&gt;
    &lt;file xmlns='http://jabber.org/protocol/si/profile/file-transfer'
          name='test.txt'
          size='1022'
          hash='552da749930852c69ae5d2141d3766b1'
          date='1969-07-21T02:56:15Z'&gt;
      &lt;desc&gt;This is a test. If this were a real file...&lt;/desc&gt;
    &lt;/file&gt;
    &lt;feature xmlns='http://jabber.org/protocol/feature-neg'&gt;
      &lt;x xmlns='jabber:x:data' type='form'&gt;
        &lt;field var='stream-method' type='list-single'&gt;
          &lt;option&gt;&lt;value&gt;http://jabber.org/protocol/bytestreams&lt;/value&gt;&lt;/option&gt;
          &lt;option&gt;&lt;value&gt;http://jabber.org/protocol/ibb&lt;/value&gt;&lt;/option&gt;
        &lt;/field&gt;
      &lt;/x&gt;
    &lt;/feature&gt;
  &lt;/si&gt;
&lt;/iq&gt;

  </pre></figure>
  <figure class="code-example" id="example-4"><figcaption><strong>Example 4.</strong> Complete Profile Usage in Stream Initiation Result<a class="anchor-link" href="#example-4"><abbr title="Link to this point in the document">¶</abbr></a></figcaption><pre class="prettyprint">
    
&lt;iq type='result' to='sender@jabber.org/resource' id='offer1'&gt;
  &lt;si xmlns='http://jabber.org/protocol/si'&gt;
    &lt;file xmlns='http://jabber.org/protocol/si/profile/file-transfer'/&gt;
    &lt;feature xmlns='http://jabber.org/protocol/feature-neg'&gt;
      &lt;x xmlns='jabber:x:data' type='submit'&gt;
        &lt;field var='stream-method'&gt;
          &lt;value&gt;http://jabber.org/protocol/bytestreams&lt;/value&gt;
        &lt;/field&gt;
      &lt;/x&gt;
    &lt;/feature&gt;
  &lt;/si&gt;
&lt;/iq&gt;

  </pre></figure>
  <p class="" style="">This range should retrieve 256 bytes from the beginning of the file:</p>
  <figure class="code-example" id="example-5"><figcaption><strong>Example 5.</strong> <a class="anchor-link" href="#example-5"><abbr title="Link to this point in the document">¶</abbr></a></figcaption><pre class="prettyprint">
    
&lt;range length='256'/&gt;

  </pre></figure>
  <p class="" style="">This range should retrieve 256 bytes starting from the 128th byte in the file:</p>
  <figure class="code-example" id="example-6"><figcaption><strong>Example 6.</strong> <a class="anchor-link" href="#example-6"><abbr title="Link to this point in the document">¶</abbr></a></figcaption><pre class="prettyprint">
    
&lt;range offset='128' length='256'/&gt;

  </pre></figure>
  <p class="" style="">This range should retrieve the remainder of the file starting at the 128th byte in the file:</p>
  <figure class="code-example" id="example-7"><figcaption><strong>Example 7.</strong> <a class="anchor-link" href="#example-7"><abbr title="Link to this point in the document">¶</abbr></a></figcaption><pre class="prettyprint">
    
&lt;range offset='128'/&gt;

  </pre></figure>
  <p class="" style="">This range is the same as having not sent the range request and the entire file is sent:</p>
  <figure class="code-example" id="example-8"><figcaption><strong>Example 8.</strong> <a class="anchor-link" href="#example-8"><abbr title="Link to this point in the document">¶</abbr></a></figcaption><pre class="prettyprint">
    
&lt;range/&gt;

  </pre></figure>
<h2 id="iana">5.
       IANA Considerations<a class="anchor-link" href="#iana"><abbr title="Link to this point in the document">¶</abbr></a></h2>
  <p class="" style="">No interaction with the <span class="ref" style=""><a href="http://www.iana.org/">Internet Assigned Numbers Authority (IANA)</a></span>  [<a href="#nt-idm191">6</a>] is required as a result of this document.</p>
<h2 id="registrar">6.
       XMPP Registrar Considerations<a class="anchor-link" href="#registrar"><abbr title="Link to this point in the document">¶</abbr></a></h2>
  <div class="indent"><h3 id="registrar-siprofiles">6.1 Stream Initiation Profiles<a class="anchor-link" href="#registrar-siprofiles"><abbr title="Link to this point in the document">¶</abbr></a></h3>
  <p class="" style="">The profile described in this document is included in the stream initiation profiles registry maintained by the <span class="ref" style=""><a href="https://xmpp.org/registrar/">XMPP Registrar</a></span>  [<a href="#nt-idm198">7</a>] (see &lt;<a href="https://xmpp.org/registrar/si-profiles.html">https://xmpp.org/registrar/si-profiles.html</a>&gt;). The registry submission is as follows:</p>
    <figure class="code"><figcaption></figcaption><pre class="prettyprint">
&lt;profile&gt;
  &lt;name&gt;http://jabber.org/protocol/si/profile/file-transfer&lt;/name&gt;
  &lt;doc&gt;XEP-0096&lt;/doc&gt;
  &lt;desc&gt;A profile for file transfer between any two entities.&lt;/desc&gt;
&lt;/profile&gt;
</pre></figure>
  </div>
  <div class="indent"><h3 id="registrar-querytypes">6.2 URI Query Types<a class="anchor-link" href="#registrar-querytypes"><abbr title="Link to this point in the document">¶</abbr></a></h3>
    <p class="" style="">As authorized by <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0147.html">XMPP URI Query Components (XEP-0147)</a></span>  [<a href="#nt-idm206">8</a>], the XMPP Registrar maintains a registry of queries and key-value pairs for use in XMPP URIs (see &lt;<a href="https://xmpp.org/registrar/querytypes.html">https://xmpp.org/registrar/querytypes.html</a>&gt;).</p>
    <p class="" style="">As described below, the registered querytypes for file transfer actions are "sendfile" and "recvfile". Note well that "sendfile" means a second entity will send a file to the XMPP entity that controls the IRI/URI and that "recvfile" means a second entity will receive a file from the XMPP entity that controls the IRI/URI.</p>
    <div class="indent"><h4 id="registrar-querytypes-sendfile">6.2.1 sendfile<a class="anchor-link" href="#registrar-querytypes-sendfile"><abbr title="Link to this point in the document">¶</abbr></a></h4>
      <p class="" style="">To enable a second entity to send a file, the IRI/URI is of the following form:</p>
      <figure class="code-example" id="example-9"><figcaption><strong>Example 9.</strong> Sending a File: IRI/URI<a class="anchor-link" href="#example-9"><abbr title="Link to this point in the document">¶</abbr></a></figcaption><pre class="prettyprint">
xmpp:romeo@montague.net/orchard?sendfile
</pre></figure>
      <p class="" style="">The application SHOULD then present an interface enabling the user to provide information about the file to be sent (e.g., by "browsing" the file system of the user's computer in order to choose a file). As a result, the application SHOULD then send a <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0137.html">Publishing Stream Initiation Requests (XEP-0137)</a></span>  [<a href="#nt-idm216">9</a>] message to the XMPP address encapsulated in the IRI/URI:</p>
      <figure class="code-example" id="example-10"><figcaption><strong>Example 10.</strong> Sending a File: Resulting Stanza<a class="anchor-link" href="#example-10"><abbr title="Link to this point in the document">¶</abbr></a></figcaption><pre class="prettyprint">
&lt;message from='juliet@capulet.com/balcony' to='romeo@montague.net'&gt;
  &lt;sipub xmlns='http://jabber.org/protocol/sipub'
      id='publish-0123'
      mime-type='text/plain'
      profile='http://jabber.org/protocol/si/profile/file-transfer'&gt;
    &lt;file xmlns='http://jabber.org/protocol/si/profile/file-transfer'
          name='missive.txt'
          size='1024'
          date='2005-11-29T11:21Z'/&gt;
  &lt;/sipub&gt;
&lt;/message&gt;
</pre></figure>
      <p class="" style="">The following submission registers the "sendfile" querytype.</p>
      <figure class="code"><figcaption></figcaption><pre class="prettyprint">
&lt;querytype&gt;
  &lt;name&gt;sendfile&lt;/name&gt;
  &lt;proto&gt;http://jabber.org/protocol/si/profile/file-transfer&lt;/proto&gt;
  &lt;desc&gt;enables initiation of an inbound file transfer to XMPP entity&lt;/desc&gt;
  &lt;doc&gt;XEP-0096&lt;/doc&gt;
&lt;/querytype&gt;
</pre></figure>
    </div>
    <div class="indent"><h4 id="registrar-querytypes-recvfile">6.2.2 recvfile<a class="anchor-link" href="#registrar-querytypes-recvfile"><abbr title="Link to this point in the document">¶</abbr></a></h4>
      <p class="" style="">To enable a second entity to receive a file, the IRI/URI is of the following form:</p>
      <figure class="code-example" id="example-11"><figcaption><strong>Example 11.</strong> Receiving a File: IRI/URI<a class="anchor-link" href="#example-11"><abbr title="Link to this point in the document">¶</abbr></a></figcaption><pre class="prettyprint">
xmpp:romeo@montague.net/orchard?recvfile;sid=pub234;mime-type=text%2Fplain;name=reply.txt;size=2048
</pre></figure>
      <p class="" style="">That IRI/URI is equivalent to the following XML stanza:</p>
      <figure class="code-example" id="example-12"><figcaption><strong>Example 12.</strong> Receiving a File: Equivalent Stanza<a class="anchor-link" href="#example-12"><abbr title="Link to this point in the document">¶</abbr></a></figcaption><pre class="prettyprint">
&lt;message from='romeo@montague.net' to='juliet@capulet.com/balcony'&gt;
  &lt;sipub xmlns='http://jabber.org/protocol/sipub'
      id='pub234'
      mime-type='text/plain'
      profile='http://jabber.org/protocol/si/profile/file-transfer'&gt;
    &lt;file xmlns='http://jabber.org/protocol/si/profile/file-transfer'
          name='reply.txt'
          size='2048'/&gt;
  &lt;/sipub&gt;
&lt;/message&gt;
</pre></figure>
      <p class="" style="">In accordance with <span class="ref">XEP-0137</span>, the application SHOULD then initiate a file transfer exchange with by sending a stanza of the following form:</p>
      <figure class="code-example" id="example-13"><figcaption><strong>Example 13.</strong> Receiving a File: Resulting Stanza<a class="anchor-link" href="#example-13"><abbr title="Link to this point in the document">¶</abbr></a></figcaption><pre class="prettyprint">
&lt;iq from='juliet@capulet.com/balcony' to='romeo@montague.net/orchard'&gt;
  &lt;start xmlns='http://jabber.org/protocol/sipub' id='pub234'/&gt;
&lt;/iq&gt;
</pre></figure>
      <p class="" style="">Note well that the request to begin the stream is sent to the full JID (user@host/resource) of the XMPP entity identified by the XMPP IRI/URI. Therefore, the IRI/URI SHOULD include a full JID. If it does not, the receiver MUST discover a full JID via presence or service discovery. If the receiver cannot discover a full JID for the sender (e.g., in the last resort through sending a presence subscription request to the sender and receiving presence from the sender's resources), then it SHOULD abort the file transfer exchange.</p>
      <p class="" style="">The following submission registers the "recvfile" querytype.</p>
      <figure class="code"><figcaption></figcaption><pre class="prettyprint">
&lt;querytype&gt;
  &lt;name&gt;recvfile&lt;/name&gt;
  &lt;proto&gt;http://jabber.org/protocol/si/profile/file-transfer&lt;/proto&gt;
  &lt;desc&gt;enables initiation of an outbound file transfer from XMPP entity&lt;/desc&gt;
  &lt;doc&gt;XEP-0096&lt;/doc&gt;
  &lt;keys&gt;
    &lt;key&gt;
      &lt;name&gt;algo&lt;/name&gt;
      &lt;desc&gt;the hash algorithm used to generate the checksum&lt;/desc&gt;
    &lt;/key&gt;
    &lt;key&gt;
      &lt;name&gt;hash&lt;/name&gt;
      &lt;desc&gt;a checksum of the file contents&lt;/desc&gt;
    &lt;/key&gt;
    &lt;key&gt;
      &lt;name&gt;mime-type&lt;/name&gt;
      &lt;desc&gt;the MIME type of the file being offered&lt;/desc&gt;
    &lt;/key&gt;
    &lt;key&gt;
      &lt;name&gt;name&lt;/name&gt;
      &lt;desc&gt;the name of the file being offered&lt;/desc&gt;
    &lt;/key&gt;
    &lt;key&gt;
      &lt;name&gt;sid&lt;/name&gt;
      &lt;desc&gt;the session ID associated with the file being offered&lt;/desc&gt;
    &lt;/key&gt;
    &lt;key&gt;
      &lt;name&gt;size&lt;/name&gt;
      &lt;desc&gt;the size in bytes of the file being offered&lt;/desc&gt;
    &lt;/key&gt;
  &lt;/keys&gt;
&lt;/querytype&gt;
</pre></figure>
    </div>
  </div>
<h2 id="schema">7.
       XML Schema<a class="anchor-link" href="#schema"><abbr title="Link to this point in the document">¶</abbr></a></h2>
  <figure class="code"><figcaption></figcaption><pre class="prettyprint">
&lt;?xml version='1.0' encoding='UTF-8'?&gt;

&lt;xs:schema
    xmlns:xs='http://www.w3.org/2001/XMLSchema'
    targetNamespace='http://jabber.org/protocol/si/profile/file-transfer'
    xmlns='http://jabber.org/protocol/si/profile/file-transfer'
    elementFormDefault='qualified'&gt;

  &lt;xs:annotation&gt;
    &lt;xs:documentation&gt;
      The protocol documented by this schema is defined in
      XEP-0096: http://www.xmpp.org/extensions/xep-0096.html
    &lt;/xs:documentation&gt;
  &lt;/xs:annotation&gt;

  &lt;xs:element name='file'&gt;
    &lt;xs:complexType&gt;
      &lt;xs:sequence minOccurs='0'&gt;
        &lt;xs:element name='desc' type='xs:string'/&gt;
        &lt;xs:element ref='range'/&gt;
      &lt;/xs:sequence&gt;
      &lt;xs:attribute name='date' type='xs:string' use='optional'/&gt;
      &lt;xs:attribute name='hash' type='xs:string' use='optional'/&gt;
      &lt;xs:attribute name='name' type='xs:string' use='required'/&gt;
      &lt;xs:attribute name='size' type='xs:integer' use='required'/&gt;
    &lt;/xs:complexType&gt;
  &lt;/xs:element&gt;

  &lt;xs:element name='range'&gt;
    &lt;xs:complexType&gt;
      &lt;xs:simpleContent&gt;
        &lt;xs:extension base='empty'&gt;
          &lt;xs:attribute name='length' type='xs:integer' use='optional'/&gt;
          &lt;xs:attribute name='offset' type='xs:integer' use='optional'/&gt;
        &lt;/xs:extension&gt;
      &lt;/xs:simpleContent&gt;
    &lt;/xs:complexType&gt;
  &lt;/xs:element&gt;

  &lt;xs:simpleType name='empty'&gt;
    &lt;xs:restriction base='xs:string'&gt;
      &lt;xs:enumeration value=''/&gt;
    &lt;/xs:restriction&gt;
  &lt;/xs:simpleType&gt;

&lt;/xs:schema&gt;
</pre></figure>
<hr><a name="appendices"></a><h2>Appendices</h2><h3 id="appendix-docinfo">Appendix A: Document Information<a class="anchor-link" href="#appendix-docinfo"><abbr title="Link to this point in the document">¶</abbr></a></h3><dl class="compact"><dt>Series</dt><dd><a href="https://xmpp.org/extensions/">XEP</a></dd><dt>Number</dt><dd>0096</dd><dt>Publisher</dt><dd><a href="/xsf/">XMPP Standards Foundation</a></dd><dt>Status</dt><dd><a href="https://xmpp.org/extensions/xep-0001.html#states-Deprecated">Deprecated</a></dd><dt>Type</dt><dd><a href="https://xmpp.org/extensions/xep-0001.html#types-Standards%20Track">Standards Track</a></dd><dt>Version</dt><dd>1.3.1</dd><dt>Last Updated</dt><dd>2022-03-22</dd><dt>Approving Body</dt><dd><a href="https://xmpp.org/council/">XMPP Council</a></dd><dt>Dependencies</dt><dd>XMPP Core, <a href="xep-0095.html">XEP-0095</a></dd><dt>Supersedes</dt><dd>None</dd><dt>Superseded By</dt><dd><a href="xep-0234.html">XEP-0234</a></dd><dt>Short Name</dt><dd>si-filetransfer</dd><dt>Schema</dt><dd>
        &lt;<a href="http://www.xmpp.org/schemas/file-transfer.xsd">http://www.xmpp.org/schemas/file-transfer.xsd</a>&gt;<br></dd><dt>Source Control</dt><dd><a class="standardsButton" href="https://github.com/xsf/xeps/blob/master/xep-0096.xml">HTML</a></dd></dl><p>
          This document in other formats:
          <a class="standardsButton" href="https://xmpp.org/extensions/xep-0096.xml">XML</a> 
          <a class="standardsButton" href="https://xmpp.org/extensions/xep-0096.pdf">PDF</a></p><h3 id="appendix-authorinfo">Appendix B: Author Information<a class="anchor-link" href="#appendix-authorinfo"><abbr title="Link to this point in the document">¶</abbr></a></h3><h5>Thomas Muldowney</h5><dl class="compact"><dt>Email</dt><dd><a href="mailto:temas@jabber.org">temas@jabber.org</a></dd><dt>JabberID</dt><dd><a href="xmpp:temas@jabber.org">temas@jabber.org</a></dd></dl><h5>Matthew Miller</h5><dl class="compact"><dt>Email</dt><dd><a href="mailto:linuxwolf@outer-planes.net">linuxwolf@outer-planes.net</a></dd><dt>JabberID</dt><dd><a href="xmpp:linuxwolf@outer-planes.net">linuxwolf@outer-planes.net</a></dd></dl><h5>Ryan Eatmon</h5><dl class="compact"><dt>Email</dt><dd><a href="mailto:reatmon@jabber.org">reatmon@jabber.org</a></dd><dt>JabberID</dt><dd><a href="xmpp:reatmon@jabber.org">reatmon@jabber.org</a></dd></dl><h5>Peter Saint-Andre</h5><dl class="compact"><dt>Email</dt><dd><a href="mailto:xsf@stpeter.im">xsf@stpeter.im</a></dd><dt>JabberID</dt><dd><a href="xmpp:peter@jabber.org">peter@jabber.org</a></dd><dt>URI</dt><dd><a href="http://stpeter.im/">http://stpeter.im/</a></dd></dl><h3 id="appendix-legal">Appendix C: Legal Notices<a class="anchor-link" href="#appendix-legal"><abbr title="Link to this point in the document">¶</abbr></a></h3><div class="indent"><h4>Copyright</h4><p>This XMPP Extension Protocol is copyright © 1999 – 2020 by the <a href="https://xmpp.org/">XMPP Standards Foundation</a> (XSF).</p><h4>Permissions</h4><p>Permission is hereby granted, free of charge, to any person obtaining a copy of this specification (the "Specification"), to make use of the Specification without restriction, including without limitation the rights to implement the Specification in a software program, deploy the Specification in a network service, and copy, modify, merge, publish, translate, distribute, sublicense, or sell copies of the Specification, and to permit persons to whom the Specification is furnished to do so, subject to the condition that the foregoing copyright notice and this permission notice shall be included in all copies or substantial portions of the Specification. Unless separate permission is granted, modified works that are redistributed shall not contain misleading information regarding the authors, title, number, or publisher of the Specification, and shall not claim endorsement of the modified works by the authors, any organization or project to which the authors belong, or the XMPP Standards Foundation.</p><h4>Disclaimer of Warranty</h4><p class="box info">## NOTE WELL: This Specification is provided on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or implied, including, without limitation, any warranties or conditions of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A PARTICULAR PURPOSE. ##</p><h4>Limitation of Liability</h4><p>In no event and under no legal theory, whether in tort (including negligence), contract, or otherwise, unless required by applicable law (such as deliberate and grossly negligent acts) or agreed to in writing, shall the XMPP Standards Foundation or any author of this Specification be liable for damages, including any direct, indirect, special, incidental, or consequential damages of any character arising from, out of, or in connection with the Specification or the implementation, deployment, or other use of the Specification (including but not limited to damages for loss of goodwill, work stoppage, computer failure or malfunction, or any and all other commercial damages or losses), even if the XMPP Standards Foundation or such author has been advised of the possibility of such damages.</p><h4>IPR Conformance</h4><p>This XMPP Extension Protocol has been contributed in full conformance with the XSF's Intellectual Property Rights Policy (a copy of which can be found at &lt;<a href="https://xmpp.org/about/xsf/ipr-policy">https://xmpp.org/about/xsf/ipr-policy</a>&gt; or obtained by writing to XMPP Standards Foundation, P.O. Box 787, Parker, CO 80134 USA).</p><h4>Visual Presentation</h4><p>The HTML representation (you are looking at) is maintained by the XSF. It is based on the <a href="http://yaml.de">YAML CSS Framework</a>, which is licensed under the terms of the <a href="https://creativecommons.org/licenses/by/2.0/">CC-BY-SA 2.0</a> license.</p></div><h3 id="appendix-xmpp">Appendix D: Relation to XMPP<a class="anchor-link" href="#appendix-xmpp"><abbr title="Link to this point in the document">¶</abbr></a></h3><p class="indent">The Extensible Messaging and Presence Protocol (XMPP) is defined in the XMPP Core (RFC 6120) and XMPP IM (RFC 6121) specifications contributed by the XMPP Standards Foundation to the Internet Standards Process, which is managed by the Internet Engineering Task Force in accordance with RFC 2026. Any protocol defined in this document has been developed outside the Internet Standards Process and is to be understood as an extension to XMPP rather than as an evolution, development, or modification of XMPP itself.</p><h3 id="appendix-discuss">Appendix E: Discussion Venue<a class="anchor-link" href="#appendix-discuss"><abbr title="Link to this point in the document">¶</abbr></a></h3><p class="indent">The primary venue for discussion of XMPP Extension Protocols is the &lt;<a href="https://mail.jabber.org/mailman/listinfo/standards">standards@xmpp.org</a>&gt; discussion list.</p><p class="indent">Discussion on other xmpp.org discussion lists might also be appropriate; see &lt;<a href="https://xmpp.org/about/discuss.shtml">https://xmpp.org/about/discuss.shtml</a>&gt; for a complete list.</p><p class="indent">Errata can be sent to &lt;<a href="mailto:editor@xmpp.org">editor@xmpp.org</a>&gt;.</p><h3 id="appendix-conformance">Appendix F: Requirements Conformance<a class="anchor-link" href="#appendix-conformance"><abbr title="Link to this point in the document">¶</abbr></a></h3><p class="indent">The following requirements keywords as used in this document are to be interpreted as described in <a href="https://www.ietf.org/rfc/rfc2119.txt">RFC 2119</a>: "MUST", "SHALL", "REQUIRED"; "MUST NOT", "SHALL NOT"; "SHOULD", "RECOMMENDED"; "SHOULD NOT", "NOT RECOMMENDED"; "MAY", "OPTIONAL".</p><h3 id="appendix-notes">Appendix G: Notes<a class="anchor-link" href="#appendix-notes"><abbr title="Link to this point in the document">¶</abbr></a></h3><div class="indent"><p><a name="nt-idm111">1</a>. XEP-0066: Out of Band Data &lt;<a href="https://xmpp.org/extensions/xep-0066.html">https://xmpp.org/extensions/xep-0066.html</a>&gt;.</p><p><a name="nt-idm120">2</a>. XEP-0095: Stream Initiation &lt;<a href="https://xmpp.org/extensions/xep-0095.html">https://xmpp.org/extensions/xep-0095.html</a>&gt;.</p><p><a name="nt-idm147">3</a>. XEP-0082: XMPP Date and Time Profiles &lt;<a href="https://xmpp.org/extensions/xep-0082.html">https://xmpp.org/extensions/xep-0082.html</a>&gt;.</p><p><a name="nt-idm167">4</a>. XEP-0065: SOCKS5 Bytestreams &lt;<a href="https://xmpp.org/extensions/xep-0065.html">https://xmpp.org/extensions/xep-0065.html</a>&gt;.</p><p><a name="nt-idm171">5</a>. XEP-0047: In-Band Bytestreams &lt;<a href="https://xmpp.org/extensions/xep-0047.html">https://xmpp.org/extensions/xep-0047.html</a>&gt;.</p><p><a name="nt-idm191">6</a>. The Internet Assigned Numbers Authority (IANA) is the central coordinator for the assignment of unique parameter values for Internet protocols, such as port numbers and URI schemes. For further information, see &lt;<a href="http://www.iana.org/">http://www.iana.org/</a>&gt;.</p><p><a name="nt-idm198">7</a>. The XMPP Registrar maintains a list of reserved protocol namespaces as well as registries of parameters used in the context of XMPP extension protocols approved by the XMPP Standards Foundation. For further information, see &lt;<a href="https://xmpp.org/registrar/">https://xmpp.org/registrar/</a>&gt;.</p><p><a name="nt-idm206">8</a>. XEP-0147: XMPP URI Query Components &lt;<a href="https://xmpp.org/extensions/xep-0147.html">https://xmpp.org/extensions/xep-0147.html</a>&gt;.</p><p><a name="nt-idm216">9</a>. XEP-0137: Publishing Stream Initiation Requests &lt;<a href="https://xmpp.org/extensions/xep-0137.html">https://xmpp.org/extensions/xep-0137.html</a>&gt;.</p></div><h3 id="appendix-revs">Appendix H: Revision History<a class="anchor-link" href="#appendix-revs"><abbr title="Link to this point in the document">¶</abbr></a></h3><p>Note: Older versions of this specification might be available at <a href="https://xmpp.org/extensions/attic/">https://xmpp.org/extensions/attic/</a></p><ol class="revision-history"><li id="revision-history-v1.3.1"><div class="revision-head">Version 1.3.1 (2022-03-22)<a class="anchor-link" href="#revision-history-v1.3.1"><abbr title="Link to this point in the document">¶</abbr></a></div>Fix incorrect reference to sipub namespace<div class="revision-author">gl</div></li><li id="revision-history-v1.3"><div class="revision-head">Version 1.3 (2017-11-29)<a class="anchor-link" href="#revision-history-v1.3"><abbr title="Link to this point in the document">¶</abbr></a></div>Deprecated by vote of the council.<div class="revision-author">XEP Editor (ssw)</div></li><li id="revision-history-v1.2"><div class="revision-head">Version 1.2 (2004-04-13)<a class="anchor-link" href="#revision-history-v1.2"><abbr title="Link to this point in the document">¶</abbr></a></div>More fully defined the XMPP Registrar considerations.<div class="revision-author">psa</div></li><li id="revision-history-v1.1"><div class="revision-head">Version 1.1 (2003-12-30)<a class="anchor-link" href="#revision-history-v1.1"><abbr title="Link to this point in the document">¶</abbr></a></div>Improved explanatory text; fixed several errors in the schema.<div class="revision-author">psa</div></li><li id="revision-history-v1.0"><div class="revision-head">Version 1.0 (2003-10-17)<a class="anchor-link" href="#revision-history-v1.0"><abbr title="Link to this point in the document">¶</abbr></a></div>Per a vote of the Jabber Council, advanced status to Draft.<div class="revision-author">psa</div></li><li id="revision-history-v0.7"><div class="revision-head">Version 0.7 (2003-10-07)<a class="anchor-link" href="#revision-history-v0.7"><abbr title="Link to this point in the document">¶</abbr></a></div>Added IBB as a MUST requirement.<div class="revision-author">tjm</div></li><li id="revision-history-v0.6"><div class="revision-head">Version 0.6 (2003-08-18)<a class="anchor-link" href="#revision-history-v0.6"><abbr title="Link to this point in the document">¶</abbr></a></div>Cleaned up some namespace inconsistencies, added the &lt;desc&gt;
      element for file descriptions.<div class="revision-author">tjm</div></li><li id="revision-history-v0.5"><div class="revision-head">Version 0.5 (2003-07-15)<a class="anchor-link" href="#revision-history-v0.5"><abbr title="Link to this point in the document">¶</abbr></a></div>Stream ids not needed on return results.  Moved s5b, ibb, and url-data to the actual namespaces of the stream protocols.<div class="revision-author">rwe</div></li><li id="revision-history-v0.4"><div class="revision-head">Version 0.4 (2003-06-30)<a class="anchor-link" href="#revision-history-v0.4"><abbr title="Link to this point in the document">¶</abbr></a></div>Fixed various typos and inconsistencies<div class="revision-author">lw</div></li><li id="revision-history-v0.3"><div class="revision-head">Version 0.3 (2003-06-30)<a class="anchor-link" href="#revision-history-v0.3"><abbr title="Link to this point in the document">¶</abbr></a></div>Added XML Schema<div class="revision-author">lw</div></li><li id="revision-history-v0.2"><div class="revision-head">Version 0.2 (2003-06-24)<a class="anchor-link" href="#revision-history-v0.2"><abbr title="Link to this point in the document">¶</abbr></a></div>
      Clarified many examples, added linuxwolf as an author (again, my bad,
      should have been there), clarified the allowed streams and how data is
      sent over it.
    <div class="revision-author">tjm</div></li><li id="revision-history-v0.1"><div class="revision-head">Version 0.1 (2003-06-10)<a class="anchor-link" href="#revision-history-v0.1"><abbr title="Link to this point in the document">¶</abbr></a></div>Initial version.<div class="revision-author">tjm</div></li></ol><h3 id="appendix-biblatex">Appendix I: Bib(La)TeX Entry</h3><pre>
@report{muldowney2003si-filetransfer,
  title = {SI File Transfer},
  author = {Muldowney, Thomas and Miller, Matthew and Eatmon, Ryan and Saint-Andre, Peter},
  type = {XEP},
  number = {0096},
  version = {1.3.1},
  institution = {XMPP Standards Foundation},
  url = {https://xmpp.org/extensions/xep-0096.html},
  date = {2003-06-10/2022-03-22},
}</pre><p>END</p></body></html>
