<!DOCTYPE html>
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>XEP-0405: Mediated Information eXchange (MIX): Participant Server Requirements</title><style type="text/css">
/* don't mind this hack */
nav#toc h2:before {
display: none;
content: "XEP-0405";
}
        </style><link rel="stylesheet" type="text/css" href="xmpp.css"><link href="prettify.css" type="text/css" rel="stylesheet"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico"><script type="text/javascript" src="prettify.js"></script><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=2.0"><meta name="DC.Title" content="Mediated Information eXchange (MIX): Participant Server Requirements"><meta name="DC.Creator" content="Kevin Smith"><meta name="DC.Creator" content="Steve Kille"><meta name="DC.Description" content="This document defines an extension to Mediated Information eXchange (MIX) specified in XEP-0369.  It specifies behaviour of an XMPP server to which MIX Clients connect in order to enable correct operation of these clients in conjunction with a MIX server. "><meta name="DC.Publisher" content="XMPP Standards Foundation"><meta name="DC.Contributor" content="XMPP Extensions Editor"><meta name="DC.Date" content="2021-07-02"><meta name="DC.Type" content="XMPP Extension Protocol"><meta name="DC.Format" content="XHTML"><meta name="DC.Identifier" content="XEP-0405"><meta name="DC.Language" content="en"><meta name="DC.Rights" content="This XMPP Extension Protocol is copyright © 1999 – 2020 by the XMPP Standards Foundation (XSF)."></head><body onload="prettyPrint()"><h1>XEP-0405: Mediated Information eXchange (MIX): Participant Server Requirements</h1><div class="docmeta-wrap"><dl id="docmeta" class="compact"><dt>Abstract</dt><dd>This document defines an extension to Mediated Information eXchange (MIX) specified in XEP-0369.  It specifies behaviour of an XMPP server to which MIX Clients connect in order to enable correct operation of these clients in conjunction with a MIX server. </dd><dt>Authors</dt><dd><ul class="authors"><li>Kevin Smith</li><li>Steve Kille</li></ul></dd><dt>Copyright</dt><dd>© 1999 – 2021 XMPP Standards Foundation. <a href="#appendix-legal">SEE LEGAL NOTICES</a>.</dd><dt>Status</dt><dd><p>Experimental</p><div id="status-notice" class="experimental standards track">WARNING: This Standards-Track document is Experimental. Publication as an XMPP Extension Protocol does not imply approval of this proposal by the XMPP Standards Foundation. Implementation of the protocol described herein is encouraged in exploratory implementations, but production systems are advised to carefully consider whether it is appropriate to deploy implementations of this protocol before it advances to a status of Draft.</div></dd><dt>Type</dt><dd>Standards Track</dd><dt>Version</dt><dd>0.5.2 (2021-07-02)</dd></dl><div class="timeline-wrap"><div class="timeline-head">Document Lifecycle</div><ol class="timeline"><li class="current">Experimental</li><li>Proposed</li><li>Stable</li><li>Final</li></ol></div></div><nav id="toc"><a href="#top"><h2>Table of Contents</h2></a><ol class="toc"><li><a href="#intro">Introduction</a></li><li><a href="#pam-use-cases">Use Cases</a><ol><li><a href="#server-identification-mix-clients">Server Identification of MIX Capabable Clients</a></li><li><a href="#mix-from">Messages From MIX Channels</a></li><li><a href="#user-server-to">Messages To MIX Channels</a></li><li><a href="#user-server-client-capability">Client Determines MIX Capability of Client's Server</a></li><li><a href="#user-server-disco">MIX Management and Discovery</a></li><li><a href="#mix-join-leave">MIX Join and Leave Support on Local Server</a></li><li><a href="#usecase-user-join">Joining a Channel</a></li><li><a href="#usecase-user-leaving">Leaving a Channel</a></li><li><a href="#usecase-roster">Roster Management</a><ol><li><a href="#usecase-user-presence">Setting User Presence</a></li><li><a href="#usecase-user-presence-receive">Receiving User Presence</a></li><li><a href="#usecase-obtaining-presence">Client Coming Online and Obtaining Presence from the Local Server</a></li><li><a href="#usecase-user-offline">Going Offline</a></li></ol></li><li><a href="#mix-roster-capability-sharing">MIX Roster Item Capability Sharing</a></li><li><a href="#usecase-mam">MAM Archive Support</a></li><li><a href="#usecase-blocking">Blocking Considerations</a></li></ol></li><li><a href="#i18n">Internationalization Considerations</a></li><li><a href="#security">Security Considerations</a></li><li><a href="#iana">IANA Considerations</a></li><li><a href="#registrar">XMPP Registrar Considerations</a></li><li><a href="#schema">XML Schema</a></li><li><a href="#ack">Acknowledgements</a></li></ol><h6><a href="#appendices">Appendices</a></h6><ol class="toc-appendices"><li><a href="#appendix-docinfo">Document Information</a></li><li><a href="#appendix-authorinfo">Author Information</a></li><li><a href="#appendix-legal">Legal Notices</a></li><li><a href="#appendix-xmpp">Relation to XMPP</a></li><li><a href="#appendix-discuss">Discussion Venue</a></li><li><a href="#appendix-conformance">Requirements Conformance</a></li><li><a href="#appendix-notes">Notes</a></li><li><a href="#appendix-revs">Revision History</a></li><li><a href="#appendix-biblatex">Bib(La)Tex Entry</a></li></ol></nav><h2 id="intro">1.
       Introduction<a class="anchor-link" href="#intro"><abbr title="Link to this point in the document">¶</abbr></a></h2>
  <p class="" style="">The Mediated Information eXchange (MIX) protocol framework and core capabilities are specified in <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0369.html">Mediated Information eXchange (MIX) (XEP-0369)</a></span>  [<a href="#nt-idm112">1</a>] (MIX-CORE).    MIX-CORE and <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0403.html">Mediated Information eXchange (MIX): Presence Support. (XEP-0403)</a></span>  [<a href="#nt-idm116">2</a>] define behaviour of a MIX server supporting MIX channels.  In order for a MIX system to operate correctly, the XMPP server connecting MIX clients MUST follow the rules set out in this specification to achieve correct MIX operation.   This specification also sets out requirements for XMPP clients, so a MIX client MUST follow both the rules of XMPP-CORE and this specification.
   </p>


    <p class="" style="">
      A MIX channel does not send messages and presence directly to the MIX client of a channel participant, but addresses them to the participant using the participant's bare JID. The participant's server MUST then handle these messages and pass them on to zero, one or multiple clients.   To enable MIX to work, this behaviour is necessary and so the server of every MIX client MUST follow the rules set out in this specification.
This approach  enables flexible support of multiple clients for a MIX channel participant.
       The MIX model is that a user will join a channel over an extended period, and that the user (not a specific client used by the user) joins the channel. The primary subscription is with the client's bare JID.
       There are a number of MIX requirements on behaviour of the MIX Participant's server, which are summarized here:
     </p>
    <ol start="" class="" style="">


      <li class="" style="">Messages from a MIX client to a MIX channel will go direct to the MIX service.  They are relayed, but not modified, by the participant's server.</li>
      <li class="" style="">Messages from a MIX channel to a MIX client are always sent to the MIX participant's server (addressed by bare JID) and MUST be handled by the MIX participant's server.</li>
      <li class="" style="">All MIX messages received by the MIX participant's server for a participant MUST be stored using MAM in the participant's archive.</li>
      <li class="" style="">The MIX participant's server will only forward messages to online clients and will not forward messages if no clients are online.
        This means that a MIX client needs to resynchronize with all MIX channels when it comes online.  This message synchronization will happen between the MIX client and the MAM archive held on the MIX participant's server.</li>

      <li class="" style="">The MIX client will generally send management and other messages directly to the MIX channel and this MUST be done except where this specification requires otherwise.  </li>
      <li class="" style="">The user's roster contains each MIX channel to which the user is subscribed.   To achieve this the user's server needs to manage the roster on behalf of the user.  For this reason, MIX join and leave commands MUST be sent by a client to the user's server.   This enables the user's server to correctly manage the roster on behalf of the user.</li>
    </ol>
    <p class="" style="">
   Messages from a MIX channel to a MIX participant (which will be of type=groupchat), presence information, and other information sent as a result of MIX channel subscription are sent to the participant's server using the participant's bare JID.  This means that the MIX participant's server  MUST implement the  modification of the standard <span class="ref" style=""><a href="http://tools.ietf.org/html/rfc6121">RFC 6121</a></span>  [<a href="#nt-idm129">3</a>] message processing rules specified here.
    </p>
<h2 id="pam-use-cases">2.
       Use Cases<a class="anchor-link" href="#pam-use-cases"><abbr title="Link to this point in the document">¶</abbr></a></h2>
  <p class="" style="">
    This section defines behaviour REQUIRED by MIX for servers supporting MIX participants.    This functionality MUST be provided by servers used by clients that participate in MIX channels.  In future, this specification MAY be  incorporated into
 <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0376.html">Pubsub Account Management (XEP-0376)</a></span>  [<a href="#nt-idm135">4</a>] (PAM) which follows a similar model.
  </p>

  <div class="indent"><h3 id="server-identification-mix-clients">2.1 Server Identification of MIX Capabable Clients<a class="anchor-link" href="#server-identification-mix-clients"><abbr title="Link to this point in the document">¶</abbr></a></h3>
    <p class="" style="">
      A MIX User's server MUST determine which online clients support MIX.   This will enable the server to send MIX traffic to all MIX capable clients, but not to other clients.   A MIX capable client MAY choose to come online and not advertise MIX capability.   The mechanism for a server to discover client capability is described in <a href="#mix-client-discovery">Discovering Client MIX Capability</a>.
    </p>
  </div>

  <div class="indent"><h3 id="mix-from">2.2 Messages From MIX Channels<a class="anchor-link" href="#mix-from"><abbr title="Link to this point in the document">¶</abbr></a></h3>
    <p class="" style="">
      Messages from a MIX channel will usually be handled by the participant's server.   The only exception to this is where the MIX channel is responding directly to messages from the client.   Messages and presence distributed by a MIX channel will always be sent to the participant's server and addressed to the user's bare JID.  The participant's server will archive the message in MAM and send on the messages from the channel to each of the user's online clients which advertise MIX capability.   If there are no such clients activated, the message is not sent to any clients.
    </p>
    <p class="" style="">
      Messages sent to the participant's sever will always be addressed to the user's bare JID.  The participant’s server will modify the recipient to the full JID of each client to which the message is forwarded.    The following example, repeated from <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0369.html">Mediated Information eXchange (MIX) (XEP-0369)</a></span>  [<a href="#nt-idm112">1</a>], shows a message distributed by a MIX channel and directed to the participant’s server with the participant's bare JID.
    </p>
    <figure class="code-example" id="example-1"><figcaption><strong>Example 1.</strong> Channel Reflects Message to Participants<a class="anchor-link" href="#example-1"><abbr title="Link to this point in the document">¶</abbr></a></figcaption><pre class="prettyprint">
&lt;message from='coven@mix.shakespeare.example/123456'
         to='hecate@shakespeare.example'
         id='77E07BB0-55CF-4BD4-890E-3F7C0E686BBD'
         type='groupchat'&gt;
  &lt;body&gt;Harpier cries: 'tis time, 'tis time.&lt;/body&gt;
  &lt;mix xmlns='urn:xmpp:mix:core:1'&gt;
    &lt;nick&gt;thirdwitch&lt;/nick&gt;
    &lt;jid&gt;hag66@shakespeare.example&lt;/jid&gt;
  &lt;/mix&gt;
&lt;/message&gt;
</pre></figure>

  <p class="" style="">
    The server receiving the message will then deliver the messages to all online clients.   Messages are delivered to all available online resources irrespective of
    status  and resource priority.
    The following example shows how the participant's server modifies the inbound message to replace the bare JID in the 'to' with a full JID for each of two active MIX clients.
  </p>

    <figure class="code-example" id="example-2"><figcaption><strong>Example 2.</strong> Participant's Server Sends Modified Message to two Clients<a class="anchor-link" href="#example-2"><abbr title="Link to this point in the document">¶</abbr></a></figcaption><pre class="prettyprint">
&lt;message from='coven@mix.shakespeare.example/123456'
         to='hecate@shakespeare.example/UUID-x4r/2491'
         id='77E07BB0-55CF-4BD4-890E-3F7C0E686BBD'
         type='groupchat'&gt;
  &lt;body&gt;Harpier cries: 'tis time, 'tis time.&lt;/body&gt;
  &lt;mix xmlns='urn:xmpp:mix:core:1'&gt;
    &lt;nick&gt;thirdwitch&lt;/nick&gt;
    &lt;jid&gt;hag66@shakespeare.example&lt;/jid&gt;
  &lt;/mix&gt;
&lt;/message&gt;

&lt;message from='coven@mix.shakespeare.example/123456'
         to='hecate@shakespeare.example/UUID-b5b/0114'
         id='77E07BB0-55CF-4BD4-890E-3F7C0E686BBD'
         type='groupchat'&gt;
  &lt;body&gt;Harpier cries: 'tis time, 'tis time.&lt;/body&gt;
  &lt;mix xmlns='urn:xmpp:mix:core:1'&gt;
    &lt;nick&gt;thirdwitch&lt;/nick&gt;
    &lt;jid&gt;hag66@shakespeare.example&lt;/jid&gt;
  &lt;/mix&gt;
&lt;/message&gt;

</pre></figure>
  </div>

  <div class="indent"><h3 id="user-server-to">2.3 Messages To MIX Channels<a class="anchor-link" href="#user-server-to"><abbr title="Link to this point in the document">¶</abbr></a></h3>
    <p class="" style="">
      Messages sent by a MIX channel participant to the MIX channel are always sent from a MIX client directly to the channel. The participant's server relays the message but does not modify the messages.
    </p>
  </div>


  <div class="indent"><h3 id="user-server-client-capability">2.4 Client Determines MIX Capability of Client's Server<a class="anchor-link" href="#user-server-client-capability"><abbr title="Link to this point in the document">¶</abbr></a></h3>
    <p class="" style="">
      Servers supporting this specification MUST advertise this to clients for which they wish to support this specification.     A client wishing to use MIX MUST check for this capability in the local server before using MIX, by verifying support for the client's account.  The capability is represented by the 'urn:xmpp:mix:pam:2' feature.  In addition to this the server MAY advertize the 'urn:xmpp:mix:pam:2#archive' feature, which shows that the local server archives MIX messages.
    </p>
    <figure class="code-example" id="example-3"><figcaption><strong>Example 3.</strong> Client Determines MIX Capability for Server Account<a class="anchor-link" href="#example-3"><abbr title="Link to this point in the document">¶</abbr></a></figcaption><pre class="prettyprint">
&lt;iq from='hag66@shakespeare.example/UUID-c8y/1573'
    id='lx09df27'
    type='get'&gt;
  &lt;query xmlns='http://jabber.org/protocol/disco#info'/&gt;
&lt;/iq&gt;

&lt;iq id='lx09df27'
    to='hag66@shakespeare.example/UUID-c8y/1573'
    type='result'&gt;
  &lt;query xmlns='http://jabber.org/protocol/disco#info'&gt;
    &lt;feature var='urn:xmpp:mix:pam:2'/&gt;
    &lt;feature var='urn:xmpp:mix:pam:2#archive'/&gt;
  &lt;/query&gt;
&lt;/iq&gt;
</pre></figure>

  </div>

  <div class="indent"><h3 id="user-server-disco">2.5 MIX Management and Discovery<a class="anchor-link" href="#user-server-disco"><abbr title="Link to this point in the document">¶</abbr></a></h3>
    <p class="" style="">
      Most interaction between  a MIX client and a MIX channel is directly between the client and the channel. The participant's server relays the message but does not modify the messages.   In particular configuration management and discovery is direct.   Interaction will be direct, unless explicitly stated otherwise in this specification.
    </p>
  </div>
  <div class="indent"><h3 id="mix-join-leave">2.6 MIX Join and Leave Support on Local Server<a class="anchor-link" href="#mix-join-leave"><abbr title="Link to this point in the document">¶</abbr></a></h3>
  <p class="" style="">
    Channel Join and Leave functions operate indirectly through the participant's server.  The reason for this is that where a channel shares user presence, the channel is included in the user's roster which is managed in the local server.  The Join and Leave functions lead to roster changes and so they MUST go through the participant's server.   To achieve this, this specification wraps the operations so that the server can correctly route messages.
  </p>
  </div>


  <div class="indent"><h3 id="usecase-user-join">2.7 Joining a Channel<a class="anchor-link" href="#usecase-user-join"><abbr title="Link to this point in the document">¶</abbr></a></h3>


    <p class="" style="">A user joins a channel by sending a MIX "client-join" command from one of the user's clients, which wraps the "join" command specified in <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0369.html">Mediated Information eXchange (MIX) (XEP-0369)</a></span>  [<a href="#nt-idm112">1</a>].   <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0369.html">Mediated Information eXchange (MIX) (XEP-0369)</a></span>  [<a href="#nt-idm112">1</a>] specifies how the join command works, and so this specification considers only the wrapping and client actions.
      The &lt;client-join/&gt; is a child element of &lt;iq/&gt; element.     The &lt;client-join/&gt; element is qualified by the 'urn:xmpp:mix:pam:2' namespace.  The channel being joined is specified by a 'channel' attribute in the &lt;client-join/&gt; element, which is used by the server to correctly address the join.   The &lt;join&gt; is specified in <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0369.html">Mediated Information eXchange (MIX) (XEP-0369)</a></span>  [<a href="#nt-idm112">1</a>] and is a child element of &lt;client-join/&gt;.
    </p>

  <figure class="code-example" id="example-4"><figcaption><strong>Example 4.</strong> Client sends request to local server to Join a MIX Channel<a class="anchor-link" href="#example-4"><abbr title="Link to this point in the document">¶</abbr></a></figcaption><pre class="prettyprint">
&lt;iq type='set'
    from='hag66@shakespeare.example/UUID-a1j/7533'
    to='hag66@shakespeare.example'
    id='E6E10350-76CF-40C6-B91B-1EA08C332FC7'&gt;
  &lt;client-join xmlns='urn:xmpp:mix:pam:2' channel='coven@mix.shakespeare.example'&gt;
    &lt;join xmlns='urn:xmpp:mix:core:1'&gt;
      &lt;subscribe node='urn:xmpp:mix:nodes:messages'/&gt;
      &lt;subscribe node='urn:xmpp:mix:nodes:presence'/&gt;
      &lt;subscribe node='urn:xmpp:mix:nodes:participants'/&gt;
      &lt;subscribe node='urn:xmpp:mix:nodes:info'/&gt;
    &lt;/join&gt;
  &lt;/client-join&gt;
&lt;/iq&gt;
</pre></figure>

    <p class="" style="">The information in this message is used to derive the message sent to the MIX channel.  The 'from' is the bare JID of the user.   The 'to' is the channel from the client join 'channel' attribute.   The 'id' is taken from the client join message.    The &lt;join&gt; is taken from the client join message.  This is shown in the following example, repeated from the earlier specification of channel behaviour. </p>

    <figure class="code-example" id="example-5"><figcaption><strong>Example 5.</strong> Participant's Server sends Join to MIX Channel<a class="anchor-link" href="#example-5"><abbr title="Link to this point in the document">¶</abbr></a></figcaption><pre class="prettyprint">
&lt;iq type='set'
    from='hag66@shakespeare.example'
    to='coven@mix.shakespeare.example'
    id='E6E10350-76CF-40C6-B91B-1EA08C332FC7'&gt;
  &lt;join xmlns='urn:xmpp:mix:core:1'&gt;
    &lt;subscribe node='urn:xmpp:mix:nodes:messages'/&gt;
    &lt;subscribe node='urn:xmpp:mix:nodes:presence'/&gt;
    &lt;subscribe node='urn:xmpp:mix:nodes:participants'/&gt;
    &lt;subscribe node='urn:xmpp:mix:nodes:info'/&gt;
  &lt;/join&gt;
&lt;/iq&gt;
</pre></figure>

  <p class="" style="">
    The MIX service will process this request and respond as specified by <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0369.html">Mediated Information eXchange (MIX) (XEP-0369)</a></span>  [<a href="#nt-idm112">1</a>].   An example response taken from <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0369.html">Mediated Information eXchange (MIX) (XEP-0369)</a></span>  [<a href="#nt-idm112">1</a>] is shown below.
  </p>

    <figure class="code-example" id="example-6"><figcaption><strong>Example 6.</strong> Channel responds to User's Server<a class="anchor-link" href="#example-6"><abbr title="Link to this point in the document">¶</abbr></a></figcaption><pre class="prettyprint">
&lt;iq type='result'
    from='coven@mix.shakespeare.example'
    to='hag66@shakespeare.example'
    id='E6E10350-76CF-40C6-B91B-1EA08C332FC7'&gt;
  &lt;join xmlns='urn:xmpp:mix:core:1' jid='123456#coven@mix.shakespeare.example'&gt;
    &lt;subscribe node='urn:xmpp:mix:nodes:messages'/&gt;
    &lt;subscribe node='urn:xmpp:mix:nodes:presence'/&gt;
    &lt;subscribe node='urn:xmpp:mix:nodes:participants'/&gt;
    &lt;subscribe node='urn:xmpp:mix:nodes:info'/&gt;
  &lt;/join&gt;
&lt;/iq&gt;
</pre></figure>

    <p class="" style="">
      The user's server will then make roster modifications as set out in a later section of this specification.
      After making these changes, the user's server will  send the client-join response containing the server's join response back to the client that made the join request.  This has the 'from' set to the user's bare JID and the 'to' set to the client's full JID.  This is illustrated below:
    </p>

    <figure class="code-example" id="example-7"><figcaption><strong>Example 7.</strong> User's Server sends response to Client<a class="anchor-link" href="#example-7"><abbr title="Link to this point in the document">¶</abbr></a></figcaption><pre class="prettyprint">
&lt;iq type='result'
    from='hag66@shakespeare.example'
    to='hag66@shakespeare.example/UUID-a1j/7533'
    id='E6E10350-76CF-40C6-B91B-1EA08C332FC7'&gt;
      &lt;client-join xmlns='urn:xmpp:mix:pam:2'&gt;
        &lt;join xmlns='urn:xmpp:mix:core:1'
              jid='123456#coven@mix.shakespeare.example'&gt;
          &lt;subscribe node='urn:xmpp:mix:nodes:messages'/&gt;
          &lt;subscribe node='urn:xmpp:mix:nodes:presence'/&gt;
          &lt;subscribe node='urn:xmpp:mix:nodes:participants'/&gt;
          &lt;subscribe node='urn:xmpp:mix:nodes:info'/&gt;
       &lt;/join&gt;
     &lt;/client-join&gt;
&lt;/iq&gt;
</pre></figure>



  </div>





  <div class="indent"><h3 id="usecase-user-leaving">2.8 Leaving a Channel<a class="anchor-link" href="#usecase-user-leaving"><abbr title="Link to this point in the document">¶</abbr></a></h3>
    <p class="" style="">Users generally remain in a channel for an extended period of time.  The process for leaving a MIX channel is specified in <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0369.html">Mediated Information eXchange (MIX) (XEP-0369)</a></span>  [<a href="#nt-idm112">1</a>].   When a user desires to leave a channel, it will issue a client-leave request to the local server.

      The &lt;client-leave/&gt; is a child element of &lt;iq/&gt; element.     The &lt;client-leave/&gt; element is qualified by the 'urn:xmpp:mix:pam:2' namespace.  The channel being left is specified by a 'channel' attribute in the &lt;client-leave/&gt; element, which is used by the server to correctly address the join.   The &lt;leave&gt; is specified in <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0369.html">Mediated Information eXchange (MIX) (XEP-0369)</a></span>  [<a href="#nt-idm112">1</a>] and is a child element of &lt;client-leave/&gt;.
 This shown in the following example.</p>


    <figure class="code-example" id="example-8"><figcaption><strong>Example 8.</strong> Client Requests to Leave a Channel<a class="anchor-link" href="#example-8"><abbr title="Link to this point in the document">¶</abbr></a></figcaption><pre class="prettyprint">
&lt;iq type='set'
    from='hag66@shakespeare.example/UUID-a1j/7533'
    to='hag66@shakespeare.example'
    id='E6E10350-76CF-40C6-B91B-1EA08C332FC7'&gt;
  &lt;client-leave xmlns='urn:xmpp:mix:pam:2'
                channel='coven@mix.shakespeare.example'&gt;
    &lt;leave xmlns='urn:xmpp:mix:core:1'/&gt;
  &lt;/client-leave&gt;
&lt;/iq&gt;
</pre></figure>

    <p class="" style="">
      The user's server will then generate a matching leave request to the MIX channel based on this information.  This example is taken from <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0369.html">Mediated Information eXchange (MIX) (XEP-0369)</a></span>  [<a href="#nt-idm112">1</a>].
    </p>

    <figure class="code-example" id="example-9"><figcaption><strong>Example 9.</strong> User's Server sends  Leave Request to  a Channel<a class="anchor-link" href="#example-9"><abbr title="Link to this point in the document">¶</abbr></a></figcaption><pre class="prettyprint">
&lt;iq type='set'
    from='hag66@shakespeare.example'
    to='coven@mix.shakespeare.example'
    id='E6E10350-76CF-40C6-B91B-1EA08C332FC7'&gt;
  &lt;leave xmlns='urn:xmpp:mix:core:1'/&gt;
&lt;/iq&gt;
</pre></figure>

    <p class="" style="">
      The MIX channel will then process the leave and respond.   The following example is taken from <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0369.html">Mediated Information eXchange (MIX) (XEP-0369)</a></span>  [<a href="#nt-idm112">1</a>].
    </p>
    <figure class="code-example" id="example-10"><figcaption><strong>Example 10.</strong> Channel Confirms Leave to User's Server<a class="anchor-link" href="#example-10"><abbr title="Link to this point in the document">¶</abbr></a></figcaption><pre class="prettyprint">
&lt;iq type='result'
    from='coven@mix.shakespeare.example'
    to='hag66@shakespeare.example'
    id='E6E10350-76CF-40C6-B91B-1EA08C332FC7'&gt;
  &lt;leave xmlns='urn:xmpp:mix:core:1'/&gt;
&lt;/iq&gt;
</pre></figure>


    <p class="" style="">
      After receiving the confirmation that the user has left the MIX channel, the user's server will remove the MIX channel entry from the user's roster and follow other processing as specified below.   The user's server will then notify the client with the servers response.
      This wraps the response from the server with a client-leave, with the 'from' set to the user's bare JID and the 'to' set to the client's full JID.  This is illustrated below:
    </p>

    <figure class="code-example" id="example-11"><figcaption><strong>Example 11.</strong> User's Server Confirms Leave to Client<a class="anchor-link" href="#example-11"><abbr title="Link to this point in the document">¶</abbr></a></figcaption><pre class="prettyprint">
&lt;iq type='result'
    from='hag66@shakespeare.example'
    to='hag66@shakespeare.example/UUID-a1j/7533'
    id='E6E10350-76CF-40C6-B91B-1EA08C332FC7'&gt;
  &lt;client-leave xmlns='urn:xmpp:mix:pam:2'&gt;
    &lt;leave xmlns='urn:xmpp:mix:core:1'/&gt;
  &lt;/client-leave&gt;
&lt;/iq&gt;
</pre></figure>
  </div>

  <div class="indent"><h3 id="usecase-roster">2.9 Roster Management<a class="anchor-link" href="#usecase-roster"><abbr title="Link to this point in the document">¶</abbr></a></h3>
      <p class="" style="">
        As part of the channel joining process, the user's server MUST add the MIX channel to the user's roster.  This is done to share the user's presence status with the channel and channel participants subscribing to presence, when the user wishes this presence to be shared.  These roster entries also enables the user's client to quickly determine which channels the user has joined.  The user's server will need to record those roster entries that are associated with MIX channels in order to correctly handle MIX processing.
        This roster entry will lead to the user's server correctly sending user's presence from all the user's MIX clients to the MIX channel.  Where the user wishes to share presence, the roster subscription is configured with one way presence, as presence is sent to the MIX channel but no presence information about the MIX channel is sent to the user.
      </p>
    <p class="" style="">
      The participant's server MUST ensure that only presence information from clients that advertise MIX capability is sent to the MIX channel.  So, if a user has two online clients, but only one is MIX capable, then the channel will only receive presence information relating to the MIX client.
    </p>
      <p class="" style="">
        If the user does not wish to publish presence information to the channel, the user's server will  add the roster entry with mode subscription=none.  The roster entry will be present to record that the user has joined the channel, but it will not send presence information to the channel.    The user's server MUST do this when the user has chosen Presence preference of 'not share' as specified in <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0404.html">Mediated Information eXchange (MIX): JID Hidden Channels. (XEP-0404)</a></span>  [<a href="#nt-idm219">5</a>].   If the user changes the value of the preference, the server MUST modify subscription mode to reflect this.
      </p>

      <p class="" style="">
        The user's server MUST remove the user's roster entry when the user leaves the channel.
      </p>

      <p class="" style="">
        A channel MAY publish an Avatar following <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0084.html">User Avatar (XEP-0084)</a></span>  [<a href="#nt-idm225">6</a>].  A client MAY make use of this information to associate an Avatar with the roster entry for a channel.
      </p>

    <div class="indent"><h4 id="usecase-user-presence">2.9.1 Setting User Presence<a class="anchor-link" href="#usecase-user-presence"><abbr title="Link to this point in the document">¶</abbr></a></h4>
      <p class="" style="">
        A user joins a channel over an extended period, and participation in a channel does not generally change when a user clients go online or offline.   The user's  participation in a channel is reflected by the user's bare JID in the participant node.   When a user subscribes to presence as specified in <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0403.html">Mediated Information eXchange (MIX): Presence Support. (XEP-0403)</a></span>  [<a href="#nt-idm116">2</a>],  all presence messages  are sent to this JID.  Presence updates are sent out to subscribing participants using standard presence stanzas.
      </p>

      <p class="" style="">
        A user MAY share presence information with the channel, for the user's online clients.

        This is achieved by a roster entry for the channel configured with one way presence, which will cause all presence changes for the user's MIX clients to be sent to the channel.
        When an XMPP client comes online or changes presence status, this will be communicated by the user to the user's server using broadcast presence.  The user's XMPP server is then responsible to share this presence information to each entry in the roster and in particular to each MIX channel in the roster.
      </p>
      <p class="" style="">
        A user setting status is now used as an example.   Unlike in <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0045.html">Multi-User Chat (XEP-0045)</a></span>  [<a href="#nt-idm237">7</a>] where coming online is a special action, coming online in MIX is implicit when presence status is set.  Going offline is a achieved by setting presence status to unavailable, which removes the client full JID entry from the presence node.  When a user sets a presence status, the user's server sends updated presence to the MIX channel, and the MIX service then publishes the user's  availability to the presence node. If there is not an item named by the full JID of the client with updated presence status, this item is created.   The sequence is shown in the following examples, starting with a client setting presences status on the connected server.</p>
      <figure class="code-example" id="example-12"><figcaption><strong>Example 12.</strong> Client Sets Presence Status on Server<a class="anchor-link" href="#example-12"><abbr title="Link to this point in the document">¶</abbr></a></figcaption><pre class="prettyprint">
&lt;presence xmlns='jabber:client' from='hag66@shakespeare.example/UUID-a1j/7533'&gt;
  &lt;show&gt;dnd&lt;/show&gt;
  &lt;status&gt;Making a Brew&lt;/status&gt;
&lt;/presence&gt;</pre></figure>

      <p class="" style="">
        The server then sends the presence information to roster entries.  The following example then shows the presence message from the client's server to the MIX channel.   The presence is then handled as specified in <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0369.html">Mediated Information eXchange (MIX) (XEP-0369)</a></span>  [<a href="#nt-idm112">1</a>].
      </p>
      <figure class="code-example" id="example-13"><figcaption><strong>Example 13.</strong> Server sends Presence Status to MIX Channel<a class="anchor-link" href="#example-13"><abbr title="Link to this point in the document">¶</abbr></a></figcaption><pre class="prettyprint">
&lt;presence  from='hag66@shakespeare.example/UUID-a1j/7533'
           to='coven@mix.shakespeare.example'&gt;
  &lt;show&gt;dnd&lt;/show&gt;
  &lt;status&gt;Making a Brew&lt;/status&gt;
&lt;/presence&gt;</pre></figure>
    </div>

      <div class="indent"><h4 id="usecase-user-presence-receive">2.9.2 Receiving User Presence<a class="anchor-link" href="#usecase-user-presence-receive"><abbr title="Link to this point in the document">¶</abbr></a></h4>
      <p class="" style="">
        A MIX channel will send out presence information to participants that subscribe to the presence node, as specified in <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0403.html">Mediated Information eXchange (MIX): Presence Support. (XEP-0403)</a></span>  [<a href="#nt-idm116">2</a>].  An example is shown below:
      </p>
      <figure class="code-example" id="example-14"><figcaption><strong>Example 14.</strong> User's Server Receives Presence<a class="anchor-link" href="#example-14"><abbr title="Link to this point in the document">¶</abbr></a></figcaption><pre class="prettyprint">
&lt;presence from='123435#coven@mix.shakespeare.example/UUID-a1j/7533'
          to='hag99@shakespeare.example'
          id='77E07BB0-55CF-4BD4-890E-3F7C0E686BBD'&gt;
  &lt;mix xmlns='urn:xmpp:mix:presence:0'&gt;
     &lt;jid&gt;hecate@shakespeare.example/UUID-x4r/2491&lt;/jid&gt;
     &lt;nick&gt;thirdwitch&lt;/nick&gt;
  &lt;/mix&gt;
  &lt;show&gt;dnd&lt;/show&gt;
  &lt;status&gt;Making a Brew&lt;/status&gt;
&lt;/presence&gt;</pre></figure>
      <p class="" style="">
 The user's server will then pass this on to all online clients, with 'from' unchanged and 'to' set to the client receiving presence.   An example is shown below:
      </p>
        <figure class="code-example" id="example-15"><figcaption><strong>Example 15.</strong> User's Server Sends Presence to Client<a class="anchor-link" href="#example-15"><abbr title="Link to this point in the document">¶</abbr></a></figcaption><pre class="prettyprint">
&lt;presence from='123435#coven@mix.shakespeare.example/UUID-a1j/7533'
          to='hag99@shakespeare.example/UUID-rrr/1234'
          id='77E07BB0-55CF-4BD4-890E-3F7C0E686BBD'&gt;
  &lt;mix xmlns='urn:xmpp:mix:presence:0'&gt;
     &lt;jid&gt;hecate@shakespeare.example/UUID-x4r/2491&lt;/jid&gt;
     &lt;nick&gt;thirdwitch&lt;/nick&gt;
  &lt;/mix&gt;
  &lt;show&gt;dnd&lt;/show&gt;
  &lt;status&gt;Making a Brew&lt;/status&gt;
&lt;/presence&gt;</pre></figure>

        <p class="" style="">
 The user's local server will receive a flow of all presence updates for the user.  It will pass this presence information on to all online clients.   This ensures that an online client is kept updated with presence.
          When a client goes offline, it will cease getting presence updates. Presence updates will continue to flow to the user's local server, and so the local server is able maintain up to date presence state for the channel, even when there are no online clients.   When a user had no online clients the user's server MAY continue to maintain MIX presence status for the user or MAY discard inbound MIX presence information.
        </p>
    </div>

    <div class="indent"><h4 id="usecase-obtaining-presence">2.9.3 Client Coming Online and Obtaining Presence from the Local Server<a class="anchor-link" href="#usecase-obtaining-presence"><abbr title="Link to this point in the document">¶</abbr></a></h4>

      <p class="" style="">
        When the client comes online, it will activate use of the MIX.    When the user's server has been maintaining MIX presence, it will then send full presence status to the client using standard presence messages.   This will enable the client to update presence information for the subscribed MIX channels.  Note that this does not need any interaction with MIX servers.
      </p>
      <p class="" style="">
        There are two situations where a MIX participant's server  will need to get presence status from the channel, before it can send presence to the client.   The first time is when a user joins the channel as a participant and subscribes to presence.   Upon this subscription the MIX channel will send to the participant's server (using the user's bare JID) presence for all of the items in the presence node using standard presence stanzas.  This will give the participant's full current presence for the channel.
      </p>
      <p class="" style="">
        The second scenario is when the MIX participant's server needs to load or refresh presence status for a channel.  This will be needed when the participant's server is started or when the server chooses to not maintain presence for a user when all clients go offline.   This MIX participant's server requests presence update by sending a directed presence stanza to the MIX channel from the user's bare JID. The MIX channel can distinguish this from a presence update, which will always be sent from the clients full JID.   This will cause the MIX channel to send a full presence update for the channel.
      </p>
    </div>

    <div class="indent"><h4 id="usecase-user-offline">2.9.4 Going Offline<a class="anchor-link" href="#usecase-user-offline"><abbr title="Link to this point in the document">¶</abbr></a></h4>
      <p class="" style="">When a client goes offline, this presence update is sent by the client's server to the MIX channel.   From the client perspective, this is the same as any other presence change.   Going online and offline will simply be presence updates. </p>
      <figure class="code-example" id="example-16"><figcaption><strong>Example 16.</strong> Client Goes Offline and Sends Presence to Channel<a class="anchor-link" href="#example-16"><abbr title="Link to this point in the document">¶</abbr></a></figcaption><pre class="prettyprint">
&lt;presence type='unavailable'
          from='hag66@shakespeare.example/UUID-a1j/7533'
          to='coven@mix.shakespeare.example'/&gt;
</pre></figure>
      <p class="" style="">
        It is desirable to prevent clients from going offline briefly and then coming back online again, as this will lead to "flapping presence".   The RECOMMENDED approach to achieve this is use of <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0198.html">Stream Management (XEP-0198)</a></span>  [<a href="#nt-idm266">8</a>] to maintain an XMPP client connection in the event of short term TCP failure.
      </p>
    </div>

  </div>

  <div class="indent"><h3 id="mix-roster-capability-sharing">2.10 MIX Roster Item Capability Sharing<a class="anchor-link" href="#mix-roster-capability-sharing"><abbr title="Link to this point in the document">¶</abbr></a></h3>
    <p class="" style="">It is useful for a MIX client to know which roster members are MIX channels, as this will facilitate convenient presentation of subscribed MIX channels to the user.  A MIX client MAY request that the server returns this additional information that annotates roster elements with MIX capability. The server MUST return the additional information. The request is made by extending the standard roster get request by adding a child element &lt;annotate/&gt; to the &lt;query/&gt; element.  The &lt;annotate/&gt; element is qualified by the ‘urn:xmpp:mix:roster:0' namespace.</p>
    <figure class="code-example" id="example-17"><figcaption><strong>Example 17.</strong> Roster Get Requesting MIX Information<a class="anchor-link" href="#example-17"><abbr title="Link to this point in the document">¶</abbr></a></figcaption><pre class="prettyprint">
&lt;iq from='juliet@example.com/balcony'
    id='bv1bs71f'
    type='get'&gt;
  &lt;query xmlns='jabber:iq:roster'&gt;
    &lt;annotate xmlns='urn:xmpp:mix:roster:0'/&gt;
  &lt;/query&gt;
&lt;/iq&gt;
</pre></figure>

    <p class="" style="">A standard roster item is encoded as follows.</p>
    <figure class="code-example" id="example-18"><figcaption><strong>Example 18.</strong> Standard Roster Item Encoding<a class="anchor-link" href="#example-18"><abbr title="Link to this point in the document">¶</abbr></a></figcaption><pre class="prettyprint">
&lt;item jid='romeo@example.net'/&gt;
</pre></figure>

    <p class="" style="">
      MIX channels in the roster information returned in response to a request for this additional MIX information MUST have an element &lt;channel/&gt; qualified by the ‘urn:xmpp:mix:roster:0' namespace  included in the roster item.  The &lt;channel/&gt; element MUST also include a 'participant-id' attribute that is the stable ID of the client.   This facilitates the client to match messages that reference this stable ID.   A MIX extended roster item is shown in the following example.
    </p>

    <figure class="code-example" id="example-19"><figcaption><strong>Example 19.</strong> Roster Item Encoding of a MIX Channel<a class="anchor-link" href="#example-19"><abbr title="Link to this point in the document">¶</abbr></a></figcaption><pre class="prettyprint">
&lt;item jid='balcony@example.net'&gt;
  &lt;channel xmlns='urn:xmpp:mix:roster:0' participant-id='123456'/&gt;
&lt;/item&gt;
</pre></figure>

<p class="" style="">
  Once a client has made an IQ request to return additional MIX information, the server MUST return this information on all subsequent roster updates that are sent by the server to the client.   The server MUST NOT send additional MIX information when this has not been explicitly requested.  It is anticipated that a client will fetch the roster after connection has been established and will set its preference for this MIX capability information at that time.
</p>
  </div>

  <div class="indent"><h3 id="usecase-mam">2.11 MAM Archive Support<a class="anchor-link" href="#usecase-mam"><abbr title="Link to this point in the document">¶</abbr></a></h3>
    <p class="" style="">
      Archive of MIX channel messages MAY be performed by the participant's server.  When this is done, the capability is advertized to MIX clients using the 'urn:xmpp:mix:pam:2#archive' feature.   If archive is provided it MUST always be used, so that 
      where a message is sent to the participant's server and discarded because there are no active clients, it will still be archived.   This means that when archiving is provided, the messages will be available in the local archive and can be picked up by clients when they come online.
    </p>
  </div>
  
  <div class="indent"><h3 id="usecase-blocking">2.12 Blocking Considerations<a class="anchor-link" href="#usecase-blocking"><abbr title="Link to this point in the document">¶</abbr></a></h3>
    <p class="" style="">
      This section describes an issue that needs to be addressed by servers that provide blocking capabilities based on JID.   Messages distributed by a MIX channel come from JIDs containing the bare JID of the channel.    For presence stanzas (specified in MIX-PRESENCE), IQ stanza relay (specified in MIX-PRESENCE), and private messages (specified in MIX-ANON) use an encoded JID, where the local part of the bare JID contains both the channel name and the senders Stable Participant ID, for example '123435#coven@mix.shakespeare.example'.   A server implementing blocking and MIX-PAM needs to recognize this encoding, to prevent blocking these messages when this is not desired.
    </p>
  </div>
<h2 id="i18n">3.
       Internationalization Considerations<a class="anchor-link" href="#i18n"><abbr title="Link to this point in the document">¶</abbr></a></h2>
  <p class="" style="">See considerations in <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0369.html">Mediated Information eXchange (MIX) (XEP-0369)</a></span>  [<a href="#nt-idm112">1</a>].
  </p>

<h2 id="security">4.
       Security Considerations<a class="anchor-link" href="#security"><abbr title="Link to this point in the document">¶</abbr></a></h2>
  <p class="" style="">See considerations in <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0369.html">Mediated Information eXchange (MIX) (XEP-0369)</a></span>  [<a href="#nt-idm112">1</a>].</p>

  <p class="" style="">
    When converting a 1:1 conversation to a channel there is potential to expose sensitive information and to present invalid information.
  </p>

<h2 id="iana">5.
       IANA Considerations<a class="anchor-link" href="#iana"><abbr title="Link to this point in the document">¶</abbr></a></h2>
  <p class="" style="">None.</p>
<h2 id="registrar">6.
       XMPP Registrar Considerations<a class="anchor-link" href="#registrar"><abbr title="Link to this point in the document">¶</abbr></a></h2>
  <p class="" style="">The urn:xmpp:mix namespace needs to be registered.</p>
<h2 id="schema">7.
       XML Schema<a class="anchor-link" href="#schema"><abbr title="Link to this point in the document">¶</abbr></a></h2>
  <p class="" style="">To be supplied when MIX progresses to proposed standard.</p>
<h2 id="ack">8.
       Acknowledgements<a class="anchor-link" href="#ack"><abbr title="Link to this point in the document">¶</abbr></a></h2>
  <p class="" style="">See <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0369.html">Mediated Information eXchange (MIX) (XEP-0369)</a></span>  [<a href="#nt-idm112">1</a>] for a list of contributors to the MIX Family of specifications.</p>
<hr><a name="appendices"></a><h2>Appendices</h2><h3 id="appendix-docinfo">Appendix A: Document Information<a class="anchor-link" href="#appendix-docinfo"><abbr title="Link to this point in the document">¶</abbr></a></h3><dl class="compact"><dt>Series</dt><dd><a href="https://xmpp.org/extensions/">XEP</a></dd><dt>Number</dt><dd>0405</dd><dt>Publisher</dt><dd><a href="/xsf/">XMPP Standards Foundation</a></dd><dt>Status</dt><dd><a href="https://xmpp.org/extensions/xep-0001.html#states-Experimental">Experimental</a></dd><dt>Type</dt><dd><a href="https://xmpp.org/extensions/xep-0001.html#types-Standards%20Track">Standards Track</a></dd><dt>Version</dt><dd>0.5.2</dd><dt>Last Updated</dt><dd>2021-07-02</dd><dt>Approving Body</dt><dd><a href="https://xmpp.org/council/">XMPP Council</a></dd><dt>Dependencies</dt><dd>XMPP Core, XMPP IM, <a href="xep-0004.html">XEP-0004</a>, <a href="xep-0030.html">XEP-0030</a>, <a href="xep-0054.html">XEP-0054</a>, <a href="xep-0060.html">XEP-0060</a>, <a href="xep-0084.html">XEP-0084</a>, <a href="xep-0128.html">XEP-0128</a>, <a href="xep-0198.html">XEP-0198</a>, <a href="xep-0292.html">XEP-0292</a>, <a href="xep-0297.html">XEP-0297</a>, <a href="xep-0313.html">XEP-0313</a>, <a href="xep-0372.html">XEP-0372</a>, <a href="xep-0369.html">XEP-0369</a>, <a href="xep-0403.html">XEP-0403</a>, <a href="xep-0404.html">XEP-0404</a></dd><dt>Supersedes</dt><dd>None</dd><dt>Superseded By</dt><dd>None</dd><dt>Short Name</dt><dd>MIX-PAM</dd><dt>Source Control</dt><dd><a class="standardsButton" href="https://github.com/xsf/xeps/blob/master/xep-0405.xml">HTML</a></dd></dl><p>
          This document in other formats:
          <a class="standardsButton" href="https://xmpp.org/extensions/xep-0405.xml">XML</a> 
          <a class="standardsButton" href="https://xmpp.org/extensions/xep-0405.pdf">PDF</a></p><h3 id="appendix-authorinfo">Appendix B: Author Information<a class="anchor-link" href="#appendix-authorinfo"><abbr title="Link to this point in the document">¶</abbr></a></h3><h5>Kevin Smith</h5><dl class="compact"><dt>Email</dt><dd><a href="mailto:kevin.smith@isode.com">kevin.smith@isode.com</a></dd><dt>JabberID</dt><dd><a href="xmpp:kevin.smith@isode.com">kevin.smith@isode.com</a></dd></dl><h5>Steve Kille</h5><dl class="compact"><dt>Email</dt><dd><a href="mailto:steve.kille@isode.com">steve.kille@isode.com</a></dd><dt>JabberID</dt><dd><a href="xmpp:steve.kille@isode.com">steve.kille@isode.com</a></dd></dl><h3 id="appendix-legal">Appendix C: Legal Notices<a class="anchor-link" href="#appendix-legal"><abbr title="Link to this point in the document">¶</abbr></a></h3><div class="indent"><h4>Copyright</h4><p>This XMPP Extension Protocol is copyright © 1999 – 2020 by the <a href="https://xmpp.org/">XMPP Standards Foundation</a> (XSF).</p><h4>Permissions</h4><p>Permission is hereby granted, free of charge, to any person obtaining a copy of this specification (the "Specification"), to make use of the Specification without restriction, including without limitation the rights to implement the Specification in a software program, deploy the Specification in a network service, and copy, modify, merge, publish, translate, distribute, sublicense, or sell copies of the Specification, and to permit persons to whom the Specification is furnished to do so, subject to the condition that the foregoing copyright notice and this permission notice shall be included in all copies or substantial portions of the Specification. Unless separate permission is granted, modified works that are redistributed shall not contain misleading information regarding the authors, title, number, or publisher of the Specification, and shall not claim endorsement of the modified works by the authors, any organization or project to which the authors belong, or the XMPP Standards Foundation.</p><h4>Disclaimer of Warranty</h4><p class="box info">## NOTE WELL: This Specification is provided on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or implied, including, without limitation, any warranties or conditions of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A PARTICULAR PURPOSE. ##</p><h4>Limitation of Liability</h4><p>In no event and under no legal theory, whether in tort (including negligence), contract, or otherwise, unless required by applicable law (such as deliberate and grossly negligent acts) or agreed to in writing, shall the XMPP Standards Foundation or any author of this Specification be liable for damages, including any direct, indirect, special, incidental, or consequential damages of any character arising from, out of, or in connection with the Specification or the implementation, deployment, or other use of the Specification (including but not limited to damages for loss of goodwill, work stoppage, computer failure or malfunction, or any and all other commercial damages or losses), even if the XMPP Standards Foundation or such author has been advised of the possibility of such damages.</p><h4>IPR Conformance</h4><p>This XMPP Extension Protocol has been contributed in full conformance with the XSF's Intellectual Property Rights Policy (a copy of which can be found at &lt;<a href="https://xmpp.org/about/xsf/ipr-policy">https://xmpp.org/about/xsf/ipr-policy</a>&gt; or obtained by writing to XMPP Standards Foundation, P.O. Box 787, Parker, CO 80134 USA).</p><h4>Visual Presentation</h4><p>The HTML representation (you are looking at) is maintained by the XSF. It is based on the <a href="http://yaml.de">YAML CSS Framework</a>, which is licensed under the terms of the <a href="https://creativecommons.org/licenses/by/2.0/">CC-BY-SA 2.0</a> license.</p></div><h3 id="appendix-xmpp">Appendix D: Relation to XMPP<a class="anchor-link" href="#appendix-xmpp"><abbr title="Link to this point in the document">¶</abbr></a></h3><p class="indent">The Extensible Messaging and Presence Protocol (XMPP) is defined in the XMPP Core (RFC 6120) and XMPP IM (RFC 6121) specifications contributed by the XMPP Standards Foundation to the Internet Standards Process, which is managed by the Internet Engineering Task Force in accordance with RFC 2026. Any protocol defined in this document has been developed outside the Internet Standards Process and is to be understood as an extension to XMPP rather than as an evolution, development, or modification of XMPP itself.</p><h3 id="appendix-discuss">Appendix E: Discussion Venue<a class="anchor-link" href="#appendix-discuss"><abbr title="Link to this point in the document">¶</abbr></a></h3><p class="indent">The primary venue for discussion of XMPP Extension Protocols is the &lt;<a href="https://mail.jabber.org/mailman/listinfo/standards">standards@xmpp.org</a>&gt; discussion list.</p><p class="indent">Discussion on other xmpp.org discussion lists might also be appropriate; see &lt;<a href="https://xmpp.org/about/discuss.shtml">https://xmpp.org/about/discuss.shtml</a>&gt; for a complete list.</p><p class="indent">Errata can be sent to &lt;<a href="mailto:editor@xmpp.org">editor@xmpp.org</a>&gt;.</p><h3 id="appendix-conformance">Appendix F: Requirements Conformance<a class="anchor-link" href="#appendix-conformance"><abbr title="Link to this point in the document">¶</abbr></a></h3><p class="indent">The following requirements keywords as used in this document are to be interpreted as described in <a href="https://www.ietf.org/rfc/rfc2119.txt">RFC 2119</a>: "MUST", "SHALL", "REQUIRED"; "MUST NOT", "SHALL NOT"; "SHOULD", "RECOMMENDED"; "SHOULD NOT", "NOT RECOMMENDED"; "MAY", "OPTIONAL".</p><h3 id="appendix-notes">Appendix G: Notes<a class="anchor-link" href="#appendix-notes"><abbr title="Link to this point in the document">¶</abbr></a></h3><div class="indent"><p><a name="nt-idm112">1</a>. XEP-0369: Mediated Information eXchange (MIX) &lt;<a href="https://xmpp.org/extensions/xep-0369.html">https://xmpp.org/extensions/xep-0369.html</a>&gt;.</p><p><a name="nt-idm116">2</a>. XEP-0403: Mediated Information eXchange (MIX): Presence Support. &lt;<a href="https://xmpp.org/extensions/xep-0403.html">https://xmpp.org/extensions/xep-0403.html</a>&gt;.</p><p><a name="nt-idm129">3</a>. RFC 6121: Extensible Messaging and Presence Protocol (XMPP): Instant Messaging and Presence &lt;<a href="http://tools.ietf.org/html/rfc6121">http://tools.ietf.org/html/rfc6121</a>&gt;.</p><p><a name="nt-idm135">4</a>. XEP-0376: Pubsub Account Management &lt;<a href="https://xmpp.org/extensions/xep-0376.html">https://xmpp.org/extensions/xep-0376.html</a>&gt;.</p><p><a name="nt-idm219">5</a>. XEP-0404: Mediated Information eXchange (MIX): JID Hidden Channels. &lt;<a href="https://xmpp.org/extensions/xep-0404.html">https://xmpp.org/extensions/xep-0404.html</a>&gt;.</p><p><a name="nt-idm225">6</a>. XEP-0084: User Avatar &lt;<a href="https://xmpp.org/extensions/xep-0084.html">https://xmpp.org/extensions/xep-0084.html</a>&gt;.</p><p><a name="nt-idm237">7</a>. XEP-0045: Multi-User Chat &lt;<a href="https://xmpp.org/extensions/xep-0045.html">https://xmpp.org/extensions/xep-0045.html</a>&gt;.</p><p><a name="nt-idm266">8</a>. XEP-0198: Stream Management &lt;<a href="https://xmpp.org/extensions/xep-0198.html">https://xmpp.org/extensions/xep-0198.html</a>&gt;.</p></div><h3 id="appendix-revs">Appendix H: Revision History<a class="anchor-link" href="#appendix-revs"><abbr title="Link to this point in the document">¶</abbr></a></h3><p>Note: Older versions of this specification might be available at <a href="https://xmpp.org/extensions/attic/">https://xmpp.org/extensions/attic/</a></p><ol class="revision-history"><li id="revision-history-v0.5.2"><div class="revision-head">Version 0.5.2 (2021-07-02)<a class="anchor-link" href="#revision-history-v0.5.2"><abbr title="Link to this point in the document">¶</abbr></a></div><p class="" style="">Fix wrong mix presence extension namespace in examples</p><div class="revision-author">lnj</div></li><li id="revision-history-v0.5.1"><div class="revision-head">Version 0.5.1 (2020-11-03)<a class="anchor-link" href="#revision-history-v0.5.1"><abbr title="Link to this point in the document">¶</abbr></a></div><p class="" style="">Fix various typos</p><div class="revision-author">gh/@melvo</div></li><li id="revision-history-v0.5.0"><div class="revision-head">Version 0.5.0 (2019-09-30)<a class="anchor-link" href="#revision-history-v0.5.0"><abbr title="Link to this point in the document">¶</abbr></a></div>
      Reference latest core (core:1);
      Bump namespace to pam:2;
    <div class="revision-author">sek</div></li><li id="revision-history-v0.4.1"><div class="revision-head">Version 0.4.1 (2019-04-30)<a class="anchor-link" href="#revision-history-v0.4.1"><abbr title="Link to this point in the document">¶</abbr></a></div>Fix typo in the #archive namespace<div class="revision-author">lnj</div></li><li id="revision-history-v0.4.0"><div class="revision-head">Version 0.4.0 (2019-03-19)<a class="anchor-link" href="#revision-history-v0.4.0"><abbr title="Link to this point in the document">¶</abbr></a></div>
      Make Archiving Optional;
      Bump namespace to pam:1;
    <div class="revision-author">sek</div></li><li id="revision-history-v0.3.1"><div class="revision-head">Version 0.3.1 (2019-01-13)<a class="anchor-link" href="#revision-history-v0.3.1"><abbr title="Link to this point in the document">¶</abbr></a></div>White space changes and XML syntax fixes<div class="revision-author">lnj (Editor: jsc)</div></li><li id="revision-history-v0.3.0"><div class="revision-head">Version 0.3.0 (2018-12-11)<a class="anchor-link" href="#revision-history-v0.3.0"><abbr title="Link to this point in the document">¶</abbr></a></div>
      Discovery on Account rather than Server;
      Add participant ID to roster;
    <div class="revision-author">sek</div></li><li id="revision-history-v0.2.1"><div class="revision-head">Version 0.2.1 (2018-11-03)<a class="anchor-link" href="#revision-history-v0.2.1"><abbr title="Link to this point in the document">¶</abbr></a></div>Fix a bunch of typos, batch-style.<div class="revision-author">pep</div></li><li id="revision-history-v0.2.0"><div class="revision-head">Version 0.2.0 (2018-06-06)<a class="anchor-link" href="#revision-history-v0.2.0"><abbr title="Link to this point in the document">¶</abbr></a></div><p class="" style="">
      Add section on Blocking;
    </p><div class="revision-author">sek</div></li><li id="revision-history-v0.1.1"><div class="revision-head">Version 0.1.1 (2018-06-05)<a class="anchor-link" href="#revision-history-v0.1.1"><abbr title="Link to this point in the document">¶</abbr></a></div><p class="" style="">
      Align to MIX-CORE and MIX-PRESENCE changes;
    </p><div class="revision-author">sek</div></li><li id="revision-history-v0.1.0"><div class="revision-head">Version 0.1.0 (2018-05-21)<a class="anchor-link" href="#revision-history-v0.1.0"><abbr title="Link to this point in the document">¶</abbr></a></div><p class="" style="">
      Split out from MIX 0.10.0;
    </p><div class="revision-author">sek</div></li></ol><h3 id="appendix-biblatex">Appendix I: Bib(La)TeX Entry</h3><pre>
@report{smith2018mix-pam,
  title = {Mediated Information eXchange (MIX): Participant Server Requirements},
  author = {Smith, Kevin and Kille, Steve},
  type = {XEP},
  number = {0405},
  version = {0.5.2},
  institution = {XMPP Standards Foundation},
  url = {https://xmpp.org/extensions/xep-0405.html},
  date = {2018-05-21/2021-07-02},
}</pre><p>END</p></body></html>
