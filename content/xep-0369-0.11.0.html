<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>XEP-0369: Mediated Information eXchange (MIX)</title><link rel="stylesheet" type="text/css" href="xmpp.css" /><link href="prettify.css" type="text/css" rel="stylesheet" /><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" /><script type="text/javascript" src="prettify.js"></script><meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=2.0" /><meta name="DC.Title" content="Mediated Information eXchange (MIX)" /><meta name="DC.Creator" content="Kevin Smith" /><meta name="DC.Creator" content="Steve Kille" /><meta name="DC.Description" content="This document defines Mediated Information eXchange (MIX), an XMPP protocol extension for the exchange of information among multiple users through a mediating service. The protocol can be used to provide human group communication and communication between non-human entities using channels, although with greater flexibility and extensibility than existing groupchat technologies such as Multi-User Chat (MUC).   MIX uses Publish-Subscribe to provide flexible access and publication, and uses Message Archive Management (MAM) to provide storage and archiving. " /><meta name="DC.Publisher" content="XMPP Standards Foundation" /><meta name="DC.Contributor" content="XMPP Extensions Editor" /><meta name="DC.Date" content="2018-05-21" /><meta name="DC.Type" content="XMPP Extension Protocol" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="XEP-0369" /><meta name="DC.Language" content="en" /><meta name="DC.Rights" content="This XMPP Extension Protocol is copyright &#xA9; 1999 &#x2013; 2018 by the XMPP Standards Foundation (XSF)." /></head><body onload="prettyPrint()"><h1>XEP-0369: Mediated Information eXchange (MIX)</h1><table><tr valign="top"><td><strong>Abstract:</strong></td><td>This document defines Mediated Information eXchange (MIX), an XMPP protocol extension for the exchange of information among multiple users through a mediating service. The protocol can be used to provide human group communication and communication between non-human entities using channels, although with greater flexibility and extensibility than existing groupchat technologies such as Multi-User Chat (MUC).   MIX uses Publish-Subscribe to provide flexible access and publication, and uses Message Archive Management (MAM) to provide storage and archiving. </td></tr><tr valign="top"><td><strong>Authors:</strong></td><td>Kevin Smith, Steve Kille</td></tr><tr valign="top"><td><strong>Copyright:</strong></td><td>© 1999 – 2017 XMPP Standards Foundation. <a href="#appendix-legal">SEE LEGAL NOTICES</a>.</td></tr><tr valign="top"><td><strong>Status:</strong></td><td>Experimental</td></tr><tr valign="top"><td><strong>Type:</strong></td><td>Standards Track</td></tr><tr valign="top"><td><strong>Version:</strong></td><td>0.11.0</td></tr><tr valign="top"><td><strong>Last Updated:</strong></td><td>2018-05-21</td></tr></table><hr /><p style="color:red">WARNING: This Standards-Track document is Experimental. Publication as an XMPP Extension Protocol does not imply approval of this proposal by the XMPP Standards Foundation. Implementation of the protocol described herein is encouraged in exploratory implementations, but production systems are advised to carefully consider whether it is appropriate to deploy implementations of this protocol before it advances to a status of Draft.</p><hr /><h2>Table of Contents</h2><div class="indent"><p><br />1.  <a href="#intro">Introduction</a><br />2.  <a href="#reqs">Requirements</a><br />3.  <a href="#family">MIX Specification Family</a><br />4.  <a href="#concepts">Concepts</a><br />   
      4.1.  <a href="#concepts-muc-comparison">Comparsion to MUC</a><br />   
      4.2.  <a href="#concepts-approach">Specification Appproach</a><br />   
      4.3.  <a href="#concepts-core">Core Concepts</a><br />   
      4.4.  <a href="#concepts-pubsub">MIX and PubSub</a><br />   
      4.5.  <a href="#concepts-mam">MIX and MAM</a><br />   
      4.6.  <a href="#proxy-jid">Proxy JIDs</a><br />   
      4.7.  <a href="#concepts-nodes">Standard Nodes</a><br />      
      4.7.1.  <a href="#node-archiving">Node Archiving</a><br />      
      4.7.2.  <a href="#messages-node">Messages Node</a><br />      
      4.7.3.  <a href="#participants-node">Participants Node</a><br />      
      4.7.4.  <a href="#info-node">Information Node</a><br />   
      4.8.  <a href="#non-standard-nodes">Non-Standard Nodes</a><br />5.  <a href="#error-handling">Error Handling</a><br />6.  <a href="#discovery">Discovery</a><br />   
      6.1.  <a href="#disco-service">Discovering a MIX service</a><br />   
      6.2.  <a href="#disco-channel-list">Discovering the Channels on a Service</a><br />   
      6.3.  <a href="#disco-channel-info">Discovering Channel Information</a><br />   
      6.4.  <a href="#disco-channel-nodes">Discovering Nodes at a Channel</a><br />   
      6.5.  <a href="#find-channel-info">Determining Information about a Channel</a><br />   
      6.6.  <a href="#find-channel-participants">Determining the Participants in a Channel</a><br />   
      6.7.  <a href="#mix-client-discovery">Discovering Client MIX Capability</a><br />7.  <a href="#usecases">Use Cases</a><br />   
      7.1.  <a href="#usecases-user">Common User Use Cases</a><br />      
      7.1.1.  <a href="#usecase-jl-model">Model for Join and Leave</a><br />      
      7.1.2.  <a href="#usecase-user-join">Joining a Channel</a><br />      
      7.1.3.  <a href="#usecase-user-leaving">Leaving a Channel</a><br />      
      7.1.4.  <a href="#usecase-setting-nick">Setting a Nick</a><br />      
      7.1.5.  <a href="#usecase-sync-history">Coming Online: Synchronizing Message History</a><br />      
      7.1.6.  <a href="#usecase-user-message">Sending a Message</a><br />   
      7.2.  <a href="#use-mam">Use of MAM</a><br />      
      7.2.1.  <a href="#use-mam-messages">Archive of Messages</a><br />      
      7.2.2.  <a href="#use-mam-retrieve">Retrieving Messages</a><br />      
      7.2.3.  <a href="#use-mam-other-nodes">MAM Use with other Channel Nodes</a><br />   
      7.3.  <a href="#usecases-admin">Administrative Use Cases</a><br />      
      7.3.1.  <a href="#usecase-admin-check-create">Checking For Permission To Create a Channel</a><br />      
      7.3.2.  <a href="#usecase-admin-create">Creating a Channel</a><br />      
      7.3.3.  <a href="#usecase-admin-create-adhoc">Creating a Channel for Ad Hoc Use</a><br />      
      7.3.4.  <a href="#usecase-admin-destroy">Destroying a Channel</a><br />      
      7.3.5.  <a href="#usecase-server-destroy">Server Destroying a Channel</a><br />8.  <a href="#not-included-from45">Capabilities not provided in MIX</a><br />   
      8.1.  <a href="#password-control">Password Controlled Channels</a><br />   
      8.2.  <a href="#voice-control">Voice Control</a><br />   
      8.3.  <a href="#not-subject">Subject</a><br />9.  <a href="#i18n">Internationalization Considerations</a><br />10.  <a href="#security">Security Considerations</a><br />11.  <a href="#iana">IANA Considerations</a><br />12.  <a href="#registrar">XMPP Registrar Considerations</a><br />13.  <a href="#schema">XML Schema</a><br />14.  <a href="#ack">Acknowledgements</a></p><p><a href="#appendices">Appendices</a><br />    <a href="#appendix-docinfo">A: Document Information</a><br />    <a href="#appendix-authorinfo">B: Author Information</a><br />    <a href="#appendix-legal">C: Legal Notices</a><br />    <a href="#appendix-xmpp">D: Relation to XMPP</a><br />    <a href="#appendix-discuss">E: Discussion Venue</a><br />    <a href="#appendix-conformance">F: Requirements Conformance</a><br />    <a href="#appendix-notes">G: Notes</a><br />    <a href="#appendix-revs">H: Revision History</a></p></div><hr /><h2>1.
       <a name="intro" id="intro">Introduction</a></h2>
  <p class="" style="">The Mediated Information eXchange (MIX) protocol is intended as a replacement for Multi-User Chat (MUC). MUC is a major application of XMPP that was developed in 2002 and standardized in <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0045.html">Multi-User Chat (XEP-0045)</a></span>  [<a href="#nt-idm241">1</a>]. MIX implements the same basic MUC patterns in a more flexible and extensible way in order to address requirements that have emerged since MUC was developed. MIX supports all of the core chatroom features that are familiar from MUC, such as discussion topics and invitations. Like MUC, it also defines a strong access control model, including the ability to ban users, to name administrators, and to provide controls as to which users can participate in channels.</p>
  <p class="" style="">Several reasons exist for replacing MUC:</p>
  <ul class="" style="">
    <li class="" style="">A number of use cases for group communication have emerged since MUC was first published.</li>
    <li class="" style="">Experience has shown that it is difficult to use MUC to build several kinds of communication applications (such as a multimedia conference) without undesirable adaptations.</li>
    <li class="" style="">It is impractical to address a number of the requirements listed in the next section with MUC or with extensions to MUC. </li>
    <li class="" style="">In the years after MUC was designed, both <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0060.html">Publish-Subscribe (XEP-0060)</a></span>  [<a href="#nt-idm251">2</a>] and <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0313.html">Message Archive Management (XEP-0313)</a></span>  [<a href="#nt-idm255">3</a>] have been developed and it is desirable to reuse these building blocks (e.g., MAM can be used for message history) rather than using the less robust methods defined in <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0045.html">Multi-User Chat (XEP-0045)</a></span>  [<a href="#nt-idm241">1</a>].</li>
  </ul>
  <p class="" style="">Because it is anticipated that there will be significant co-existence between MUC and MIX, this specification is designed so that:</p>
  <ul class="" style="">
    <li class="" style="">XMPP clients can implement MUC and this specification in a way that provides a coherent user experience.</li>
    <li class="" style="">XMPP servers can implement this specification and also provide a MUC interface in order to support clients that only implement MUC.</li>
  </ul>
  <p class="" style="">This specification gives guidance on supporting both MUC and MIX representations of chatrooms.</p>
<h2>2.
       <a name="reqs" id="reqs">Requirements</a></h2>

<p class="" style="">The following requirements have been identified, which MIX aims to address.</p>
  <ol start="" class="" style="">
    <li class="" style="">A user's participation in a channel persists and is not modified by the user's client going online and offline.</li>
    <li class="" style="">Multiple devices associated with the same account can share the same nick in the channel, with well-defined rules making each client individually addressable.</li>
    <li class="" style="">Channels are NOT REQUIRED to support or reflect presence for participants.</li>
    <li class="" style="">A reconnecting client can quickly resync with respect to messages and presence.</li>
    <li class="" style="">A user MAY (subject to configuration) receive messages from a channel as an invisible observer.</li>
    <li class="" style="">Configuration can be observed externally to the channel (e.g., list of participants, access control rights, etc.).</li>
    <li class="" style="">MIX services SHOULD provide mechanisms to prevent JIDs from being harvested.</li>
    <li class="" style="">MIX and Message Archive Management (MAM) MUST work well together.</li>
    <li class="" style="">A user can determine which channels they participate in.</li>
    <li class="" style="">Provide extensibility regarding data formats that can be sent within a channel (files, structured data, indications about media sources in multimedia conferences, etc.) as well as flexibility regarding which data formats a user wants to receive.</li>
    <li class="" style="">Enable federation of a channel across multiple servers, to provide a service equivalent to "federated MUC" <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0289.html">Federated MUC for Constrained Environments (XEP-0289)</a></span>  [<a href="#nt-idm282">4</a>].</li>
    <li class="" style="">Enable sharing of messages on a channel without requiring sharing of presence.</li>
    <li class="" style="">Enable sharing of presence without requiring message sending.</li>
    <li class="" style="">(Desirable) Make it easier to reduce duplicate traffic.</li>
    <li class="" style="">MIX should be suitable for use by humans and as a building block for other clients.</li>
 </ol>
<h2>3.
       <a name="family" id="family">MIX Specification Family</a></h2>
  <p class="" style="">MIX is specified as a family of XEPs that address the full set of requirements.   Only two of these XEPs are mandatory for providing a MIX service.  The others provide additional services and are used when these additional services are required.  Each of these specifications has a short name, which is used to refer the specific XEP.  The term MIX is used to refer to the family of XEPs.   MIX is extensible, and it is anticipated that further XEPs will be added to this family.   The XEPs are:  </p>

  <ol start="" class="" style="">
    <li class="" style="">MIX-CORE.  <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0369.html">Mediated Information eXchange (MIX) (XEP-0369)</a></span>  [<a href="#nt-idm294">5</a>].  This specification, which is the central mandatory MIX specification.  This sets out requirements addressed by MIX and general MIX concepts and framework.   It defines joining channels and associated participant management.  It defines discovery and sharing of MIX channels and information about them.   It defines use of MIX to share messages with channel participants. </li>
    <li class="" style="">MIX-PRESENCE. <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0403.html">Mediated Information eXchange (MIX): Presence Support. (XEP-0403)</a></span>  [<a href="#nt-idm299">6</a>]. This optional specification adds the ability for MIX online clients to share presence, so that this can be seen by other MIX clients.</li>
    <li class="" style="">MIX-PAM.  <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0405.html">Mediated Information eXchange (MIX): Participant Server Requirements (XEP-0405)</a></span>  [<a href="#nt-idm304">7</a>]. This mandatory specification defines how a server supporting MIX clients behaves, to support servers implementing MIX-CORE and MIX-PRESENCE.</li>
    <li class="" style="">MIX-ADMIN. <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0406.html">Mediated Information eXchange (MIX): MIX Administration (XEP-0406)</a></span>  [<a href="#nt-idm309">8</a>].  This specifies MIX configuration and administration of MIX.</li>
    <li class="" style="">MIX-ANON.  <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0404.html">Mediated Information eXchange (MIX): JID Hidden Channels. (XEP-0404)</a></span>  [<a href="#nt-idm314">9</a>]. This specifies a mechanism to hide real JIDs from MIX clients and related privacy controls. </li>
    <li class="" style="">MIX-MISC.  <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0407.html">Mediated Information eXchange (MIX): Miscellaneous Capabilities (XEP-0407)</a></span>  [<a href="#nt-idm319">10</a>]. This specifies a number of small MIX capabilities which are useful but do not need to be a part of MIX-CORE. </li>
    <li class="" style="">MIX-MUC. <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0408.html">Mediated Information eXchange (MIX): Co-existence with MUC (XEP-0408)</a></span>  [<a href="#nt-idm324">11</a>]. This defines how MIX and MUC can be used together. </li>
    <li class="" style="">RELIABLE-DELIVERY.  MIX-CORE needs messages to be distributed without loss.   This specification is important for MIX, but may be useful in other places.</li>
  </ol>
<h2>4.
       <a name="concepts" id="concepts">Concepts</a></h2>
  <div class="indent"><h3>4.1 <a name="concepts-muc-comparison" id="concepts-muc-comparison">Comparsion to MUC</a></h3>
    <p class="" style="">
      This  section is written as an introduction to MIX for those with detailed knowledge of <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0045.html">Multi-User Chat (XEP-0045)</a></span>  [<a href="#nt-idm241">1</a>], to summarize key differences and some rationale for the differences.   For those unfamiliar with MUC, this section should be ignored.
    </p>
    <p class="" style="">
      In MUC, a client joins a MUC room.   After this, the client is sent history information, presences, and messages until the client leaves the room by going offline.  Key MIX features as summarized below:
    </p>
    <ol start="" class="" style="">
      <li class="" style="">MIX has "channels", which are equivalent to MUC rooms.</li>

      <li class="" style="">MIX separates out various services, in particular messages and presence.   A MUC channel is implemented as a set of PubSub nodes, and a user (not client) can subscribe to a set of nodes.  This control means that users can subscribe to presence and/or messages, which gives useful flexibility.  This addresses requirements 3 and 5.  Subscribing to message and presence nodes gives a service broadly equivalent to MUC.</li>

      <li class="" style="">Messages and presence sent by a MIX channel use the same formats as MUC and do not use PubSub encodings.</li>

      <li class="" style="">Channels do not have a "subject".  This MUC capability is not supported by core MIX.</li>

      <li class="" style="">Users join MIX channels for an extended period and participation is not impacted by clients going online and offline (requirement 1).   This means that a MIX client uses channel subscriptions as negotiated by the MIX user.</li>

      <li class="" style="">MIX messages and presence are always sent and are addressed to the user (bare JID).   This addressing is a consequence of users (not clients) being the participants in a MIX channel; It is a key difference between MUC and MIX.  This addressing change means that the user's server needs to have MIX-specific behaviour to correctly distribute arriving messages and presence appropriately to MIX clients; there may be zero or more online clients that support MIX.   This server behaviour is specified by MIX. </li>

      <li class="" style="">MIX messages are archived using MAM on the user's server.   This enables flexible access to channel history, independent of the MIX channel server. </li>

      <li class="" style="">A user's roster contains the MIX channels to which the user is subscribed.   A client can use a MIX roster extension to determine which MIX channels the user is subscribed to.   When a client comes online, this will lead to directed presence for the client to be sent to each MIX channel.   A MIX channel can then share the user's presence with channel participants that have subscribed to the presence.    The MIX channel will also return to the client a full list of presence information for the channel.   This means that when a client comes online, it will receive presence updates for the participants in all subscribed MIX channels.</li>

      <li class="" style="">In MIX, a Nick belongs to the user and not to each client.</li>

      <li class="" style="">
        Presence is exchanged in MIX by use of a proxy JID, which is a stable JID on the domain of the MUC channel that identifies the user.  This proxy JID is used instead of the "Nick as a Resource" mechanism in MUC.   To support this, the proxy JID is a primary part of defining a MIX channel participant.   Proxy JIDs are also used in MIX-ANON to provide a "JID Hidden" mechanism, to give a service similar to MUC semi-anonymous, that will prevent JID harvesting (requirement 7).
      </li>


    </ol>
  </div>

  <div class="indent"><h3>4.2 <a name="concepts-approach" id="concepts-approach">Specification Appproach</a></h3>
    <p class="" style="">
      MIX will enable a wide range of auxiliary services.  The goal of the MIX family of specification is to set out the core capabilities needed for MIX.   It is anticipated that additional XEPs will be written to extend the current MIX specification, and the  MIX specification family notes some areas where this may happen.     Profiles referencing sets of related MIX XEPs may be developed in the future.
    </p>
  </div>
  <div class="indent"><h3>4.3 <a name="concepts-core" id="concepts-core">Core Concepts</a></h3>
  <p class="" style="">The following concepts underlie the design of MIX.</p>
  <ol start="" class="" style="">
    <li class="" style="">MIX channels (roughly equivalent to MUC rooms) are hosted on one or more MIX domains, (examples: 'mix.example.com'; 'conference.example.com'; 'talk.example.com'), which are discoverable through <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0030.html">Service Discovery (XEP-0030)</a></span>  [<a href="#nt-idm354">12</a>]. Each channel on a MIX service can then be discovered and queried.</li>
    <li class="" style=""> In MIX each channel (e.g., 'channel@mix.example.com') is a specialized pubsub service. This is based on the model from <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0163.html">Personal Eventing Protocol (XEP-0163)</a></span>  [<a href="#nt-idm359">13</a>] where every user JID (e.g., 'user@example.com') is its own pubsub service. </li>
    <li class="" style="">A channel's pubsub service contains a number of nodes for different event types or data formats. As described below, this document defines several standard nodes; however, future specifications or proprietary services can define their own nodes for extensibility.</li>
    <li class="" style="">Affiliations with the nodes are managed by the MIX service by channel level operations, so that the user does not have to separately manage affiliations with the individual PubSub nodes.
     </li>
    <li class="" style=""><span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0313.html">Message Archive Management (XEP-0313)</a></span>  [<a href="#nt-idm255">3</a>] (MAM) is used for all history access, with each node being individually addressable for MAM queries. This simplifies implementation compared to MUC (which had a specialized and rather limited history retrieval mechanism).</li>
    <li class="" style="">A client can achieve a 'quick resync' of a node by requesting just those changes it has not yet received, using standard MAM protocol. This solves the MUC issue of either receiving duplicate messages when rejoining a room or potentially missing messages.</li>
    <li class="" style="">Because MAM is used for history, only those nodes that have a 'current value' need to store any items in them — e.g., 'urn:xmpp:mix:nodes:presence' and 'urn:xmpp:mix:nodes:information' would store their current values (with older values being queryable through MAM), while 'urn:xmpp:mix:nodes:messages' would store no items.</li>
    <li class="" style="">A user's participation in a channel outlives their client sessions. A client which is offline will not share presence within the channel, but the associated user will still be listed as an participant. </li>
    <li class="" style="">Presence is sent to participants using bare JID, whether or not the user has an online client. </li>
    <li class="" style="">Online clients MAY register presence, which is then shared with participants who have subscribed to presence.</li>
    <li class="" style="">MIX decouples addressing of channel participants from their nicknames, so that nickname changes do not affect addressing.</li>
    <li class="" style="">Each participant is addressable by a single bare JID, which is a proxy JID (not the user's real JID) to make it straightforward to hide the user's real JID from other channel participants. Full JIDs comprised of this bare JID plus a resource (also anonymized) are then constructed, allowing visibility into the number of online resources participating in a channel.</li>
    <li class="" style=""> Although some protocol is shared with MUC, MUC clients are not interoperable with a MIX service. </li>
    <li class="" style="">MIX requires the server to which the MIX client connects to provide functionality to support MIX.  This functionality is defined in this specification and referenced as "MIX Participant's Server Behaviour".</li>
    <li class="" style="">MIX domains MUST NOT be used to host end user JIDs. </li>
  </ol>
  </div>
  <div class="indent"><h3>4.4 <a name="concepts-pubsub" id="concepts-pubsub">MIX and PubSub</a></h3>
    <p class="" style="">MIX is based upon domains providing a MIX service, such as 'mix.shakespeare.example'. Note that although PubSub communication is used, a domain used for MIX is a MIX domain and not a standard <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0060.html">Publish-Subscribe (XEP-0060)</a></span>  [<a href="#nt-idm251">2</a>] domain. Like MUC, there is no requirement on the naming of these domains; the label 'mix' used in examples in this specification and the fact that it is a subdomain of a 'shakespeare.example' service are purely for example.</p>
    <p class="" style="">Every MIX channel is an addressable  service based on PubSub (with additional MIX semantics) that will be addressed using a bare JID by other XMPP entities, for example coven@mix.shakespeare.example. While <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0060.html">Publish-Subscribe (XEP-0060)</a></span>  [<a href="#nt-idm251">2</a>] is used as the basis for the MIX model, MIX uses standard presence and groupchat messages to provide an interface to the MIX service that does not expose PubSub protocol for many of the more common functions.
</p>
  </div>
  <div class="indent"><h3>4.5 <a name="concepts-mam" id="concepts-mam">MIX and MAM</a></h3>
    <p class="" style=""> Historical data (such as the messages sent to the channel) is stored in an archive supporting  Message Archive Management (MAM) so that clients can subsequently access this data with MAM. Each node can be archived separately (e.g., the presence node or the configuration node).  MIX messages are archived by both the MIX channel and the user's server, so that clients can generally use their local MAM archiver.  MIX clients can retrieve archived information with MAM in order to quickly resync messages with regard to a channel, and can do so without providing presence information.</p>
  </div>



  <div class="indent"><h3>4.6 <a name="proxy-jid" id="proxy-jid">Proxy JIDs</a></h3>

 <p class="" style="">
   The primary representation of a participant in a MIX channel is a proxy JID, which is an anonymized JID using the same domain as the channel and includes and encoding of the name of the channel and a random identifier.   The primary reason for proxy JID is to support presence, as presence messages need to be sent from the domain of the MIX channel.  MUC achieves this by using the resource to encode Nick, which does not work well.   Proxy JIDs enable Nick changing and support of multiple clients (as the client resource can be shared).   MIX provides a simple mechanism for clients to map the proxy JID to Nick and Real Jid, so that these are available to the MIX user.  Proxy JIDs are also used to provide the "JID Hidden" mechanism, specified in MIX-ANON.

 </p>
    <p class="" style="">
      Proxy JIDs are encoded, using the format "&lt;generated identifier&gt;#&lt;channel&gt;@&lt;mix domain&gt;".  The generated identifier MUST NOT contain the '#', '/' or '@' characters.  The Channel name MAY contain the '#' character.   For example in the channel 'coven@mix.shakespeare.example',   the user 'hag66@shakespeare.example' might have a proxy JID of '123456#coven@mix.shakespeare.example'.      Servers and clients MUST determine that a JID is a proxy JID from context and MUST NOT infer that a JID is a proxy JID because it contains the '#' character.
    </p>
    <p class="" style="">
      The mapping of real bare JID to proxy JID is defined when a participant joins a channel.  While a user is a participant in a Channel, the mapping between real JID and proxy JID MUST NOT be changed.   This mapping must be maintained after the user leaves the channel.   Proxy JID values MUST NOT be re-used.   If a JID that left a channel joins the channel again, the same proxy JID MAY be used again or a different new proxy JID MAY be assigned.
    </p>



  </div>
  <div class="indent"><h3>4.7 <a name="concepts-nodes" id="concepts-nodes">Standard Nodes</a></h3>
    <p class="" style="">MIX defines a number standard nodes, and this specification defines three of these nodes and the framework for adding further nodes.
    </p>
    <div class="indent"><p class="caption"><a name="table-1" id="table-1"></a>Table 1: MIX-CORE Nodes</p><table border="1" cellpadding="3" cellspacing="0">
      <tr class="body"><th colspan="" rowspan="">Name</th><th colspan="" rowspan="">Node</th><th colspan="" rowspan="">Description</th><th colspan="" rowspan="">Update</th><th colspan="" rowspan="">Distribution</th></tr>
      <tr class="body"><td align="" colspan="" rowspan="">Messages</td><td align="" colspan="" rowspan="">'urn:xmpp:mix:nodes:messages'</td><td align="" colspan="" rowspan="">For distributing messages to the channel. Each item of this node will contain a message sent to the channel.</td><td align="" colspan="" rowspan="">Message</td><td align="" colspan="" rowspan="">Message</td></tr>
      <tr class="body"><td align="" colspan="" rowspan="">Participants</td><td align="" colspan="" rowspan="">'urn:xmpp:mix:nodes:participants'</td><td align="" colspan="" rowspan="">For storing the list of participants and the associated nick.  Channel participants are added when they join the channel and removed when they leave </td><td align="" colspan="" rowspan="">Join/Leave/Set Nick</td><td align="" colspan="" rowspan="">PubSub</td></tr>

      <tr class="body"><td align="" colspan="" rowspan="">Information</td><td align="" colspan="" rowspan="">'urn:xmpp:mix:nodes:info'</td><td align="" colspan="" rowspan="">For storing general channel information, such as description. </td><td align="" colspan="" rowspan="">PubSub</td><td align="" colspan="" rowspan="">PubSub</td></tr>

    </table></div>
    <p class="" style="">
      Participants is the only mandatory MIX node for a channel, which defines the set of clients that have joined the channel.   All other nodes are OPTIONAL.

      MIX provides mechanisms to allow users to conveniently subscribe to a chosen set of nodes and to unsubscribe to all nodes with a single operation.  Some nodes are accessed and managed with PubSub, whereas other nodes define MIX specific mechanisms for their use, as shown in the last two columns of the table.
    </p>



    <div class="indent"><h3>4.7.1 <a name="node-archiving" id="node-archiving">Node Archiving</a></h3>
      <p class="" style="">
        Nodes MAY be archived and where this is done MAM MUST be used.  Archiving of the Messages node MUST be done as part of the MIX-CORE specification.  Archiving of other nodes is OPTIONAL.
      </p>
    </div>
    <div class="indent"><h3>4.7.2 <a name="messages-node" id="messages-node">Messages Node</a></h3>
      <p class="" style="">
        The Messages node is used to distribute messages.   The Messages node is a transient node and so no PubSub items are held.  Messages MUST go to the associated MAM archive and history is retrieved by use of  MAM. Users subscribe to this node to indicate that messages from the channel are to be sent to them.   Private Messages are not distributed by the Messages node.

      </p>

    </div>

    <div class="indent"><h3>4.7.3 <a name="participants-node" id="participants-node">Participants Node</a></h3>
      <p class="" style="">Each channel participant is represented as an item of the 'urn:xmpp:mix:nodes:participants' channel node.  Each item is named by the bare proxy JID of the participant. For example '123456#coven@mix.shakespeare.example' might name the node item associated with participant 'hag66@shakespeare.example'.  Information is stored in a &lt;participant/&gt; element qualified by the 'urn:xmpp:mix:core:0' namespace.   The nick associated with the user is optional and is stored in a &lt;nick/&gt; child element of the &lt;participant/&gt; element.   The nick for each channel participant MUST be different to the nick of other participants.
      </p>
      <p class="" style="">
       A Nick MAY be associated with a participant.  The nick associated with the user is stored in a &lt;nick/&gt; child element of the &lt;participant/&gt; element.   The nick for each channel participant MUST be different to the nick of other participants.
      </p>
      <p class="" style="">
        The real JID of the user MAY be held in the participants node.   When the real JID is not present, the procedures defined in MIX-ANON must be followed.
        The user's JID is stored in a &lt;jid/&gt; child element of the &lt;participant/&gt; element.
      </p>
      <p class="" style="">
        When a user joins a channel, the user's bare proxy JID is added to the participants node by the MIX service.   When a user leaves a channel, the user's bare proxy JID is removed from the participants node.  The participants node MUST NOT be directly modified using pubsub.
      </p>
      <p class="" style="">
        Clients will need to read the Participants node to provide useful display of presence information.  For this reason, it is anticipated that Participants will be able to read the Participants node.   However, for the message distribution specified in MIX-CORE, it is not necessary for clients to be able to read the Participants node.
      </p>
      <p class="" style="">
        Users MAY subscribe to and read information this node, when permitted by the channel.  Standard PubSub access will allow a full list of participants and associated nicks to be determined.  By subscribing to the node, a user will be informed of changes to the Participants Node.
      </p>
      <p class="" style="">The participants node is OPTIONAL.  If the Participants Node is not used, information on channel participants is not shared.  If there is no participants node, the access control value 'participants' MUST NOT be used.   The Participants node is a permanent node with one item per participant.</p>
      <p class="caption"><a name="example-1" id="example-1"></a>Example 1. Value of Participants Node</p><div class="indent"><pre class="prettyprint">
&lt;items node='urn:xmpp:mix:nodes:participants'&gt;
  &lt;item id='123456#coven@mix.shakespeare.example'&gt;
    &lt;participant xmlns='urn:xmpp:mix:core:0'&gt;
        &lt;nick&gt;thirdwitch&lt;/nick&gt;
        &lt;jid&gt;hag66@shakespeare.example&lt;/jid&gt;
    &lt;/participant&gt;
  &lt;/item&gt;
&lt;/items&gt;
</pre></div>
    </div>
    <div class="indent"><h3>4.7.4 <a name="info-node" id="info-node">Information Node</a></h3>

      <p class="" style="">The Information node holds information about the channel.  It will often be helpful for MIX clients to be able to display this information.   The information node contains a single item with the current information.
        The information node is named by the date/time at which the item was created.   The information node is accessed and managed using standard pubsub.   The Information node is a permanent node with a maximum of one item.  Users MAY subscribe to this node to receive information updates. The Information node item MAY contain the following attributes, each of which is OPTIONAL:
      </p>
      <div class="indent"><p class="caption"><a name="table-2" id="table-2"></a>Table 2: Information Node Attributes</p><table border="1" cellpadding="3" cellspacing="0">
        <tr class="body"><th colspan="" rowspan="">Name</th><th colspan="" rowspan="">Description</th><th colspan="" rowspan="">Field Type</th><th colspan="" rowspan="">Values</th><th colspan="" rowspan="">Default</th></tr>
        <tr class="body"><td align="" colspan="" rowspan="">'Name'</td><td align="" colspan="" rowspan="">A short string providing a name for the channel.  For example "The Coven".  Typical uses of this value will be to present a user with the name of this channel in a list of channels to select from or as the header of UI display of the channel.  It is intended for use where a short string is needed to represent the channel.</td><td align="" colspan="" rowspan="">text-single</td><td align="" colspan="" rowspan="">-</td><td align="" colspan="" rowspan="">-</td></tr>
        <tr class="body"><td align="" colspan="" rowspan="">'Description'</td><td align="" colspan="" rowspan="">A longer description of the channel. For example "The Place where the Macbeth Witches Meet up".   A typical use would be to provide a user with more information about the channel, for example in a tool tip.</td><td align="" colspan="" rowspan="">text-single</td><td align="" colspan="" rowspan="">-</td><td align="" colspan="" rowspan="">-</td></tr>
        <tr class="body"><td align="" colspan="" rowspan="">'Contact'</td><td align="" colspan="" rowspan="">The JID or JIDs of the person or role responsible for the channel.</td><td align="" colspan="" rowspan="">jid-multi</td><td align="" colspan="" rowspan="">-</td><td align="" colspan="" rowspan="">-</td></tr>

      </table></div>
      <p class="" style="">
        Name and Description of the channel apply to the whole channel and will usually be changed infrequently.
      </p>
      <p class="" style="">
        JID visibility is included in the Information Node as this is information that will be useful for participant clients and may also be important when choosing to join a channel.
      </p>
      <p class="" style="">The name and description values MUST contain a "text" element and MAY contain additional text elements. Where multiple text elements are provided, each MUST posses an xml:lang attribute that describes the natural language of the element.  The format of the Information node follows <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0004.html">Data Forms (XEP-0004)</a></span>  [<a href="#nt-idm468">14</a>].  This allows configuration to be updated by MIX defined commands and that the results of update commands are the same as the PubSub node.
      The following example shows the format of a item in the information node for the example coven@mix.shakespeare.example channel.
      </p>
      <p class="caption"><a name="example-2" id="example-2"></a>Example 2. Information Node</p><div class="indent"><pre class="prettyprint">
&lt;items node='urn:xmpp:mix:nodes:info'&gt;
  &lt;item id='2016-05-30T09:00:00'&gt;
    &lt;x xmlns='jabber:x:data' type='result'&gt;
      &lt;field var='FORM_TYPE' type='hidden'&gt;
        &lt;value&gt;urn:xmpp:mix:core:0&lt;/value&gt;
      &lt;/field&gt;
      &lt;field var='Name'&gt;
        &lt;value&gt;Witches Coven&lt;/value&gt;
      &lt;/field&gt;
      &lt;field var='Description'&gt;
        &lt;value&gt;A location not far from the blasted heath where
               the three witches meet&lt;/value&gt;
      &lt;/field&gt;
      &lt;field var='Contact'&gt;
        &lt;value&gt;greymalkin@shakespeare.example&lt;/value&gt;
      &lt;/field&gt;
    &lt;/x&gt;
  &lt;/item&gt;
&lt;/items&gt;
</pre></div>
    </div>
  </div>
  <div class="indent"><h3>4.8 <a name="non-standard-nodes" id="non-standard-nodes">Non-Standard Nodes</a></h3>
    <p class="" style="">
      The MIX standard allows channels to use non-standard nodes, using names that do not conflict with the standard nodes.     Non-Standard nodes MUST NOT duplicate or otherwise provide capability that can be provided by standard nodes.
    </p>
  </div>
<h2>5.
       <a name="error-handling" id="error-handling">Error Handling</a></h2>
  <p class="" style="">
    The MIX specification is built on layered services that have defined errors.  This enables the core MIX specification to reflect primarily the successful use case, as in almost all cases the error reporting of the layer service provides what is needed.   A message sender MUST be prepared to handle any valid error from the layer services.   When a message receiver encounters an error situation, it MUST use the most appropriate layer server error to report this issue back to the sender.   For example a  receiving entity might use the "not authorized"  error in response to a  disco query that is not authorized.   Errors for the following layer services need to be handled for MIX:
  </p>
  <ol start="" class="" style="">
    <li class="" style="">IQ.  All of the IQ errors of <span class="ref" style=""><a href="http://tools.ietf.org/html/rfc6120">RFC 6120</a></span>  [<a href="#nt-idm479">15</a>] MUST be supported.</li>
    <li class="" style="">Messages.  If a message is received and an error situation is encountered, a message of type error MUST be sent back to the message sender. This message format is specified in <span class="ref" style=""><a href="http://tools.ietf.org/html/rfc6121">RFC 6121</a></span>  [<a href="#nt-idm484">16</a>] containing an error defined in <span class="ref" style=""><a href="http://tools.ietf.org/html/rfc6120">RFC 6120</a></span>  [<a href="#nt-idm479">15</a>], which is the same error set as for IQs.</li>
    <li class="" style="">Presence.  Any responses to presence messages MUST follow the rules of <span class="ref" style=""><a href="http://tools.ietf.org/html/rfc6121">RFC 6121</a></span>  [<a href="#nt-idm484">16</a>].</li>
    <li class="" style="">PubSub.  Where MIX protocol messages use PubSub protocol, the errors defined in <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0060.html">Publish-Subscribe (XEP-0060)</a></span>  [<a href="#nt-idm251">2</a>] MUST be used and supported.</li>
  </ol>
<h2>6.
       <a name="discovery" id="discovery">Discovery</a></h2>
  <div class="indent"><h3>6.1 <a name="disco-service" id="disco-service">Discovering a MIX service</a></h3>
    <p class="" style="">
      An entity MAY discover a MIX service or MIX services by sending a Service Discovery items ("disco#items") request to its own server.
    </p>
    <p class="caption"><a name="example-3" id="example-3"></a>Example 3. Entity queries Server for associated services</p><div class="indent"><pre class="prettyprint">
&lt;iq from='hag66@shakespeare.example/UUID-c8y/1573'
    id='lx09df27'
    to='shakespeare.example'
    type='get'&gt;
  &lt;query xmlns='http://jabber.org/protocol/disco#items'/&gt;
&lt;/iq&gt;

&lt;iq from='shakespeare.example'
    id='lx09df27'
    to='hag66@shakespeare.example/UUID-c8y/1573'
    type='result'&gt;
  &lt;query xmlns='http://jabber.org/protocol/disco#items'&gt;
    &lt;item jid='mix.shakespeare.example'
          name='Shakespearean Chat Service'/&gt;
    &lt;item jid='mix2.shakespeare.example'
          name='Another Shakespearean Chat Service'/&gt;
  &lt;/query&gt;
&lt;/iq&gt;
</pre></div>
    <p class="" style="">To determine if a domain hosts a MIX service, a <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0030.html">Service Discovery (XEP-0030)</a></span>  [<a href="#nt-idm354">12</a>] info query is sent in the usual manner to determine capabilities.</p>
      <p class="caption"><a name="example-4" id="example-4"></a>Example 4. Entity queries a service</p><div class="indent"><pre class="prettyprint">
&lt;iq from='hag66@shakespeare.example/UUID-c8y/1573'
    id='lx09df27'
    to='mix.shakespeare.example'
    type='get'&gt;
  &lt;query xmlns='http://jabber.org/protocol/disco#info'/&gt;
&lt;/iq&gt;
</pre></div>
    <p class="" style="">The MIX service then MUST return its identity and the features it supports, which MUST include the 'urn:xmpp:mix:core:0' feature, and the identity MUST have a category of 'conference' and a type of 'text', as shown in the following example: </p>
    <p class="caption"><a name="example-5" id="example-5"></a>Example 5. Service responds with Disco Info result</p><div class="indent"><pre class="prettyprint">
&lt;iq from='mix.shakespeare.example'
    id='lx09df27'
    to='hag66@shakespeare.example/UUID-c8y/1573'
    type='result'&gt;
  &lt;query xmlns='http://jabber.org/protocol/disco#info'&gt;
    &lt;identity
        category='conference'
        name='Shakespearean Chat Service'
        type='text'/&gt;
    &lt;feature var='urn:xmpp:mix:core:0'/&gt;
    &lt;feature var='urn:xmpp:mix:core:0#searchable'&gt;
  &lt;/query&gt;
&lt;/iq&gt;
</pre></div>
    <p class="" style="">
      A MIX service MUST return the 'urn:xmpp:mix:core:0' feature  and MAY return the other features listed here:
     </p>
    <ul class="" style="">
      <li class="" style="">'urn:xmpp:mix:core:0': This indicates support of MIX, and is returned by all MIX services.</li>
      <li class="" style="">'urn:xmpp:mix:core:0#searchable': This is shown in the above example and indicates that a the MIX Service MAY be searched for channels.   This presence of this feature can be used by a client to guide the user to search for channels in a MIX service.</li>
      <li class="" style="">'urn:xmpp:mix:core:0#create-channel': This is described in <a href="#usecase-admin-check-create"> Checking for Permission to Create a Channel</a> in support of channel administration.   When an end user client  needs to create channels, perhaps for short term usage, this feature helps the client to identify an MIX service to use.  It enables a configuration where permanent (searchable) channels are placed in one MIX service and clients will be able to create channels in another MIX service which is not searchable.</li>
    </ul>
    <p class="" style="">A MIX service MUST NOT advertise support for <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0313.html">Message Archive Management (XEP-0313)</a></span>  [<a href="#nt-idm255">3</a>], as MAM is supported by the channels and not by the service.   A  MIX service MUST NOT advertise support for generic <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0060.html">Publish-Subscribe (XEP-0060)</a></span>  [<a href="#nt-idm251">2</a>], as although MIX makes use of PubSub it is not a generic PubSub service.</p>
  </div>
  <div class="indent"><h3>6.2 <a name="disco-channel-list" id="disco-channel-list">Discovering the Channels on a Service</a></h3>
    <p class="" style="">The list of channels supported by a MIX service is obtained by a disco#items command.   The MIX service MUST only return channels that exist and that the user making the query has rights to subscribe to.  </p>
    <p class="caption"><a name="example-6" id="example-6"></a>Example 6. Client Queries for Channels on MIX Service</p><div class="indent"><pre class="prettyprint">
&lt;iq from='hag66@shakespeare.example/UUID-c8y/1573'
    id='kl2fax27'
    to='mix.shakespeare.example'
    type='get'&gt;
  &lt;query xmlns='http://jabber.org/protocol/disco#items'/&gt;
&lt;/iq&gt;
</pre></div>
    <p class="caption"><a name="example-7" id="example-7"></a>Example 7. MIX Service Returns Disco Items Result</p><div class="indent"><pre class="prettyprint">
&lt;iq from='mix.shakespeare.example'
    id='kl2fax27'
    to='hag66@shakespeare.example/UUID-c8y/1573'
    type='result'&gt;
  &lt;query xmlns='http://jabber.org/protocol/disco#items'&gt;
    &lt;item jid='coven@mix.shakespeare.example' /&gt;
    &lt;item jid='spells@mix.shakespeare.example' /&gt;
    &lt;item jid='wizards@mix.shakespeare.example' /&gt;
  &lt;/query&gt;
&lt;/iq&gt;
</pre></div>
  </div>
  <div class="indent"><h3>6.3 <a name="disco-channel-info" id="disco-channel-info">Discovering Channel Information</a></h3>
    <p class="" style="">In order to find out more information about a given channel, a user can send a disco#info query to the channel. </p>
    <p class="caption"><a name="example-8" id="example-8"></a>Example 8. Entity Queries for Information about a Specific Channel</p><div class="indent"><pre class="prettyprint">
&lt;iq from='hag66@shakespeare.example/UUID-c8y/1573'
    id='ik3vs715'
    to='coven@mix.shakespeare.example'
    type='get'&gt;
  &lt;query xmlns='http://jabber.org/protocol/disco#info' node='mix'/&gt;
&lt;/iq&gt;
</pre></div>
    <p class="" style="">If the querying user is allowed to subscribe, the channel MUST return its identity and the features it supports.  Note that a MIX channel MUST support MAM and so the response will always include both MIX and MAM support.  All disco queries on a MIX channel and results returned MUST include the attribute node='mix'.   The reason for this is to facilitate MIX channels and <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0045.html">Multi-User Chat (XEP-0045)</a></span>  [<a href="#nt-idm241">1</a>] MUC rooms sharing the same JID.   This extra parameter will enable a server to return appropriate information.</p>
    <p class="caption"><a name="example-9" id="example-9"></a>Example 9. Channel Returns Disco Info Result</p><div class="indent"><pre class="prettyprint">
&lt;iq from='coven@mix.shakespeare.example'
    id='ik3vs715'
    to='hag66@shakespeare.example/UUID-c8y/1573'
    type='result'&gt;
  &lt;query xmlns='http://jabber.org/protocol/disco#info' node='mix'&gt;
    &lt;identity
        category='conference'
        name='A Dark Cave'
        type='mix'/&gt;
    &lt;feature var='urn:xmpp:mix:core:0'/&gt;
    &lt;feature var='urn:xmpp:mam:2'/&gt;
  &lt;/query&gt;
&lt;/iq&gt;
</pre></div>
  </div>
  <div class="indent"><h3>6.4 <a name="disco-channel-nodes" id="disco-channel-nodes">Discovering Nodes at a Channel</a></h3>
    <p class="" style="">Use disco#items to find the nodes associated with a channel.   Discovering nodes in MIX MUST use the node='mix' attribute.  The MIX service MUST only return nodes that exist and that the user making the query has rights to subscribe to. </p>
    <p class="caption"><a name="example-10" id="example-10"></a>Example 10. Entity Queries for Nodes at a Channel</p><div class="indent"><pre class="prettyprint">
&lt;iq from='hag66@shakespeare.example/UUID-c8y/1573'
    id='kl2fax27'
    to='coven@mix.shakespeare.example'
    type='get'&gt;
  &lt;query xmlns='http://jabber.org/protocol/disco#items' node='mix'/&gt;
&lt;/iq&gt;
</pre></div>
    <p class="caption"><a name="example-11" id="example-11"></a>Example 11. Channel Returns Disco Items Result</p><div class="indent"><pre class="prettyprint">
&lt;iq from='coven@mix.shakespeare.example'
    id='kl2fax27'
    to='hag66@shakespeare.example/UUID-c8y/1573'
    type='result'&gt;
  &lt;query xmlns='http://jabber.org/protocol/disco#items' node='mix'&gt;
    &lt;item jid='coven@mix.shakespeare.example'
          node='urn:xmpp:mix:nodes:presence'/&gt;
    &lt;item jid='coven@mix.shakespeare.example'
          node='urn:xmpp:mix:nodes:participants'/&gt;
    &lt;item jid='coven@mix.shakespeare.example'
          node='urn:xmpp:mix:nodes:messages'/&gt;
    &lt;item jid='coven@mix.shakespeare.example'
          node='urn:xmpp:mix:nodes:config'/&gt;
  &lt;/query&gt;
&lt;/iq&gt;
</pre></div>
  </div>
  <div class="indent"><h3>6.5 <a name="find-channel-info" id="find-channel-info">Determining Information about a Channel</a></h3>
    <p class="" style="">The Information Node contains various information about the channel that can be useful to the user, that the client can access using PubSub, as shown below.</p>
    <p class="caption"><a name="example-12" id="example-12"></a>Example 12. Client Requests Channel Information</p><div class="indent"><pre class="prettyprint">
&lt;iq from='hag66@shakespeare.example/UUID-c8y/1573'
    id='kl2fax27'
    to='coven@mix.shakespeare.example'
    type='get'&gt;
  &lt;pubsub xlns='http://jabber.org/protocol/pubsub'&gt;
    &lt;items node='urn:xmpp:mix:nodes:info'/&gt;
  &lt;/pubsub&gt;
&lt;/iq&gt;
</pre></div>
    <p class="caption"><a name="example-13" id="example-13"></a>Example 13. MIX Service Returns Channel Information</p><div class="indent"><pre class="prettyprint">
&lt;iq from='coven@mix.shakespeare.example'
    id='kl2fax27'
    to='hag66@shakespeare.example/UUID-c8y/1573'
    type='result'&gt;
  &lt;pubsub xmlns='http://jabber.org/protocol/pubsub'&gt;
    &lt;items node='urn:xmpp:mix:nodes:info'&gt;
      &lt;item id='2016-05-30T09:00:00' xmlns='urn:xmpp:mix:core:0'&gt;
        &lt;x xmlns='jabber:x:data' type='result'&gt;
          &lt;field var='FORM_TYPE' type='hidden'&gt;
            &lt;value&gt;urn:xmpp:mix:core:0&lt;/value&gt;
          &lt;/field&gt;
          &lt;field var='Name'&gt;
            &lt;value&gt;Witches Coven&lt;/value&gt;
          &lt;/field&gt;
          &lt;field var='Description'&gt;
            &lt;value&gt;A location not far from the blasted heath where
                   the three witches meet&lt;/value&gt;
          &lt;/field&gt;
          &lt;field var='Contact'&gt;
            &lt;value&gt;greymalkin@shakespeare.example&lt;/value&gt;
          &lt;/field&gt;
        &lt;/x&gt;
      &lt;/item&gt;
    &lt;/items&gt;
  &lt;/pubsub&gt;
&lt;/iq&gt;
</pre></div>
  </div>
  <div class="indent"><h3>6.6 <a name="find-channel-participants" id="find-channel-participants">Determining the Participants in a Channel</a></h3>
    <p class="" style="">
         Participants in the channel are determined using PubSub retrieval of the Participants Node which will give proxy JID, real JID and nick. It is anticipated that clients using a channel will often determine participants on start-up, to enable display of participants and presence.  </p>
    <p class="caption"><a name="example-14" id="example-14"></a>Example 14. User's Client Requests Participant List</p><div class="indent"><pre class="prettyprint">
&lt;iq from='hag66@shakespeare.example/UUID-c8y/1573'
    id='kl2fax27'
    to='coven@mix.shakespeare.example'
    type='get'&gt;
    &lt;pubsub xmlns='http://jabber.org/protocol/pubsub'&gt;
      &lt;items node='urn:xmpp:mix:nodes:participants'/&gt;
    &lt;/pubsub&gt;
&lt;/iq&gt;
</pre></div>
    <p class="caption"><a name="example-15" id="example-15"></a>Example 15. MIX Service Returns Participant List</p><div class="indent"><pre class="prettyprint">
&lt;iq from='coven@mix.shakespeare.example'
    id='kl2fax27'
    to='hag66@shakespeare.example/UUID-c8y/1573'
    type='result'&gt;
  &lt;pubsub xlns='http://jabber.org/protocol/pubsub'&gt;
    &lt;items node='urn:xmpp:mix:nodes:participants'&gt;
      &lt;item id='123456#coven@mix.shakespeare.example'&gt;
        &lt;participant xmlns='urn:xmpp:mix:core:0'&gt;
          &lt;nick&gt;thirdwitch&lt;/nick&gt;
          &lt;jid&gt;hag66@shakespeare.example&lt;/jid&gt;
        &lt;/participant&gt;
      &lt;/item&gt;
      &lt;item id='87123#coven@mix.shakespeare.example'&gt;
        &lt;participant xmlns='urn:xmpp:mix:core:0'&gt;
          &lt;nick&gt;top witch&lt;/nick&gt;
          &lt;jid&gt;hecate@shakespeare.example&lt;/jid&gt;
        &lt;/participant&gt;
      &lt;/item&gt;
    &lt;/items&gt;
  &lt;/pubsub&gt;
&lt;/iq&gt;
</pre></div>

  </div>
  <div class="indent"><h3>6.7 <a name="mix-client-discovery" id="mix-client-discovery">Discovering Client MIX Capability</a></h3>
    <p class="" style="">
      Where a client supports MIX, it MUST advertise this capability in response to a Disco request.    This will enable other entities to determine if a client supports MIX, and in particular it facilitates the client's server to determine client support.  This can be optimized by use of CAPS.    The following example shows a Disco request to and response from a client that supports both MIX and MUC.
    </p>
    <p class="caption"><a name="example-16" id="example-16"></a>Example 16. Disco Query for MIX support</p><div class="indent"><pre class="prettyprint">
 &lt;iq from='juliet@capulet.example/UUID-e3r/9264'
     id='d1rt87mr4w'
     to='romeo@montague.example/UUID-m2t/3945'
     type='get'&gt;
  &lt;query xmlns='http://jabber.org/protocol/disco#info'/&gt;
&lt;/iq&gt;


&lt;iq from='romeo@montague.example/UUID-m2t/3945'
    id='d1rt87mr4w'
    to='juliet@capulet.example/UUID-e3r/9264'
    type='result'&gt;
  &lt;query xmlns='http://jabber.org/protocol/disco#info'&gt;
    &lt;feature var='http://jabber.org/protocol/caps'/&gt;
    &lt;feature var='http://jabber.org/protocol/disco#info'/&gt;
    &lt;feature var='http://jabber.org/protocol/disco#items'/&gt;
    &lt;feature var='http://jabber.org/protocol/muc'/&gt;
    &lt;feature var='urn:xmpp:mix:core:0'/&gt;
  &lt;/query&gt;
&lt;/iq&gt;
</pre></div>
  </div>
<h2>7.
       <a name="usecases" id="usecases">Use Cases</a></h2>
  <div class="indent"><h3>7.1 <a name="usecases-user" id="usecases-user">Common User Use Cases</a></h3>
    <div class="indent"><h3>7.1.1 <a name="usecase-jl-model" id="usecase-jl-model">Model for Join and Leave</a></h3>
      <p class="" style="">
        MIX Join and Leave communication goes through the clients server.   The full specification of client interaction with the client's server is specified in MIX-PAM.    This specification shows the protocol between the user's server and the MIX server and sets out behaviour of the MIX server.
      </p>
    </div>
    <div class="indent"><h3>7.1.2 <a name="usecase-user-join" id="usecase-user-join">Joining a Channel</a></h3>
      <p class="" style="">A user joins a channel by sending a MIX "join" command from one of the user's clients, which will be relayed to the server as specified in MIX-PAM. There is no default set of nodes, so the user MUST specify the set of nodes to be subscribed to. To achieve the equivalent service to MUC, a user would subscribe to both messages and presence nodes.  A user will typically subscribe to at least the message and/or presence nodes but MAY join and not subscribe to any nodes.  Note that the presence node is specified in MIX-PRESENCE.  The &lt;join/&gt; is a child element of &lt;iq/&gt; element.     The &lt;join/&gt; element is qualified by the 'urn:xmpp:mix:core:0' namespace.    The requested nodes are encoded as &lt;subscribe/&gt; child elements of the &lt;join/&gt; element.</p>
      <p class="" style="">The join leads to the server subscribing the user to each of the requested nodes associated with the channel. The MIX service will also add the user to the participant list by injecting a new item into the "urn:xmpp:mix:nodes:participants" node automatically.</p>
      <p class="" style="">The default MIX model is that only channel participants are allowed to subscribe to nodes.    A MIX channel MAY allow non-participant subscription to some nodes.   This will be handled by clients directly subscribing to the desired PubSub nodes.</p>
      <p class="" style="">The user's server needs to make roster changes as part of the join functionality, as specified in MIX-PAM.   This means that the join request to the MIX service will come from the user's server from the user's bare JID.</p>
      <p class="caption"><a name="example-17" id="example-17"></a>Example 17. User's Server sends  Join request to MIX Channel</p><div class="indent"><pre class="prettyprint">
qn&lt;iq type='set'
    from='hag66@shakespeare.example'
    to='coven@mix.shakespeare.example'
    id='E6E10350-76CF-40C6-B91B-1EA08C332FC7'&gt;
  &lt;join xmlns='urn:xmpp:mix:core:0'&gt;
    &lt;subscribe node='urn:xmpp:mix:nodes:messages'/&gt;
    &lt;subscribe node='urn:xmpp:mix:nodes:presence'/&gt;
    &lt;subscribe node='urn:xmpp:mix:nodes:participants'/&gt;
    &lt;subscribe node='urn:xmpp:mix:nodes:info'/&gt;
  &lt;/join&gt;
&lt;/iq&gt;
</pre></div>

      <p class="" style="">The channel responds to the user's sever with an IQ-result addressed to the user's bare JID, which will be processed as specified in MIX-PAM. This stanza includes the nodes to which the user has been successfully subscribed, as well as the bare JID that will be used for the user in this channel and added to the participant list.  The JID returned in the join is the user's bare proxy JID.  The following example shows the result of the above request when the request is completed in full. </p>
      <p class="caption"><a name="example-18" id="example-18"></a>Example 18. Channel responds to User's Server</p><div class="indent"><pre class="prettyprint">
&lt;iq type='result'
    from='coven@mix.shakespeare.example'
    to='hag66@shakespeare.example'
    id='E6E10350-76CF-40C6-B91B-1EA08C332FC7'&gt;
  &lt;join xmlns='urn:xmpp:mix:core:0'
        jid='123456#coven@mix.shakespeare.example'&gt;
    &lt;subscribe node='urn:xmpp:mix:nodes:messages'/&gt;
    &lt;subscribe node='urn:xmpp:mix:nodes:presence'/&gt;
    &lt;subscribe node='urn:xmpp:mix:nodes:participants'/&gt;
    &lt;subscribe node='urn:xmpp:mix:nodes:info'/&gt;
  &lt;/join&gt;
&lt;/iq&gt;
</pre></div>
      <p class="" style="">
        If a user cannot be subscribed to one or more of the requested nodes (e.g., because the node does not exist), but can be subscribed to some the response simply lists the nodes successfully subscribed.    If at least one node is requested and none of the nodes requested are successfully subscribed to, an error response is sent indicating the reason that the first node requested was not subscribed to.   This error response will also include other nodes requested where subscription failed for the same reason. </p>

      <p class="" style="">
        The following response example shows a successful response to the initial request example where
        the participant is not subscribed to all nodes associated with the channel (in this case only messages, participants, and information). This example shows the message from the MIX channel to the user's server.
      </p>
      <p class="caption"><a name="example-19" id="example-19"></a>Example 19. Channel Processes Join With Some Nodes Not Subscribed To</p><div class="indent"><pre class="prettyprint">
&lt;iq type='result'
    from='hag66@shakespeare.example'
    to='coven@mix.shakespeare.example'
    id='E6E10350-76CF-40C6-B91B-1EA08C332FC7'&gt;
  &lt;join xmlns='urn:xmpp:mix:core:0'
        jid='123456#coven@mix.shakespeare.example'&gt;
    &lt;subscribe node='urn:xmpp:mix:nodes:messages'/&gt;
    &lt;subscribe node='urn:xmpp:mix:nodes:participants'/&gt;
    &lt;subscribe node='urn:xmpp:mix:nodes:info'/&gt;
  &lt;/join&gt;
&lt;/iq&gt;
</pre></div>
      <p class="" style="">
        After a successful join and before sending the response, the channel MUST subscribe the user to the negotiated nodes and
        adds the user to the participants node.   When these changes are made, the MIX channel MUST send a PubSub notification of the change to subscribers of the participants node.  The following example shows such a notification.</p>
      <p class="caption"><a name="example-20" id="example-20"></a>Example 20. Channel Distributes New Participant Information</p><div class="indent"><pre class="prettyprint">
&lt;message from='coven@mix.shakespeare.example'
         to='hecate@shakespeare.example'
         id='5A9C7398-DB13-4BFA-A091-2D466C710AAF'&gt;
  &lt;event xmlns='http://jabber.org/protocol/pubsub#event'&gt;
    &lt;items node='urn:xmpp:mix:nodes:participants'&gt;
      &lt;item id='123456#coven@mix.shakespeare.example'&gt;
        &lt;participant xmlns='urn:xmpp:mix:core:0'&gt;
          &lt;jid&gt;hag66@shakespeare.example&lt;/jid&gt;
        &lt;/participant&gt;
      &lt;/item&gt;
    &lt;/items&gt;
  &lt;/event&gt;
&lt;/message&gt;
</pre></div>
      <p class="" style="">The user that has been added to the channel is identified by the item id of the item added to the Participants node, which is the proxy JID of the new channel participant.  The &lt;participant&gt; element MUST include a &lt;jid&gt; element with the JID of the participant, unless MIX-ANON is being followed to hide participant JIDs.    The &lt;nick&gt; element will not be included at this point, unless it is automatically generated by the channel.   In the likely event that a Nick is subsequently added, an update with the &lt;nick&gt; element will be distributed.
</p>

      <p class="" style="">
        A user MAY subsequently modify subscription to nodes in a channel by sending a subscription modification request encoded as a &lt;update-subscription/&gt;  child element of &lt;iq/&gt; element. The &lt;update-subscription/&gt; element is qualified by the 'urn:xmpp:mix:core:0' namespace.  The requested notes are encoded as &lt;subscribe/&gt; child elements of the &lt;update-subscription/&gt; element with the node name encoded as a 'node' attribute.  This modification goes directly from client to MIX channel, as this change does not impact the roster and so does not need any local action.  The following example shows subscription modification.
      </p>
      <p class="caption"><a name="example-21" id="example-21"></a>Example 21. User Modifies Subscription Request</p><div class="indent"><pre class="prettyprint">
&lt;iq type='set'
    from='hag66@shakespeare.example/UUID-a1j/7533'
    to='coven@mix.shakespeare.example'
    id='E6E10350-76CF-40C6-B91B-1EA08C332FC7'&gt;
  &lt;update-subscription xmlns='urn:xmpp:mix:core:0'&gt;
    &lt;subscribe node='urn:xmpp:mix:nodes:messages'/&gt;
  &lt;/update-subscription&gt;
&lt;/iq&gt;

&lt;iq type='result'
     from='coven@mix.shakespeare.example'
     to='hag66@shakespeare.example/UUID-a1j/7533'
    id='E6E10350-76CF-40C6-B91B-1EA08C332FC7'&gt;
  &lt;update-subscription xmlns='urn:xmpp:mix:core:0'
                       jid='hag66@shakespeare.example'&gt;
    &lt;subscribe node='urn:xmpp:mix:nodes:messages'/&gt;
  &lt;/update-subscription&gt;
&lt;/iq&gt;
</pre></div>
    </div>
    <div class="indent"><h3>7.1.3 <a name="usecase-user-leaving" id="usecase-user-leaving">Leaving a Channel</a></h3>
      <p class="" style="">Users generally remain in a channel for an extended period of time.  In particular the user remains as a participant the channel when the user goes offline.  Note that this is different to  <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0045.html">Multi-User Chat (XEP-0045)</a></span>  [<a href="#nt-idm241">1</a>], where the client leaves a room when going offline. So, leaving a MIX channel is a permanent action for a user across all clients.  In order to  leave a channel, the user's server sends a MIX "leave" command to the channel, as specified in MIX-PAM.  The leave command is encoded as a &lt;leave/&gt; child element of &lt;iq/&gt; element.  The &lt;leave/&gt; element is qualified by the 'urn:xmpp:mix:core:0' namespace.  The following example shows a leave request to a MIX channel.  </p>
      <p class="caption"><a name="example-22" id="example-22"></a>Example 22. User's Server sends  Leave Request to  a Channel</p><div class="indent"><pre class="prettyprint">
&lt;iq type='set'
    from='hag66@shakespeare.example'
    to='coven@mix.shakespeare.example'
    id='E6E10350-76CF-40C6-B91B-1EA08C332FC7'&gt;
  &lt;leave xmlns='urn:xmpp:mix:core:0'/&gt;
&lt;/iq&gt;
</pre></div>

    <p class="" style="">
      The MIX channel will then remove the user from the channel, as described below.   A response is sent to the user's server.
    </p>
      <p class="caption"><a name="example-23" id="example-23"></a>Example 23. Channel Confirms Leave to User's Server</p><div class="indent"><pre class="prettyprint">
&lt;iq type='result'
    from='coven@mix.shakespeare.example'
    to='hag66@shakespeare.example'
    id='E6E10350-76CF-40C6-B91B-1EA08C332FC7'&gt;
  &lt;leave xmlns='urn:xmpp:mix:core:0'/&gt;
&lt;/iq&gt;
</pre></div>
      <p class="" style="">When the user leaves the channel, the MIX service is responsible for unsubscribing the user from all nodes in the channel and for removing the user from the participants list.  Presence removal is specified in MIX-PRESENCE.
        Deletion from the participants node functions as if the item (channel participant) had been deleted using the PubSub retract mechanism with notification set to true.    Notification of the participant deletion is sent to clients subscribed to the participants  PubSub node, as shown in the example below.
        </p>
      <p class="caption"><a name="example-24" id="example-24"></a>Example 24. Reporting when User Leaves a Channel</p><div class="indent"><pre class="prettyprint">
&lt;message from='coven@mix.shakespeare.example'
                to='hecate@shakespeare.example' id='f5pp2toz'&gt;
  &lt;event xmlns='http://jabber.org/protocol/pubsub#event'&gt;
    &lt;items xmlns='urn:xmpp:mix:core:0' node='urn:xmpp:mix:nodes:participants'&gt;
      &lt;item&gt;
        &lt;retract id='123456#coven@mix.shakespeare.example'/&gt;
      &lt;/item&gt;
    &lt;/items&gt;
  &lt;/event&gt;
&lt;/message&gt;
</pre></div>


    </div>

    <div class="indent"><h3>7.1.4 <a name="usecase-setting-nick" id="usecase-setting-nick">Setting a Nick</a></h3>
    <p class="" style="">
      Each participant of a channel MAY have a nick, which is how other users in the channel will see the user.  In some cases a nick is not needed, for example where a user reads messages in a channel but does not send messages or share presence information.     There are four ways that a user's nick can be obtained.   The choice of mechanism or mechanisms is dependent on channel policy:
    </p>
    <ol start="" class="" style="">
      <li class="" style="">The nick is registered with the user account in some way, for example as part of user provisioning with nick configured as an attribute in a directory service.   For example, this could be chosen by corporate services that wish to ensure consistent nick values for a set of users and channels.</li>
      <li class="" style="">The nick is registered with the MIX service, as described in  <a href="#usecase-user-register"> Registering a Nick </a>.</li>
      <li class="" style="">The user explicitly sets the nick, as described in this section.</li>
      <li class="" style="">The MIX service generates the nick.  In this case it is RECOMMENDED that the assigned nick is a UUID following <span class="ref" style=""><a href="http://tools.ietf.org/html/rfc4122">RFC 4122</a></span>  [<a href="#nt-idm596">17</a>].</li>
    </ol>
    <p class="" style="">
      A user will typically set a nick when joining a channel and MAY update this nick from time to time.   The user does this by sending a command to the channel to set the nick.  This command is a &lt;setnick/&gt; child element of &lt;iq/&gt; element. The &lt;setnick/&gt; element is qualified by the 'urn:xmpp:mix:core:0' namespace.   The nick is encoded as a &lt;nick/&gt; child element of the &lt;setnick/&gt; element. If the user wishes the channel to assign a nick (or knows that the channel will assign a nick) the nick field can be left blank, so that the user can see what is assigned in the result.
    </p>
    <p class="caption"><a name="example-25" id="example-25"></a>Example 25. User sets Nick on Channel</p><div class="indent"><pre class="prettyprint">
&lt;iq type='set'
    from='hag66@shakespeare.example/UUID-a1j/7533'
    to='coven@mix.shakespeare.example'
    id='7nve413p'&gt;
  &lt;setnick xmlns='urn:xmpp:mix:core:0'&gt;
    &lt;nick&gt;thirdwitch&lt;/nick&gt;
  &lt;/setnick&gt;
&lt;/iq&gt;
</pre></div>
    <p class="" style="">
      On successful nick assignment, the channel will return the nick that is to be used, noting that this MAY be different to the requested nick. MIX services SHOULD apply the "nickname" profile of the PRECIS OpaqueString class, as defined in <span class="ref" style=""><a href="http://tools.ietf.org/html/rfc7700">RFC 7700</a></span>  [<a href="#nt-idm603">18</a>].  The channel MAY return a conflict error or other appropriate error.
    </p>

    <p class="caption"><a name="example-26" id="example-26"></a>Example 26. Channel informs user of Nick</p><div class="indent"><pre class="prettyprint">
&lt;iq type='result'
    from='coven@mix.shakespeare.example'
    to'hag66@shakespeare.example/UUID-a1j/7533'
    id='7nve413p'&gt;
  &lt;setnick xmlns='urn:xmpp:mix:core:0'&gt;
    &lt;nick&gt;thirdwitch&lt;/nick&gt;
  &lt;/setnick&gt;
&lt;/iq&gt;
</pre></div>
    </div>
    <div class="indent"><h3>7.1.5 <a name="usecase-sync-history" id="usecase-sync-history">Coming Online: Synchronizing Message History</a></h3>
      <p class="" style="">
        A MIX client will typically display message history of the channel to the user.   When a client comes online it will need to obtain this message history from the MAM archive associated with the channel on the client's server.  There are three basic approaches a client will take:
      </p>
      <ol start="" class="" style="">
        <li class="" style="">If the client has previously displayed message history and has been offline for a reasonably small time, the client MAY wish to retrieve all messages since the last one displayed to the user.</li>
        <li class="" style="">The client MAY wish to display a fixed number of messages, perhaps finding more messages if the user subsequently requests.</li>
        <li class="" style="">The client MAY wish to display messages from a recent time period, perhaps finding more messages if the user subsequently requests.</li>
      </ol>
      <p class="" style="">To achieve this, the client will query the user's own MAM archive using <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0313.html">Message Archive Management (XEP-0313)</a></span>  [<a href="#nt-idm255">3</a>], with the query filtered by the channel JID.   This gives the client flexibility to retrieve and display message history in a manner appropriate to the client implementation.</p>
      <p class="" style="">
        The only exception to this is when a user wishes to access message history in the channel prior to when the user joined the channel.  To achieve this, the client will use MAM to retrieve message history directly from the MAM Archive of the MIX channel.
      </p>
    </div>
    <div class="indent"><h3>7.1.6 <a name="usecase-user-message" id="usecase-user-message">Sending a Message</a></h3>
      <p class="" style="">A client sends a message directly to a MIX channel as a standard groupchat message, in exactly the same way as for <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0045.html">Multi-User Chat (XEP-0045)</a></span>  [<a href="#nt-idm241">1</a>]. Messages are sent directly to the MIX channel from the user's client. The message id is selected by the client.</p>
      <p class="caption"><a name="example-27" id="example-27"></a>Example 27. User Sends Message to Channel</p><div class="indent"><pre class="prettyprint">
&lt;message from='hag66@shakespeare.example/UUID-a1j/7533'
         to='coven@mix.shakespeare.example'
         id='92vax143g'
         type='groupchat'&gt;
  &lt;body&gt;Harpier cries: 'tis time, 'tis time.&lt;/body&gt;
&lt;/message&gt;
</pre></div>
      <p class="" style="">
        The MIX channel then adds information to the message using a &lt;mix&gt; element qualified by the 'urn:xmpp:mix:core:0' namespace.  This enables are receiver of the MIX message to determine the message sender.  This element contains two child elements:
      </p>
      <ol start="" class="" style="">
        <li class="" style="">A &lt;nick&gt; element that contains the Nick of the message sender, taken from the Participants Node.  This MUST be present if a Nick is defined for the user.</li>
        <li class="" style="">A &lt;jid&gt; element containing the real JID of the sender. This MUST be present, unless following the "JID Hidden" model defined in MIX-ANON.  If this element is omitted, the &lt;nick&gt; and &lt;proxy-jid&gt; elements MUST be present.</li>
        <li class="" style="">A &lt;proxy-jid&gt; element contains the sender's proxy JID.  This MUST be present if &lt;jid&gt; is omitted and MUST not be present if &lt;jid&gt;  is present.</li>
      </ol>
      <p class="" style="">The MIX channel then puts a copy of the message into the MAM archive for the channel and sends a copy of  the message to each participant in
        standard groupchat format.    These messages sent by the channel are addressed to the bare JID of each participant and this will be handled by the participant's local server as specified in MIX-PAM.  The message 'from' attribute is the JID of the channel.   The id of the message is the ID from the MAM archive and NOT the id used by the sender. The message placed in the MAM archive is the reflected message without a 'to' attribute.</p>


      <p class="caption"><a name="example-28" id="example-28"></a>Example 28. Channel Puts Message in MAM Archive</p><div class="indent"><pre class="prettyprint">
&lt;message from='coven@mix.shakespeare.example'
         id='77E07BB0-55CF-4BD4-890E-3F7C0E686BBD'
         type='groupchat'&gt;
  &lt;body&gt;Harpier cries: 'tis time, 'tis time.&lt;/body&gt;
  &lt;mix xmlns='urn:xmpp:mix:core:0'&gt;
    &lt;nick&gt;thirdwitch&lt;/nick&gt;
    &lt;jid&gt;123456#coven@mix.shakespeare.example&lt;/jid&gt;
  &lt;/mix&gt;
&lt;/message&gt;
</pre></div>

      <p class="caption"><a name="example-29" id="example-29"></a>Example 29. Channel Reflects Message to Participants</p><div class="indent"><pre class="prettyprint">
&lt;message from='coven@mix.shakespeare.example'
         to='hecate@shakespeare.example'
         id='77E07BB0-55CF-4BD4-890E-3F7C0E686BBD'
         type='groupchat'&gt;
  &lt;body&gt;Harpier cries: 'tis time, 'tis time.&lt;/body&gt;
  &lt;mix xmlns='urn:xmpp:mix:core:0'&gt;
    &lt;nick&gt;thirdwitch&lt;/nick&gt;
    &lt;jid&gt;hag66@shakespeare.example&lt;/jid&gt;
  &lt;/mix&gt;
&lt;/message&gt;
</pre></div>

      <p class="caption"><a name="example-30" id="example-30"></a>Example 30. Channel Reflects Message to Participants with Proxy JID</p><div class="indent"><pre class="prettyprint">
&lt;message from='coven@mix.shakespeare.example'
         to='hecate@shakespeare.example'
         id='77E07BB0-55CF-4BD4-890E-3F7C0E686BBD'
         type='groupchat'&gt;
  &lt;body&gt;Harpier cries: 'tis time, 'tis time.&lt;/body&gt;
  &lt;mix xmlns='urn:xmpp:mix:core:0'&gt;
    &lt;nick&gt;thirdwitch&lt;/nick&gt;
    &lt;jid&gt;123456#coven@mix.shakespeare.example&lt;/jid&gt;
  &lt;/mix&gt;
&lt;/message&gt;
</pre></div>
      <p class="" style="">
        The messages sent to participants have a different message id to the originally submitted message.  This does not impact most recipients, but it does not allow the message originator to correlate the message with the submitted message.   To address this the MIX channel MUST include an additional &lt;submission-id&gt; element in the &lt;mix&gt; element of the message copy going back to the originator's bare JID.  The &lt;submission-id&gt; element holds the original id provided by the sender.  This enables the originator to correlate the received message with the message submitted.
      </p>
      <p class="caption"><a name="example-31" id="example-31"></a>Example 31. Channel Reflects Message back to Originator</p><div class="indent"><pre class="prettyprint">
&lt;message from='coven@mix.shakespeare.example'
         to='hag66@shakespeare.example'
         id='77E07BB0-55CF-4BD4-890E-3F7C0E686BBD'
         type='groupchat'&gt;
   &lt;body&gt;Harpier cries: 'tis time, 'tis time.&lt;/body&gt;
   &lt;mix xmlns='urn:xmpp:mix:core:0'&gt;
     &lt;nick&gt;thirdwitch&lt;/nick&gt;
     &lt;jid&gt;hag66@shakespeare.example&lt;/jid&gt;
     &lt;submission-id&gt;92vax143g&lt;/submission-id&gt;
   &lt;/mix&gt;
&lt;/message&gt;
</pre></div>
    </div>
  </div>
  <div class="indent"><h3>7.2 <a name="use-mam" id="use-mam">Use of MAM</a></h3>
   <p class="" style="">
     All messages sent to a MIX channel MUST be archived using MAM in association with the MIX channel.   All messages MUST also be archived on the server associated with each channel participant receiving the message, which enables clients to always retrieve messages from the clients MAM archive.  Other channel nodes MAY be archived.
   </p>
    <div class="indent"><h3>7.2.1 <a name="use-mam-messages" id="use-mam-messages">Archive of Messages</a></h3>
      <p class="" style="">
        Messages sent to participants MUST be archived by both the MIX channel and by the user's server.   This  MAY include presence messages.   Correct MIX operation relies on messages being archived.
      </p>
    </div>
    <div class="indent"><h3>7.2.2 <a name="use-mam-retrieve" id="use-mam-retrieve">Retrieving Messages</a></h3>
      <p class="" style="">
        Clients will retrieve MIX messages using standard MAM protocol from the user's archive.  The MAM query will filter based on the channel JID to enable access to messages from a given channel. This gives the user a simple mechanism to access all messages sent to the channel.   MAM can be used to retrieve older messages that have not been cached by the client.
      </p>
      <p class="" style="">
        Messages can also be retrieved from the channel by addressing MAM queries to the channel JID.   This will behave like a standard MAM archive.  This can be useful for administrators to access archived messages.  It can also be useful for new channel participants to access the historical archives.
      </p>
    </div>
    <div class="indent"><h3>7.2.3 <a name="use-mam-other-nodes" id="use-mam-other-nodes">MAM Use with other Channel Nodes</a></h3>
      <p class="" style="">
        A MIX Channel MAY use MAM to archive nodes other than message nodes.   Clients with rights to access these archives MAY use MAM to do this, specifying the PubSub node in the MAM query addressed to the channel.
      </p>
    </div>
  </div>


  <div class="indent"><h3>7.3 <a name="usecases-admin" id="usecases-admin">Administrative Use Cases</a></h3>


    <div class="indent"><h3>7.3.1 <a name="usecase-admin-check-create" id="usecase-admin-check-create">Checking For Permission To Create a Channel</a></h3>
      <p class="" style="">
        MIX does not standardize an access control model for creating and deleting MIX channels.    The choice is left to the MIX implementer, and could be a very simple or complex approach.  A client can determine if it has permission to create a channel on a MIX service, which MAY be used to control options presented to the user.   This is achieved by a disco command on the MIX service.   If the 'urn:xmpp:mix:core:0#create-channel' feature is returned, the user is able to create a channel.
      </p>
        <p class="caption"><a name="example-32" id="example-32"></a>Example 32. Client determines Capability to Create a Channel</p><div class="indent"><pre class="prettyprint">
 &lt;iq from='hag66@shakespeare.example/UUID-c8y/1573'
    id='lx09df27'
    to='mix.shakespeare.example'
    type='get'&gt;
  &lt;query xmlns='http://jabber.org/protocol/disco#info'/&gt;
&lt;/iq&gt;

&lt;iq from='mix.shakespeare.example'
    id='lx09df27'
    to='hag66@shakespeare.example/UUID-c8y/1573'
    type='result'&gt;
  &lt;query xmlns='http://jabber.org/protocol/disco#info'&gt;
    &lt;identity
        category='conference'
        name='Shakespearean Chat Service'
        type='text'/&gt;
    &lt;feature var='urn:xmpp:mix:core:0'/&gt;
    &lt;feature var='urn:xmpp:mix:core:0#create-channel'&gt;
  &lt;/query&gt;
&lt;/iq&gt;
</pre></div>
    </div>
    <div class="indent"><h3>7.3.2 <a name="usecase-admin-create" id="usecase-admin-create">Creating a Channel</a></h3>
      <p class="" style="">
        A client creates a channel by sending a simple request to the MIX service.   A channel MAY be created with default parameters, as shown in the following example.   The result MUST include the name of the channel which MUST match the channel name in the request (if present).  The create is encoded as a &lt;create/&gt; child element of &lt;iq/&gt; element.   The &lt;create/&gt; is qualified by the 'urn:xmpp:mix:core:0' namespace.   The &lt;create/&gt; element MUST have a 'channel' attribute to specify the channel name.  This attribute specifies the value that will be used in the LHS of the JID for the MIX channel.
      </p>
        <p class="caption"><a name="example-33" id="example-33"></a>Example 33. Creating a Channel with Default Parameters</p><div class="indent"><pre class="prettyprint">
&lt;iq from='hag66@shakespeare.example/UUID-a1j/7533'
    id='lx09df27'
    to='mix.shakespeare.example'
    type='set'&gt;
  &lt;create channel='coven' xmlns='urn:xmpp:mix:core:0'/&gt;
&lt;/iq&gt;

&lt;iq from='mix.shakespeare.example'
    id='lx09df27'
    to='hag66@shakespeare.example/UUID-a1j/7533'
    type='result'&gt;
  &lt;create channel='coven' xmlns='urn:xmpp:mix:core:0'/&gt;
&lt;/iq&gt;
</pre></div>

      <p class="" style="">
        When a channel is created with default parameters, the Owner in the configuration is set to the JID that creates the channel.  Where parameters are included, the Owner or Owners MUST be specified explicitly.  If an owner is specified that is not the JID creating the channel, the owner is recommended to verify that this user accepts the responsibility of being an owner of this channel.   Protocol to support this verification may be specified in a future XEP.  Note that the 'Last Change Made By' in configuration node MUST be set to the JID that creates the channel.    Modifying channel parameters is specified in MIX-ADMIN.
      </p>

    </div>


    <div class="indent"><h3>7.3.3 <a name="usecase-admin-create-adhoc" id="usecase-admin-create-adhoc">Creating a Channel for Ad Hoc Use</a></h3>
      <p class="" style="">
        Channels MAY be created for ad hoc use between a set of users.  Channels of this nature will have channel name created by the server and will not be addressable or discoverable.  Here a channel is created without specifying the channel name.   Parameters for the channel MAY also be specified.
      </p>
      <p class="caption"><a name="example-34" id="example-34"></a>Example 34. Creating a Channel for Ad Hoc Use</p><div class="indent"><pre class="prettyprint">
&lt;iq from='hag66@shakespeare.example/UUID-a1j/7533'
    id='lx09df27'
    to='mix.shakespeare.example'
    type='set'&gt;
  &lt;create xmlns='urn:xmpp:mix:core:0'/&gt;
&lt;/iq&gt;

&lt;iq from='mix.shakespeare.example'
    id='lx09df27'
    to='hag66@shakespeare.example/UUID-a1j/7533'
    type='result'&gt;
  &lt;create channel='A1B2C345' xmlns='urn:xmpp:mix:core:0'/&gt;
&lt;/iq&gt;
</pre></div>
   </div>


    <div class="indent"><h3>7.3.4 <a name="usecase-admin-destroy" id="usecase-admin-destroy">Destroying a Channel</a></h3>
      <p class="" style="">
        MIX channels are always explicitly destroyed by an owner of the channel or by a server operator. There is no concept of temporary channel, equivalent to <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0045.html">Multi-User Chat (XEP-0045)</a></span>  [<a href="#nt-idm241">1</a>] temporary room which is automatically destroyed by the server when the users leave.   However, channels MAY be configured with an explicit lifetime, after which the channel MUST be removed by the MIX service; This is specified in MIX-ADMIN.   Where a channel is created for ad hoc use, it MAY be desirable to keep the channel for history reference or for re-use by the same set of users.  Note that the owner of the channel does not need to have presence registered in the channel in order to destroy it.
     </p>
      <p class="" style="">
        The destroy operation is encoded as a &lt;destroy/&gt; child element of an &lt;iq/&gt; element.  The &lt;destroy/&gt; element is qualified by the 'urn:xmpp:mix:core:0' namespace.  The &lt;destroy/&gt; element MUST have a 'channel' attribute to specify the channel to be destroyed.
        A client destroys a channel using a simple set operation, as shown in the following example.
      </p>
      <p class="caption"><a name="example-35" id="example-35"></a>Example 35. Client Destroys a Channel</p><div class="indent"><pre class="prettyprint">
 &lt;iq from='hag66@shakespeare.example/UUID-a1j/7533'
    id='lx09df27'
    to='mix.shakespeare.example'
    type='set'&gt;
  &lt;destroy channel='coven' xmlns='urn:xmpp:mix:core:0'/&gt;
&lt;/iq&gt;

&lt;iq from='mix.shakespeare.example'
    id='lx09df27'
    to='hag66@shakespeare.example/UUID-a1j/7533'
    type='result'&gt;
&lt;/iq&gt;
</pre></div>
    </div>
    <div class="indent"><h3>7.3.5 <a name="usecase-server-destroy" id="usecase-server-destroy">Server Destroying a Channel</a></h3>
      <p class="" style="">
        A server MUST destroy a channel that has exceeded its specified explicit lifetime.
        Servers MAY destroy channels which have no participants and/or presence according to local policy.   There will often be good reasons to not destroy rooms in these scenarios, in particular to facilitate channel re-use and history access.
      </p>
    </div>
  </div>
<h2>8.
       <a name="not-included-from45" id="not-included-from45">Capabilities not provided in MIX</a></h2>
  <p class="" style="">This section lists a number of capabilities not specified in the core MIX which are provided in <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0045.html">Multi-User Chat (XEP-0045)</a></span>  [<a href="#nt-idm241">1</a>].   These capabilities will not be added to core MIX but they could in the future be specified as independent XEPs.</p>
  <div class="indent"><h3>8.1 <a name="password-control" id="password-control">Password Controlled Channels</a></h3>
    <p class="" style="">
      <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0045.html">Multi-User Chat (XEP-0045)</a></span>  [<a href="#nt-idm241">1</a>] provides a mechanism to control access to MUC rooms using passwords.  An equivalent mechanism is not included in core MIX, as it has a number of security issues.  Control of access to channels is better achieved using an explicit list of participants.
    </p>
  </div>
  <div class="indent"><h3>8.2 <a name="voice-control" id="voice-control">Voice Control</a></h3>
    <p class="" style="">
      <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0045.html">Multi-User Chat (XEP-0045)</a></span>  [<a href="#nt-idm241">1</a>] defines a mechanism so that MUC moderators can control who is able to send messages to a MUC room using a "voice" mechanism.  MIX does not provide an exact functional equivalent, although access control to channels enables some of the goals of voice control to be achieved in a different manner.

    </p>
  </div>

<div class="indent"><h3>8.3 <a name="not-subject" id="not-subject">Subject</a></h3>
  <p class="" style=""><span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0045.html">Multi-User Chat (XEP-0045)</a></span>  [<a href="#nt-idm241">1</a>] provide a Subject capability to enable setting of the current topic of discussion.   The Name and Description attributes provided by MIX enable descriptive information to be associated with a channel.   These attributes can replace Subject in the way it is used in many MUC rooms, but they do not reflect the more limited topic nature of Subject.</p>
  <p class="" style="">It is likely that a new XEP to be used with MIX will be written, perhaps using a "Sticky Messages" approach to fulfil the Subject capability using a different approach. </p>
</div>
<h2>9.
       <a name="i18n" id="i18n">Internationalization Considerations</a></h2>
  <p class="" style="">MIX allows specification of a number of human readable strings associated with a MIX channel, in particular the name and description information of a  MIX channel.   These strings MAY have language set using an xml:lang attribute, and multiple values MAY be set provided that each one is distinguished using xml:lang.
  </p>

  <p class="" style="">Nicknames SHOULD be normalized using the "nickname" profile of the PRECIS OpaqueString class, as defined in <span class="ref" style=""><a href="http://tools.ietf.org/html/rfc7700">RFC 7700</a></span>  [<a href="#nt-idm603">18</a>]. </p>
<h2>10.
       <a name="security" id="security">Security Considerations</a></h2>
  <p class="" style="">MIX is built over MAM and PubSub and the security considerations of <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0313.html">Message Archive Management (XEP-0313)</a></span>  [<a href="#nt-idm255">3</a>] and <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0060.html">Publish-Subscribe (XEP-0060)</a></span>  [<a href="#nt-idm251">2</a>] MUST be considered. These services protect MIX channel information, which can be sensitive and needs appropriate protection.</p>
  <p class="" style="">MIX channels MAY be JID Hidden, in order to hide the JIDs of channel participants from those accessing the channel.  Care MUST be taken to ensure that JIDs are fully hidden. In particular when proxy JIDs are prepared, this MUST be done in a manner which ensure that the real JIDs cannot be determined.   Where nicks are assigned by a channel, this MUST be done in a way that does not expose the JID.</p>
  <p class="" style="">
    There is no MIX equivalent to <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0045.html">Multi-User Chat (XEP-0045)</a></span>  [<a href="#nt-idm241">1</a>] password controlled rooms, which avoids a number of security issues.
  </p>
  <p class="" style="">
    MIX-ADMIN defines  flexible access control options, which MUST be used in a manner appropriate to the security requirements of MIX users and services.
  </p>

<h2>11.
       <a name="iana" id="iana">IANA Considerations</a></h2>
  <p class="" style="">None.</p>
<h2>12.
       <a name="registrar" id="registrar">XMPP Registrar Considerations</a></h2>
  <p class="" style="">The urn:xmpp:mix namespace needs to be registered.</p>
<h2>13.
       <a name="schema" id="schema">XML Schema</a></h2>
  <p class="" style="">To be supplied when MIX progresses to proposed standard.</p>
<h2>14.
       <a name="ack" id="ack">Acknowledgements</a></h2>
  <p class="" style="">Peter St Andre provided key early input to MIX and worked on the original specification with Kevin Smith. </p>
  <p class="" style="">Thanks to the following who have made contributions to the ongoing MIX specification development: Dave Cridland, Tarun Gupta, Philipp Hancke, Waqas Hussain, Timothée Jaussoin, Evgeny Khramtsov, Georg Lukas, Tobias Markmann, Ralph Meijer, Edwin Mons, Emmanuel Gil Peyrot, Manuel Rubio, Florian Schmaus, Lance Stout, Sam Whited, Jonas Wielicki, Matthew Wild and one anonymous reviewer.</p>
<hr /><a name="appendices" id="appendices"></a><h2>Appendices</h2><hr /><a name="appendix-docinfo" id="appendix-docinfo"></a><h3>Appendix A: Document Information</h3><p class="indent">
            Series: <a href="http://xmpp.org/extensions/">XEP</a><br />
            Number: 0369<br />
            Publisher: <a href="/xsf/">XMPP Standards Foundation</a><br />
            Status:
            <a href="http://xmpp.org/extensions/xep-0001.html#states-Experimental">Experimental</a><br />
            Type:
            <a href="http://xmpp.org/extensions/xep-0001.html#types-Standards Track">Standards Track</a><br />
            Version: 0.11.0<br />
            Last Updated: 2018-05-21<br />
                Approving Body: <a href="http://xmpp.org/council/">XMPP Council</a><br />Dependencies: XMPP Core, XMPP IM, XEP-0004, XEP-0030, XEP-0054, XEP-0060, XEP-0084, XEP-0128, XEP-0198, XEP-0292, XEP-0297, XEP-0313, XEP-0372<br />
                Supersedes: None<br />
                Superseded By: None<br />
            Short Name: MIX-CORE<br />
              Source Control:
                <a class="standardsButton" href="https://github.com/xsf/xeps/blob/master/xep-0369.xml">HTML</a><br />
            This document in other formats:
                <a class="standardsButton" href="http://xmpp.org/extensions/xep-0369.xml">XML</a> 
                <a class="standardsButton" href="http://xmpp.org/extensions/xep-0369.pdf">PDF</a></p><hr /><a name="appendix-authorinfo" id="appendix-authorinfo"></a><h3>Appendix B: Author Information</h3><div class="indent"><h3>Kevin Smith</h3><p class="indent">
        Email:
        <a href="mailto:kevin.smith@isode.com">kevin.smith@isode.com</a><br />
        JabberID:
        <a href="xmpp:kevin.smith@isode.com">kevin.smith@isode.com</a><br /></p><h3>Steve Kille</h3><p class="indent">
        Email:
        <a href="mailto:steve.kille@isode.com">steve.kille@isode.com</a><br />
        JabberID:
        <a href="xmpp:steve.kille@isode.com">steve.kille@isode.com</a><br /></p></div><hr /><a name="appendix-legal" id="appendix-legal"></a><h3>Appendix C: Legal Notices</h3><div class="indent"><h4>Copyright</h4>This XMPP Extension Protocol is copyright © 1999 – 2018 by the <a href="https://xmpp.org/">XMPP Standards Foundation</a> (XSF).<h4>Permissions</h4>Permission is hereby granted, free of charge, to any person obtaining a copy of this specification (the "Specification"), to make use of the Specification without restriction, including without limitation the rights to implement the Specification in a software program, deploy the Specification in a network service, and copy, modify, merge, publish, translate, distribute, sublicense, or sell copies of the Specification, and to permit persons to whom the Specification is furnished to do so, subject to the condition that the foregoing copyright notice and this permission notice shall be included in all copies or substantial portions of the Specification. Unless separate permission is granted, modified works that are redistributed shall not contain misleading information regarding the authors, title, number, or publisher of the Specification, and shall not claim endorsement of the modified works by the authors, any organization or project to which the authors belong, or the XMPP Standards Foundation.<h4>Disclaimer of Warranty</h4><span style="font-weight: bold">## NOTE WELL: This Specification is provided on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or implied, including, without limitation, any warranties or conditions of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A PARTICULAR PURPOSE. ##</span><h4>Limitation of Liability</h4>In no event and under no legal theory, whether in tort (including negligence), contract, or otherwise, unless required by applicable law (such as deliberate and grossly negligent acts) or agreed to in writing, shall the XMPP Standards Foundation or any author of this Specification be liable for damages, including any direct, indirect, special, incidental, or consequential damages of any character arising from, out of, or in connection with the Specification or the implementation, deployment, or other use of the Specification (including but not limited to damages for loss of goodwill, work stoppage, computer failure or malfunction, or any and all other commercial damages or losses), even if the XMPP Standards Foundation or such author has been advised of the possibility of such damages.<h4>IPR Conformance</h4>This XMPP Extension Protocol has been contributed in full conformance with the XSF's Intellectual Property Rights Policy (a copy of which can be found at &lt;<a href="https://xmpp.org/about/xsf/ipr-policy">https://xmpp.org/about/xsf/ipr-policy</a>&gt; or obtained by writing to XMPP Standards Foundation, P.O. Box 787, Parker, CO 80134 USA).</div><hr /><a name="appendix-xmpp" id="appendix-xmpp"></a><h3>Appendix D: Relation to XMPP</h3><p class="indent">The Extensible Messaging and Presence Protocol (XMPP) is defined in the XMPP Core (RFC 6120) and XMPP IM (RFC 6121) specifications contributed by the XMPP Standards Foundation to the Internet Standards Process, which is managed by the Internet Engineering Task Force in accordance with RFC 2026. Any protocol defined in this document has been developed outside the Internet Standards Process and is to be understood as an extension to XMPP rather than as an evolution, development, or modification of XMPP itself.</p><hr /><a name="appendix-discuss" id="appendix-discuss"></a><h3>Appendix E: Discussion Venue</h3><p class="indent">The primary venue for discussion of XMPP Extension Protocols is the &lt;<a href="http://mail.jabber.org/mailman/listinfo/standards">standards@xmpp.org</a>&gt; discussion list.</p><p class="indent">Discussion on other xmpp.org discussion lists might also be appropriate; see &lt;<a href="http://xmpp.org/about/discuss.shtml">http://xmpp.org/about/discuss.shtml</a>&gt; for a complete list.</p><p class="indent">Errata can be sent to &lt;<a href="mailto:editor@xmpp.org">editor@xmpp.org</a>&gt;.</p><hr /><a name="appendix-conformance" id="appendix-conformance"></a><h3>Appendix F: Requirements Conformance</h3><p class="indent">The following requirements keywords as used in this document are to be interpreted as described in <a href="http://www.ietf.org/rfc/rfc2119.txt">RFC 2119</a>: "MUST", "SHALL", "REQUIRED"; "MUST NOT", "SHALL NOT"; "SHOULD", "RECOMMENDED"; "SHOULD NOT", "NOT RECOMMENDED"; "MAY", "OPTIONAL".</p><hr /><a name="appendix-notes" id="appendix-notes"></a><h3>Appendix G: Notes</h3><div class="indent"><p><a name="nt-idm241" id="nt-idm241">1</a>. XEP-0045: Multi-User Chat &lt;<a href="https://xmpp.org/extensions/xep-0045.html">https://xmpp.org/extensions/xep-0045.html</a>&gt;.</p><p><a name="nt-idm251" id="nt-idm251">2</a>. XEP-0060: Publish-Subscribe &lt;<a href="https://xmpp.org/extensions/xep-0060.html">https://xmpp.org/extensions/xep-0060.html</a>&gt;.</p><p><a name="nt-idm255" id="nt-idm255">3</a>. XEP-0313: Message Archive Management &lt;<a href="https://xmpp.org/extensions/xep-0313.html">https://xmpp.org/extensions/xep-0313.html</a>&gt;.</p><p><a name="nt-idm282" id="nt-idm282">4</a>. XEP-0289: Federated MUC for Constrained Environments &lt;<a href="https://xmpp.org/extensions/xep-0289.html">https://xmpp.org/extensions/xep-0289.html</a>&gt;.</p><p><a name="nt-idm294" id="nt-idm294">5</a>. XEP-0369: Mediated Information eXchange (MIX) &lt;<a href="https://xmpp.org/extensions/xep-0369.html">https://xmpp.org/extensions/xep-0369.html</a>&gt;.</p><p><a name="nt-idm299" id="nt-idm299">6</a>. XEP-0403: Mediated Information eXchange (MIX): Presence Support. &lt;<a href="https://xmpp.org/extensions/xep-0403.html">https://xmpp.org/extensions/xep-0403.html</a>&gt;.</p><p><a name="nt-idm304" id="nt-idm304">7</a>. XEP-0405: Mediated Information eXchange (MIX): Participant Server Requirements &lt;<a href="https://xmpp.org/extensions/xep-0405.html">https://xmpp.org/extensions/xep-0405.html</a>&gt;.</p><p><a name="nt-idm309" id="nt-idm309">8</a>. XEP-0406: Mediated Information eXchange (MIX): MIX Administration &lt;<a href="https://xmpp.org/extensions/xep-0406.html">https://xmpp.org/extensions/xep-0406.html</a>&gt;.</p><p><a name="nt-idm314" id="nt-idm314">9</a>. XEP-0404: Mediated Information eXchange (MIX): JID Hidden Channels. &lt;<a href="https://xmpp.org/extensions/xep-0404.html">https://xmpp.org/extensions/xep-0404.html</a>&gt;.</p><p><a name="nt-idm319" id="nt-idm319">10</a>. XEP-0407: Mediated Information eXchange (MIX): Miscellaneous Capabilities &lt;<a href="https://xmpp.org/extensions/xep-0407.html">https://xmpp.org/extensions/xep-0407.html</a>&gt;.</p><p><a name="nt-idm324" id="nt-idm324">11</a>. XEP-0408: Mediated Information eXchange (MIX): Co-existence with MUC &lt;<a href="https://xmpp.org/extensions/xep-0408.html">https://xmpp.org/extensions/xep-0408.html</a>&gt;.</p><p><a name="nt-idm354" id="nt-idm354">12</a>. XEP-0030: Service Discovery &lt;<a href="https://xmpp.org/extensions/xep-0030.html">https://xmpp.org/extensions/xep-0030.html</a>&gt;.</p><p><a name="nt-idm359" id="nt-idm359">13</a>. XEP-0163: Personal Eventing Protocol &lt;<a href="https://xmpp.org/extensions/xep-0163.html">https://xmpp.org/extensions/xep-0163.html</a>&gt;.</p><p><a name="nt-idm468" id="nt-idm468">14</a>. XEP-0004: Data Forms &lt;<a href="https://xmpp.org/extensions/xep-0004.html">https://xmpp.org/extensions/xep-0004.html</a>&gt;.</p><p><a name="nt-idm479" id="nt-idm479">15</a>. RFC 6120: Extensible Messaging and Presence Protocol (XMPP): Core &lt;<a href="http://tools.ietf.org/html/rfc6120">http://tools.ietf.org/html/rfc6120</a>&gt;.</p><p><a name="nt-idm484" id="nt-idm484">16</a>. RFC 6121: Extensible Messaging and Presence Protocol (XMPP): Instant Messaging and Presence &lt;<a href="http://tools.ietf.org/html/rfc6121">http://tools.ietf.org/html/rfc6121</a>&gt;.</p><p><a name="nt-idm596" id="nt-idm596">17</a>. RFC 4122: A Universally Unique IDentifier (UUID) URN Namespace &lt;<a href="http://tools.ietf.org/html/rfc4122">http://tools.ietf.org/html/rfc4122</a>&gt;.</p><p><a name="nt-idm603" id="nt-idm603">18</a>. RFC 7700: Preparation, Enforcement, and Comparison of Internationalized Strings Representing Nicknames&lt;<a href="http://tools.ietf.org/html/rfc7700">http://tools.ietf.org/html/rfc7700</a>&gt;.</p></div><hr /><a name="appendix-revs" id="appendix-revs"></a><h3>Appendix H: Revision History</h3><p>Note: Older versions of this specification might be available at <a href="http://xmpp.org/extensions/attic/">http://xmpp.org/extensions/attic/</a></p><div class="indent"><h4>Version 0.11.0 (2018-05-21)</h4><div class="indent"><p class="" style="">
      Remove PSA as author (as he requested);
      Major change to move non-core aspects to different XEPs;
    </p> (sek)
    </div><h4>Version 0.10.1 (2018-05-12)</h4><div class="indent"><p class="" style="">Editorial fixes.</p> (marj)
    </div><h4>Version 0.10.0 (2018-05-10)</h4><div class="indent"><p class="" style="">
      Clarify Owner/Administrator separation from participants and descriptions of channel roles;
      Clarify Owner handling on channel join;
      New default for configuration nodes present;
      Clarify configuration Last Change Made By;
      Clarify Mandatory Presence;
      Clarification of MIX annotation of roster updates;
      Replace contents of section 6.3 (Ensuring Message Delivery) with reference to future XEP;
      Add MIX Channels in Roster Section;
      Add Proxy JID Architecture Section;
      Add MUC Comparison Introduction Section;
      Add requirement to clarify MIX is intended for non-human use;
    </p> (sek)
    </div><h4>Version 0.9.6 (2018-03-18)</h4><div class="indent"><p class="" style="">
      Fix typo errors with single quotes (marj). Editorial fixes (ralph)
    </p> (Editor (jwi))
    </div><h4>Version 0.9.5 (2018-01-08)</h4><div class="indent"><p class="" style="">
      Various Clarifications from Dave Cridland review:
      Remove Recommendation to do MIX/MUC on separate domains,
      Sort Default JID Visibility Preference,
      Make Owner optional,
      Clarify that Nick is optional;
    </p> (sek)
    </div><h4>Version 0.9.4 (2018-01-02)</h4><div class="indent"><p class="" style="">
      Various Clarifications from Georg Lukas review:
      Role Membership reword,
      Participant's Node Joining clarification,
      Joining Channel Clarification,
      Coming online clarification,
      Going offline JID error,
      Allow servers to limit retract time frame,
      Clarify that private messages must not be groupchat,
      Creating Channel Clarification,
      Address security concerns on Converting a 1:1 Conversation to a Channel,
      Remove requirement for all user clients to support MIX,
      Change Retract to use MAM-ID;
      Ensure use of .example throughout (follow RFC conventions);
    </p> (sek)
    </div><h4>Version 0.9.3 (2017-07-18)</h4><div class="indent"><p class="" style="">
      Remove Legacy MIX Namespace;
      Add mix element in message to hold MIX additional information;
      Roster Update Clarifications;
      Clarify when messages are delivered to clients;
      Extend Roster Get to select format;
      Ensure that text defining attributes and elements reference the namespace;
      Change mix_nick_register to nick-register;
      Separate namespace for roster information;
      rename jidmap2 to jidmap-visible;
      Namespace bump to mix:1;
      Correct from in response of join/leave IQs;
      Add capability for MIX in client's server;
    </p> (sek)
    </div><h4>Version 0.9.2 (2017-04-03)</h4><div class="indent"><p class="" style="">
      Fix xmpp:nodes typos;
      Remove namespace references in Info/Config nodes;
      Modify Participant and JID Map syntaxes;
      Clarifications on subscription to participants node and using this to receive Nick changes;
      Replace use of "query" as MIX defined operations for setting nick;
    </p> (sek)
    </div><h4>Version 0.9.1 (2017-03-29)</h4><div class="indent"><p class="" style="">
      Editorial Changes (addressing comments  from Timothée Jaussoin);
    </p> (sek)
    </div><h4>Version 0.9 (2017-03-22)</h4><div class="indent"><p class="" style="">
      Editorial Changes (mainly from Georg Lukas);
      Change to new syntax for proxy JIDs;
      Clarify MAM archive on Send;
      Extend to sort Selected JID visibility;
      Add examples of lookup read JID from proxy JID;
    </p> (sek)
    </div><h4>Version 0.8.2 (2017-03-3)</h4><div class="indent"><p class="" style="">
     Make example ids pseudo-random;
     Shorten the example BIND2 resources;
     Fix Disco features to not use second namespace;
     Correct encoding of jid-multi;
     MAM intro clarification;
     Always add to roster, with direction of roster controlled by share preference;
    </p> (sek)
    </div><h4>Version 0.8.1 (2017-02-20)</h4><div class="indent"><p class="" style="">
      Editorial Updates;
      Clarify Access to MAM history, prior to user joining channel;
      Add option for user to join without presence;
      Check invitee supports MIX;
    </p> (sek)
    </div><h4>Version 0.8 (2017-02-13)</h4><div class="indent"><p class="" style="">
      Update after Brussels Summit;
      Remove Explicit Client Activation and replace with client capability discovery (summit 3);
      Limit Indirect to Join/Leave;
      Clarify Server use of Disco of Client;
      Add MIX capability information to Roster (summit 10);
      MIX as Core Spec (summit 1);
      Clarifications of password control, voice and name/description (summit 4/5/6)
      Removal of Subject and reference future Sticky Messages XEP (summit 7);
      Use example JIDs aligned to anticipated BIND2 specification;
      Clarify PubSub Node Type;
      Add Error handling section;
      Substantial Editorial Review;
    </p> (sek)
    </div><h4>Version 0.7.1 (2017-01-30)</h4><div class="indent"><p class="" style="">
      Ensure all RFC 2119 keywords are capitalized and used correctly;
      Use MAM ID to identify message;
      Clarify use of the various channel names;
      Require all client operations to be direct or indirect (choice is just confusing);
      Add description of implicit activation ;
      MIX Domains must not contain users;
      Clarification on identifying channels in rosters;
    </p> (sek)
    </div><h4>Version 0.7 (2017-01-27)</h4><div class="indent"><p class="" style="">
      Correct multi-language subject setting;
      Remove MIX Proxy terminology and replace with Participant Server Behaviour;
    </p> (sek)
    </div><h4>Version 0.6.5 (2017-01-10)</h4><div class="indent"><p class="" style="">
      Modify MIX Proxy so that client sends to bare JID
    </p> (sek)
    </div><h4>Version 0.6.4 (2017-01-10)</h4><div class="indent"><p class="" style="">
      Add node='mix' to channel disco to facilitate MIX and MUC co-existence on same node;
      Return Proxy JID on Join;
      Adjustment to message reflection
    </p> (sek)
    </div><h4>Version 0.6.3 (2016-12-22)</h4><div class="indent"><p class="" style="">
      Add Update and Distribution to Table 3;
      Correct from in messages from channel;
      Use XEP-0297 in message forwarding;
      Update Dependent XEPs
    </p> (sek)
    </div><h4>Version 0.6.2 (2016-12-21)</h4><div class="indent"><p class="" style="">
      Editorial Changes (Georg Lukas Review);
      Improve 1:1 Conversion;
      Sort out MIX Proxy and Presence Update
    </p> (sek)
    </div><h4>Version 0.6.1 (2016-12-05)</h4><div class="indent"><p class="" style="">
      Clarify Direct PubSub access to each node type.
    </p> (sek)
    </div><h4>Version 0.6 (2016-12-02)</h4><div class="indent"><p class="" style="">
     Added Internationalization Consideration section, and various I18n edits;
     Added Security Considerations section;
     Tombstoning of Redaction changes made optional;
     Added a section specifying MIX Proxy;
     Change configuration and information node management to directly use PubSub;
     Provide for XEP-0202 (vCard4 over XMPP) in addition to vcard-temp support.
    </p> (sek (XEP Editor: ssw))
    </div><h4>Version 0.5 (2016-11-04)</h4><div class="indent"><p class="" style="">
      Complete and restructure Administration Section: Creating Channels and modifying configuration;
      Add avatar nodes;
      Add section on roster handling;
      Discovering MIX Services;
      Resolve questions on future capabilities;
      Administration of Allowed/Banned; clarify Kick functionality is replaced;
      User Presence Probes on Channel Start-up;
      Add user Presence preference;
      Clarify and Expand MAM Archiving;
      Sort Retraction;
      Add Marker IQ;
      Conversion 1:1
    </p> (sek (XEP Editor: ssw))
    </div><h4>Version 0.4 (2016-09-21)</h4><div class="indent"><p class="" style="">Clarification of MIX Proxy concept; Clarify node definitions; Make all nodes optional; Merge ACL node into configuration node; Add information node including avatar; Resolve 4.1 question by accepting provisional answer; Add discovery examples; setting and sharing Subject; Protocol to request channel information and participants;  vCard Request;  Private Messages; Set user preferences with XEP-0004; Remove references to member and occupant;  Add Role Definition;  Add Banned and Allowed Nodes;  Update Configuration Definition;Add information on original id to message reflected back to sender  Add XEP-0372 mechanism to reference channel and informal invite;  Channel Invitations </p> (sek)
    </div><h4>Version 0.3.1 (2016-09-07)</h4><div class="indent"><p class="" style="">Introduce MIX Proxy concept.   Add MIX capability in client discovery.</p> (sek)
    </div><h4>Version 0.3 (2016-09-05)</h4><div class="indent"><p class="" style="">Addressing comments from review of 0.2 and expansion/clarification of MUC/MIX dual working</p> (sek)
    </div><h4>Version 0.2.3 (2016-09-01)</h4><div class="indent"><p class="" style="">Cleanup, use precis nickname for nicknames, and allow multiple subject languages.</p> (ssw, ks)
    </div><h4>Version 0.2.2 (2016-08-26)</h4><div class="indent"><p class="" style="">Phrasing and grammar.</p> (ssw)
    </div><h4>Version 0.2.1 (2016-08-25)</h4><div class="indent"><p class="" style="">Includes Link Mauve (Emmanuel Gil PEYROT) editorial changes</p> (sek, egp)
    </div><h4>Version 0.2 (2016-08-16)</h4><div class="indent"><p class="" style="">Significant update based on XMPP Summit discussions</p> (sek, ks)
    </div><h4>Version 0.1.1 (2016-03-17)</h4><div class="indent"><p class="" style="">Fix XML in join example.</p> (XEP Editor (ssw))
    </div><h4>Version 0.1 (2016-01-07)</h4><div class="indent"><p class="" style="">Initial published version approved by the XMPP Council.</p> (XEP Editor (asw))
    </div><h4>Version 0.0.1 (2015-10-12)</h4><div class="indent"><p class="" style="">First draft.</p> (kis/psa)
    </div></div><hr /><p>END</p></body></html>
